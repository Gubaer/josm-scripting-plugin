<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"clipboard.js.html":{"id":"clipboard.js.html","title":"Source: clipboard.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: clipboard.js /** * Provides access to the system clipboard * * @module clipboard */ /** * Set or get the clipboard content as text * * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;get&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies the clipboard content as text or &lt;code&gt;undefined&lt;/code&gt;, * if no clipboard content is available or if it can't be converted to a * string.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;set&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Sets the clipboard content&lt;/dd&gt; * &lt;/dl&gt; * * @example * var clipboard = require(\"clipboard\"); * // set the clipboard content * clipboard.text = \"Hello World!\"; * * @property {string} text clipboard content as text * @name text * @summary Set or get the clipboard content as text * @static */ Object.defineProperty(exports, \"text\", { enumerable: true, get: function() { var Toolkit = java.awt.Toolkit; var DataFlavor = java.awt.datatransfer.DataFlavor; var transferable = Toolkit.getDefaultToolkit() .getSystemClipboard().getContents(null); try { if (transferable &amp;&amp; transferable.isDataFlavorSupported( DataFlavor.stringFlavor)) { return transferable.getTransferData(DataFlavor.stringFlavor); } } catch (e) { } return undefined; }, set: function(value) { var StringSelection = java.awt.datatransfer.StringSelection; var Toolkit = java.awt.Toolkit; Toolkit.getDefaultToolkit().getSystemClipboard().setContents( new StringSelection(String(value || \"\")), null ); } }); Ã— Search results Close "},"josm.js.html":{"id":"josm.js.html","title":"Source: josm.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm.js /** * This module is auto-loaded by the scripting plugin. It provides the * implementation of the global &lt;code&gt;josm&lt;/code&gt; object. * * @module josm */ var Version = org.openstreetmap.josm.data.Version; var MessageFormat = java.text.MessageFormat; var out = java.lang.System.out; var ScriptingConsole = org.openstreetmap.josm.plugins.scripting.ui.console.ScriptingConsole; var JOptionPane = javax.swing.JOptionPane; var HelpAwareOptionPane = org.openstreetmap.josm.gui.HelpAwareOptionPane; var MainApplication = org.openstreetmap.josm.gui.MainApplication; var util = require(\"josm/util\"); /** * Replies the current JOSM version string. * * @example * josm.alert(josm.version); * * @readOnly * @property {string} version the JOSM version * @static * @name version * @summary JOSM version string */ Object.defineProperty(exports, \"version\", { enumerable: true, get: function() { return Version.getInstance().getVersionString(); } }); /** * Replies the layers object. * * @example * josm.alert(\"num layers: \" + josm.layers.length); * * // name of first layer * josm.alert(\"num layers: \" + josm.layers.get(0).name); * * @readOnly * @name layers * @static * @property {object} layers the layers object * @summary accessor for JOSM layers */ Object.defineProperty(exports, \"layers\", { enumerable: true, get: function() { return require(\"josm/layers\"); } }); /** * Displays an alert window with a message * * &lt;strong&gt;Signatures&lt;/strong&gt; * * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;alert(message)&lt;/code&gt;&lt;dt&gt; * &lt;dd&gt;Displays an information message with an OK button.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;alert(message, ?options)&lt;/code&gt;&lt;dt&gt; * &lt;dd&gt;Displays a message. The look and feel of the alert window depends on * the &lt;var&gt;options&lt;/var&gt;. The following options are supported: * &lt;dl&gt; * &lt;dt&gt;&lt;code&gt;title&lt;/code&gt;:string&lt;/dt&gt; * &lt;dd&gt;(optional) the window title. A string is expected. Empty string * if missing.&lt;/dt&gt; * * &lt;dd&gt;&lt;code&gt;messageType&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;(optional) the message type. Use one of the following values: * &lt;ul&gt; * &lt;li&gt;{@class javax.swing.JOptionPane}.INFORMATION_MESSAGE, * \"info\",\"information\"&lt;/li&gt; * &lt;li&gt;{@class javax.swing.JOptionPane}.ERROR_MESSAGE, * \"error\"&lt;/li&gt; * &lt;li&gt;{@class javax.swing.JOptionPane}.WARNING_MESSAGE, * \"warning\", \"warn\"&lt;/li&gt; * &lt;li&gt;{@class javax.swing.JOptionPane}.QUESTION_MESSAGE, * \"question\"&lt;/li&gt; * &lt;li&gt;{@class javax.swing.JOptionPane}.PLAIN_MESSAGE, * \"plain\"&lt;/li&gt; * &lt;/ul&gt; * Default value is * {@class javax.swing.JOptionPane}.INFORMATION_MESSAGE. * String values are not case sensitive and leading and * trailing white space is removed. * &lt;/dd&gt; * &lt;/dl&gt; * &lt;/dd&gt; * &lt;/dl&gt; * * @example * // display an information alert * josm.alert(\"Hello World!\"); * * // display an error alert * josm.alert(\"Got an error\", { * title: \"Error Alert\", * messageType: \"error\" * }); * * @summary display a message * @param {string} message the message * @function * @static */ exports.alert = function() { var map = { \"information\": JOptionPane.INFORMATION_MESSAGE, \"info\": JOptionPane.INFORMATION_MESSAGE, \"error\": JOptionPane.ERROR_MESSAGE, \"warning\": JOptionPane.WARNING_MESSAGE, \"warn\": JOptionPane.INFORMATION_MESSAGE, \"question\": JOptionPane.QUESTION_MESSAGE, \"plain\": JOptionPane.PLAIN_MESSAGE }; function titleFromOptions(options) { if (util.isString(options.title)) return options.title; return \"\"; }; function messageTypeFromOptions(options) { if (util.isNumber(options.messageType)) { var mt = options.messageType; for (var key in map){ if (!map.hasOwnProperty(key)) continue; if (mt == map[key]) return mt; } return JOptionPane.INFORMATION_MESSAGE; } else if (util.isString(options.messageType)) { var opt = util.trim(options.messageType).toLowerCase(); var ret = map[opt]; return ret !== undefined ? ret : JOptionPane.INFORMATION_MESSAGE; } return JOptionPane.INFORMATION_MESSAGE; }; switch(arguments.length){ case 0: return; case 1: HelpAwareOptionPane.showOptionDialog(MainApplication.getMainFrame(), arguments[0],\"\", JOptionPane.INFORMATION_MESSAGE,null); return; default: if (typeof arguments[1] !== \"object\") { HelpAwareOptionPane.showOptionDialog(MainApplication.getMainFrame(), arguments[0],\"\", JOptionPane.INFORMATION_MESSAGE,null); return; } var title = titleFromOptions(arguments[1]); var messageType = messageTypeFromOptions(arguments[1]); HelpAwareOptionPane.showOptionDialog(MainApplication.getMainFrame(), arguments[0],title,messageType,null); } }; /** * Opens one or more files in JOSM. * * Creates and opens layers in JOSM, depending on the kind of file opened: * * &lt;ul&gt; * &lt;li&gt;creates a data layer for data files&lt;/li&gt; * &lt;li&gt;creates a gpx layer for gpx files&lt;/li&gt; * &lt;li&gt;creates an image layer for a directory with images&lt;/li&gt; * &lt;li&gt;etc.&lt;/li&gt; * &lt;/ul&gt; * * @example * // open a data file in a new data layer * josm.open(\"/my/data/file.osm\"); * * @summary Opens one or more files in JOSM * @param {...(java.io.File | string)} files files to open * @function * @static */ exports.open = function() { var OpenFileAction = org.openstreetmap.josm.actions.OpenFileAction; var io = java.io; var files = []; for (var i=0; i&lt;arguments.length; i++) { var file = arguments[i]; if (util.isNothing(file)) continue; if (util.isString(file)) { files.push(new io.File(file)); } else if (file instanceof io.File) { files.push(file); } else { util.assert(false, \"unexpected value, got {0}\", file); } } OpenFileAction.openFiles(files); }; /** * Replies the global command history. * * Use this object to undo/redo commands, or to clear the command * history. * * @example * // undoes the last command * josm.commands.undo(); * * // redoes two commands * josm.commands.redo(2); * * @readOnly * @name commands * @property {module:josm/command.CommandHistory} commands * @summary the global command history * @static */ var commands = require(\"josm/command\").CommandHistory; Object.defineProperty(exports, \"commands\", { enumerable: true, value: commands }); /** * Replies an accessor for JOSMs menu bar. * * Use this object to inspect or modify the menu bar, i.e. to add additional * menu items. * * @readOnly * @property {module:josm/ui/menu.MenuBar} menu accessor for JOSMs menu bar * @name menu * @static * @summary Replies an accessor for JOSMs menu bar. */ var menu = require(\"josm/ui/menu\").MenuBar; Object.defineProperty(exports, \"menu\", { enumerable: true, value: menu }); /** * Loads a class using the class loader of a 3d-party plugin * * @summary Loads a class using the class loader of a 3d-party plugin * @param {string} pluginName the name of the plugin * @param {string} className the class name * * @example * var console = require(\"josm/scriptingconsole\"); * var cls = josm.loadClassFrom3dPartyPlugin( * \"contourmerge\", * \"org.openstreetmap.josm.plugins.contourmerge.ContourMergePlugin\" * ); * // isEnabled() is a static method of the class ContourMergePlugin * console.println(cls.isEnabled()); */ exports.loadClassFrom3dPartyPlugin = function(pluginName, className) { var ScriptingPlugin = org.openstreetmap.josm.plugins.scripting.ScriptingPlugin; var cls = ScriptingPlugin.loadClassFrom3dPartyPlugin( pluginName, className ); return cls; } Ã— Search results Close "},"josm_api.js.html":{"id":"josm_api.js.html","title":"Source: josm/api.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/api.js /** * This module provides functions to retrieve data from and upload data * to an OSM server. * * @module josm/api */ var URL = java.net.URL; var OsmApi = org.openstreetmap.josm.io.OsmApi; var Changeset = org.openstreetmap.josm.data.osm.Changeset; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; var PrimitiveId = org.openstreetmap.josm.data.osm.PrimitiveId; var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; var ProgressMonitor = org.openstreetmap.josm.gui.progress.ProgressMonitor; var NullProgressMonitor = org.openstreetmap.josm.gui.progress.NullProgressMonitor; var OsmServerChangesetReader = org.openstreetmap.josm.io.OsmServerChangesetReader; var OsmServerObjectReader = org.openstreetmap.josm.io.OsmServerObjectReader; var OsmServerBackreferenceReader = org.openstreetmap.josm.io.OsmServerBackreferenceReader; var Preferences = org.openstreetmap.josm.data.Preferences; var util = require(\"josm/util\"); /** * Provides methods to open, close, get, update, etc. changesets on the OSM * API server. * * &lt;strong&gt;Note:&lt;/strong&gt; this class doesn't provide a constructor. Methods * and properties are static. * * @example * // load the changeset api * var api = require(\"josm/api\").ChangesetApi; * * // create a new changeset on the server * var cs = api.open(); * * @class * @name ChangesetApi */ exports.ChangesetApi = function() {}; /** * Creates and opens a changeset * * &lt;ul&gt; * &lt;li&gt;&lt;code&gt;open()&lt;/code&gt; - open a new changeset with no tags&lt;/li&gt; * &lt;li&gt;&lt;code&gt;open(aChangeset)&lt;/code&gt; - open a new changeset with the tags * from &lt;code&gt;aChangeset&lt;/code&gt;&lt;/li&gt; * &lt;li&gt;&lt;code&gt;open(anObject)&lt;/code&gt; - open a new changeset with the tags * given by the properties of &lt;code&gt;anObject&lt;/code&gt;&lt;/li&gt; * &lt;/ul&gt; * * @example * var api = require(\"josm/api\").ChangesetApi; * var Changeset = org.openstreetmap.josm.data.osm.Changeset; * * // open a new changeset with no tags * var cs1 = api.open(); * * // open a new changeset with the tags given by the supplied changeset * var cs2 = new Changeset(); * cs2.put(\"comment\", \"a test comment\"); * cs2 = api.open(cs2); * * // open a new changeset with the tags given by the object * var cs3 = api.open({comment: \"a test comment\"}); * * @static * @returns {org.openstreetmap.josm.data.osm.Changeset} the changeset * @summary Creates and opens a changeset * @function * @memberof module:josm/api~ChangesetApi */ exports.ChangesetApi.open = function() { var cs; switch(arguments.length) { case 0: cs = new Changeset(); break; case 1: var o = arguments[0]; if (o instanceof Changeset) { cs = o; } else if (typeof o === \"object\") { cs = new Changeset(); for (var p in o) { if (!o.hasOwnProperty(p)) continue; var key = p; var value = o[p]; key = util.trim(key); value = value + \"\"; // convert to string cs.put(key,value); } } else { util.assert(false, \"Unexpected type of argument, expected Changeset or object, \" + \"got {0}\", o); } break; default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } var api = OsmApi.getOsmApi(); api.openChangeset(cs, NullProgressMonitor.INSTANCE); return cs; }; /** * Closes a changeset * * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;close(id)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;closes the changeset with the given id&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;close(aChangeset)&lt;/code&gt;&lt;dt&gt; * &lt;dd&gt;Xloses the changeset given by &lt;code&gt;aChangeset&lt;/code&gt;&lt;/dd&gt; * &lt;/dl&gt; * * @example * var api = require(\"josm/api\").ChangesetApi; * var util = require(\"josm/util\"); * var Changeset = org.openstreetmap.josm.data.osm.Changeset; * * // closs the changeset 12345 * api.close(12345); * * // open a new changeset with the tags given by the supplied changeset * var cs2 = new Changeset(12345); * cs2 = api.close(cs2); * util.assert(cs2.closed); // the changeset is now closed * * @param {number|org.openstreetmap.josm.data.osm.Changeset} changeset the changeset to close * @returns {org.openstreetmap.josm.data.osm.Changeset} the changeset * @summary Closes a changeset * @memberof module:josm/api~ChangesetApi * @function */ exports.ChangesetApi.close = function() { var cs; switch(arguments.length) { case 0: util.assert(false, \"Missing arguments. Expected a changeset it or a changeset\"); case 1: var o = arguments[0]; if (o instanceof Changeset) { cs = o; } else if (util.isNumber(o)) { util.assert(o &gt; 0, \"Expected a positive changeset id, got {0}\", o); cs = new Changeset(o); } else { util.assert(false, \"Unexpected type of argument, expected Changeset or number, \" + \"got {0}\", o); } break; default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } var api = OsmApi.getOsmApi(); api.closeChangeset(cs, NullProgressMonitor.INSTANCE); return cs; }; /** * Updates a changeset * * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;update(aChangeset)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Updates the changeset &lt;code&gt;aChangeset&lt;/code&gt;&lt;/dd&gt; * &lt;/dl&gt; * * @example * var api = require(\"josm/api\").ChangesetApi; * var Changeset = org.openstreetmap.josm.data.osm.Changeset; * * // update the comment of a changeset * var cs2 = new Changeset(12345); * cs2.put(\"comment\", \"an updated comment\"); * cs2 = api.update(cs2); * * @param {org.openstreetmap.josm.data.osm.Changeset} changeset the changeset to update * @static * @returns {org.openstreetmap.josm.data.osm.Changeset} the changeset * @summary Updates a changeset * @function * @memberof module:josm/api~ChangesetApi * @name update */ exports.ChangesetApi.update = function () { var cs; switch(arguments.length) { case 0: util.assert(false, \"Missing arguments. Expected a changeset\"); case 1: var o = arguments[0]; if (o instanceof Changeset) { cs = o; } else { util.assert(false, \"Unexpected type of argument, expected Changeset, got {0}\", o); } break; default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } var api = OsmApi.getOsmApi(); api.updateChangeset(cs, NullProgressMonitor.INSTANCE); return cs; }; /** * Get a changeset from the server * * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature&gt;get(aChangeset)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Gets the changeset specified by &lt;code&gt;aChangeset&lt;/code&gt;. aChangset * must be an instance of &lt;code&gt;Changeset&lt;/code&gt;. * aChangeset.id &amp;gt; 0 expected.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;get(id)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;gets the changeset for the id. id must be a number &amp;gt; 0.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var api = require(\"josm/api\").ChangesetApi; * var Changeset = org.openstreetmap.josm.data.osm.Changeset; * * // get the changeset with id 12345 * var cs1 = api.get(12345); * * // get the changeset with id 12345 * var cs2 = new Changeset(12345); * cs2 = api.get(cs2); * * @param {number|org.openstreetmap.josm.data.osm.Changeset} changeset the changeset to close * @static * @returns {org.openstreetmap.josm.data.osm.Changeset} the changeset * @summary Get a changeset from the server * @memberof module:josm/api~ChangesetApi * @name get */ exports.ChangesetApi.get = function() { var cs; switch(arguments.length) { case 0: util.assert(false, \"Missing arguments. Expected a changeset id or a changeset\"); case 1: var o = arguments[0]; if (o instanceof Changeset) { cs = o; } else if (util.isNumber(o)) { util.assert(o &gt; 0, \"Expected a positive changeset id, got {0}\", o); cs = new Changeset(o); } else { util.assert(false, \"Unexpected type of argument, expected Changeset or number, \" + \"got {0}\", o); } break; default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } var reader = new OsmServerChangesetReader(); cs = reader.readChangeset(cs.id, NullProgressMonitor.INSTANCE); return cs; }; var undefined; /** * Collection of static methods to download objects from and upload objects * to the OSM server. * * &lt;strong&gt;Note:&lt;/strong&gt; this class doesn't provide a constructor. * Methods and properties are \"static\". * * @example * // load the changeset api * var api = require(\"josm/api\").Api; * * // download node 12345 * var ds = api.downloadObject(12345, \"node\"); * * @class * @name Api */ exports.Api = function () {}; function normalizeType(type) { util.assert(util.isSomething(type), \"type must not be null or undefined\"); if (util.isString(type)) { try { type = OsmPrimitiveType.fromApiTypeName(type); } catch(e) { util.assert(false, \"Invalid primitive type, got ''{0}''\", type); } } else if (type instanceof OsmPrimitiveType) { if (! [OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, OsmPrimitiveType.RELATION].contains(type)) { util.assert(false, \"Invalid primitive type, got {0}\", type); } } else { util.assert(false, \"Invalid primitive type, got {0}\", type); } return type; } function normalizeId(id) { util.assert(util.isSomething(id), \"id must not be null or nothing\"); util.assert(util.isNumber(id), \"Expected a number as id, got {0}\", id); util.assert(id &gt; 0, \"Expected a positive number as id, got {0}\", id); return id; } function primitiveIdFromObject(o) { util.assert(o.hasOwnProperty(\"id\"), \"Mandatory property 'id' is missing in object {0}\", o); util.assert(o.hasOwnProperty(\"type\"), \"Mandatory property 'type' is missing in object {0}\", o); return new SimplePrimitiveId(normalizeId(o.id), normalizeType(o.type)); }; function downloadObject_1() { var id; var o = arguments[0]; util.assert(util.isSomething(o), \"Argument 0: must not be null or undefined\"); if (o instanceof PrimitiveId) { id = o; } else if (typeof o === \"object\") { id = primitiveIdFromObject(o); } else { util.assert(false, \"Argument 0: unexpected type, got {0}\", o); } var reader = new OsmServerObjectReader(id, false); var ds = reader.parseOsm(null /* null progress monitor */); return ds; } function optionFull(options) { if (!options.hasOwnProperty(\"full\")) return undefined; var o = options.full; if (typeof o === \"boolean\") return o; util.assert(\"Expected a boolean value for option 'full', got {0}\", o); } function optionVersion(options) { if (!options.hasOwnProperty(\"version\")) return undefined; var o = options.version; util.assert(util.isNumber(o), \"Expected a number for option 'version', got {0}\", o); util.assert(o &gt; 0, \"Expected a number &gt; 0 for option 'version', got {0}\", o); return o; } function downloadObject_2() { function parseOptions(arg) { var options = {full: undefined, version: undefined}; if (! (typeof arg === \"object\")) { return options; } options.full = optionFull(arg); options.version = optionVersion(arg); return options } var id; var options = {full: undefined, version: undefined}; if (util.isNumber(arguments[0])) { id = normalizeId(arguments[0]); var type = normalizeType(arguments[1]); id = new SimplePrimitiveId(id, type); } else if (arguments[0] instanceof PrimitiveId) { id = arguments[0]; options = parseOptions(arguments[1]) } else if (typeof arguments[0] === \"object\") { id = primitiveIdFromObject(arguments[0]); options = parseOptions(arguments[1]) } else { util.assert(false, \"Unsupported types of arguments\"); } var reader; if (util.isDef(options.version)) { reader = new OsmServerObjectReader(id, options.version); } else { reader = new OsmServerObjectReader(id, !!options.full); } var ds = reader.parseOsm(null /* null progress monitor */); return ds; } function downloadObject_3() { var options = {full: undefined, version: undefined}; var n = normalizeId(arguments[0]); var type = normalizeType(arguments[1]); var id = new SimplePrimitiveId(n, type); util.assert(typeof arguments[2] === \"object\", \"Expected an object with named parameters, got {0}\", arguments[2]); options.full = optionFull(arguments[2]); options.version = optionVersion(arguments[2]); var reader; if (util.isDef(options.version)) { reader = new OsmServerObjectReader(id, options.version); } else { reader = new OsmServerObjectReader(id, !!options.full); } var ds = reader.parseOsm(null /* null progress monitor */); return ds; } /** * Downloads an object from the server. * * There are multiple options to specify what object to download. * In addition, the function accepts a set of optional named parameters * as last argument. * * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;downloadObject(id, type, ?options)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;&lt;code&gt;id&lt;/code&gt; is the global numeric id. * &lt;code&gt;type&lt;/code&gt; is either one of the strings \"node\", \"way\", * or \"relation\", or one of the enumeration OsmPrimitiveType.NODE, * OsmPrimitiveType.WAY, or OsmPrimitiveType.RELATION * &lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;downloadObject(id, ?options)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;&lt;code&gt;id&lt;/code&gt; is a &lt;code&gt;PrimitiveId&lt;/code&gt; or an object * with the (mandatory) properties &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt;, * i.e. an object &lt;code&gt;{id: ..., type: ...}&lt;/code&gt;. * &lt;code&gt;id&lt;/code&gt; is again a number, &lt;code&gt;type&lt;/code&gt; is again either one * of the strings \"node\", \"way\", or \"relation\", or one of the * enumeration OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, * or OsmPrimitiveType.RELATION. * &lt;/dd&gt; * &lt;/dl&gt; * In both cases, &lt;code&gt;?options&lt;/code&gt; is an (optional) object with the * following two (optional) properties: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;full&lt;/code&gt;: boolean&lt;/dt&gt; * &lt;dd&gt;If &lt;code&gt;true&lt;/code&gt;, the object and its immediate children are * downloaded, i.e. the nodes of a way and * the relation members of a relation. Default if missing is * &lt;code&gt;false&lt;/code&gt;.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;version&lt;/code&gt;: number&lt;/dt&gt; * &lt;dd&gt;If present, the specified version of the object is downloaded. * If missing, the current version is downloaded. If present, the * option &lt;code&gt;full&lt;/code&gt; is ignored.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var api = require(\"josm/api\").Api; * var SimlePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; * var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; * * // download the node with id 12345 * var ds1 = api.downloadObject(12345, \"node\"); * * // download the node with id 12345 * var ds2 = api.downloadObject({id: 12345, type: \"node\"}); * * // download the full relation (including its members) with id 12345 * var id = new SimplePrimitiveId(12345, OsmPrimitiveType.RELATION); * var ds3 = api.downloadObject(id, {full: true}); * * // download version 5 of the full way 12345 (including its nodes) * var ds4 = api.downloadObject(12345, OsmPrimitiveType.WAY, * {version: 5}); * * @static * @returns {org.openstreetmap.josm.data.osm.DataSet} the downloaded primitives * @summary Downloads an object from the server. * @memberof module:josm/api~Api * @function * @name downloadObjects */ exports.Api.downloadObject = function() { switch(arguments.length) { case 0: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); case 1: return downloadObject_1.apply(this, arguments); case 2: return downloadObject_2.apply(this, arguments); case 3: return downloadObject_3.apply(this, arguments); default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } }; function downloadReferrer_1() { var id; var type; var o = arguments[0]; util.assert(util.isSomething(o), \"Argument 0: must not be null or undefined\"); if (o instanceof PrimitiveId) { id = o; } else if (typeof o === \"object\") { id = primitiveIdFromObject(o); } else { util.assert(false, \"Argument 0: unexpected type, got {0}\", o); } var reader = new OsmServerBackreferenceReader(id.getUniqueId(), id.getType()); var ds = reader.parseOsm(NullProgressMonitor.INSTANCE); return ds; }; function downloadReferrer_2() { var id; var type; var options = {full: undefined}; if (util.isNumber(arguments[0])) { id = normalizeId(arguments[0]); type = normalizeType(arguments[1]); id = new SimplePrimitiveId(id, type); } else if (arguments[0] instanceof PrimitiveId) { id = arguments[0]; var o = arguments[1]; if (util.isSomething(o)) { util.assert(typeof o === \"object\", \"Expected an object with named parameters, got {0}\", o); options.full = optionFull(o); } } else if (typeof arguments[0] === \"object\") { id = primitiveIdFromObject(arguments[0]); var o = arguments[1]; if (util.isSomething(o)) { util.assert(typeof o === \"object\", \"Expected an object with named parameters, got {0}\", o); options.full = optionFull(o); } } else { util.assert(false, \"Unsupported types of arguments\"); } var reader = new OsmServerBackreferenceReader(id.getUniqueId(), id.getType()); if (options.full){ reader.setReadFull(true); } var ds = reader.parseOsm(NullProgressMonitor.INSTANCE); return ds; }; function downloadReferrer_3() { var options = {full: undefined}; var n = normalizeId(arguments[0]); var type = normalizeType(arguments[1]); var id = new SimplePrimitiveId(n, type); util.assert(typeof arguments[2] === \"object\", \"Expected an object with named parameters, got {0}\", arguments[2]); options.full = optionFull(arguments[2]); var reader = new OsmServerBackreferenceReader(id.getUniqueId(), id.getType()); if (options.full){ reader.setReadFull(true); } var ds = reader.parseOsm(NullProgressMonitor.INSTANCE); return ds; }; /** * Downloads the objects &lt;em&gt;referring&lt;/em&gt; to another object from * the server. * * Downloads primitives from the OSM server which * refer to a specific primitive. Given a node, the referring ways and * relations are downloaded. Given a way or a relation, only referring * relations are downloaded. * * The default behaviour is to reply proxy objects only. * * If you set the option &lt;code&gt;{full: true}&lt;/code&gt;, every referring object * is downloaded in full. * * There are multiple options to specify what referrers to download. * In addition, the function accepts a set of optional named parameters as * last argument. * * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;downloadReferrer(id, type, ?options) * &lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;&lt;code&gt;id&lt;/code&gt; is the global numeric id. * &lt;code&gt;type&lt;/code&gt; is either one of the strings \"node\", \"way\", or * \"relation\", or one of the enumeration * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.NODE, * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.WAY, * or {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.RELATION. * &lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;downloadReferrer(id, ?options)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;&lt;code&gt;id&lt;/code&gt; is a &lt;code&gt;PrimitiveId&lt;/code&gt; or an object * with the (mandatory) properties &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt;, * i.e. an object &lt;code&gt;{id: ..., type: ...}&lt;/code&gt;. * &lt;code&gt;id&lt;/code&gt; is again a number, &lt;code&gt;type&lt;/code&gt; is again either one * of the strings \"node\", \"way\", or \"relation\", or one of the * enumeration * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.NODE, * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.WAY, * or {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.RELATION. * &lt;/dd&gt; * &lt;/dl&gt; * In both cases, &lt;code&gt;?options&lt;/code&gt; is an (optional) object with the * following (optional) property: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;full&lt;/code&gt;:boolean&lt;/dt&gt; * &lt;dd&gt;If &lt;code&gt;true&lt;/code&gt;, the the &lt;strong&gt;full&lt;/strong&gt; objects are * retrieved using multi-gets. If missing or &lt;code&gt;false&lt;/code&gt;, * only proxy objects are downloaded. Default: false&lt;/dd&gt; * &lt;/dl&gt; * * @example * var api = require(\"josm/api\").Api; * var nbuilder = require(\"josm/builder\").NodeBuilder; * var SimlePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; * var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; * * // download the objects referring to the node with id 12345 * var ds1 = api.downloadReferrer(12345, \"node\"); * * // download the objects referring to the node with id 12345 * var ds2 = api.downloadReferrer({id: 12345, type: \"node\"}); * * // download the relations referring to the relation with id 12345. * // Referring relations are downloaded in full. * var id = new SimplePrimitiveId(12345, OsmPrimitiveType.RELATION); * var ds3 = api.downloadReferrer(id, {full: true}); * * // create the global node 12345 ... * var node = nbuilder.create(12345); * // ... and downloads its referrers in full * var ds = api.downloadReferrer(node, {full: true}); * * @static * @returns {org.openstreetmap.josm.data.osm.DataSet} the downloaded primitives * @summary Downloads the objects &lt;em&gt;referring&lt;/em&gt; to another object from * the server. * @memberof module:josm/api~Api * @function * @name downloadReferrer */ exports.Api.downloadReferrer = function() { switch(arguments.length) { case 0: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); case 1: return downloadReferrer_1.apply(this, arguments); case 2: return downloadReferrer_2.apply(this, arguments); case 3: return downloadReferrer_3.apply(this, arguments); default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } }; /** * Downloads the objects within a bounding box. * * @example * var api = require(\"josm/api\").Api; * var ds1 = api.downloadArea(new Bounds( * new LatLon(46.9479186,7.4619484), // min * new LatLon(46.9497642, 7.4660683) // max * )); * * var ds1 = api.downloadArea({ * min: {lat: 46.9479186, lon: 7.4619484}, * max: {lat: 46.9497642, lon: 7.4660683} * }); * * @static * @returns {org.openstreetmap.josm.data.osm.DataSet} the downloaded primitives * @summary Downloads the objects within a bounding box * @param {org.openstreetmap.josm.data.Bounds|object} bounds the bounding box * @memberof module:josm/api~Api * @name downloadArea */ exports.Api.downloadArea = function() { var BoundingBoxDownloader = org.openstreetmap.josm.io.BoundingBoxDownloader; var NullProgressMonitor = org.openstreetmap.josm.gui.progress.NullProgressMonitor; var Bounds = org.openstreetmap.josm.data.Bounds; util.assert(arguments.length == 1, \"Expected 1 argument, got {0}\", arguments.length); var bounds = arguments[0]; util.assert(util.isSomething(bounds), \"bounds: must not be null or undefined\"); if (bounds instanceof Bounds) { // do nothing } else if (typeof bounds === \"object\") { bounds = Bounds.make(bounds); // convert to bounds } else { util.assert(false, \"expected an instance of Bounds or an object, got {0}\", bounds); } var downloader = new BoundingBoxDownloader(bounds); return downloader.parseOsm(NullProgressMonitor.INSTANCE); }; /** * Uploads objects to the server. * * You can submit data either as * {@class org.openstreetmap.josm.data.osm.DataSet}, * {@class org.openstreetmap.josm.data.APIDataSet}, javascript array of * {@class org.openstreetmap.josm.data.osm.OsmPrimitive}s or * a {@class java.util.Collection} of * {@class org.openstreetmap.josm.data.osm.OsmPrimitive}s. * * This method supports the same upload strategy as the JOSM upload dialog. * Supply the named parameter &lt;code&gt;{strategy: ...}&lt;/code&gt; to choose the * strategy. * * &lt;p class=\"documentation-warning\"&gt; * Be careful when uploading data to the OSM server! Do not upload copyright * protected or test data. * * * The method takes care to update the primitives in the uploaded data when * the upload succeeds. For instance, uploaded new primitives become global * objects and get assigned their new id and version, successfully deleted * objects become invisible, etc. * * Even if the entire upload of a dataset fails, a subset therefore may * have been uploaded successfully. In order to keep track, which pritives * have been uploaded successfully in case of an error, the method replies a * collection of the successfully uploaded objects. * Named options * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;strategy: string| * {@class org.openstreetmap.josm.io.UploadStrategy}&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Indicates how the data is uploaded. Either one of the strings * &lt;ul&gt; * &lt;li&gt;individualobjects&lt;/li&gt; * &lt;li&gt;chunked&lt;/li&gt; * &lt;li&gt;singlerequest&lt;/li&gt; * &lt;/ul&gt; * or one of the enumeration values in * {@class org.openstreetmap.josm.io.UploadStrategy}. * Default falue: UploadStrategy.DEFAULT_UPLOAD_STRATEGY * &lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;changeset: * number|{@class org.openstreetmap.josm.data.osm.Changeset}&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The changeset to which the data is uploaded. Either a number * (the changeset id) or a * {@class org.openstreetmap.josm.data.osm.Changeset} instance. * Default: creates a new changeset.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;chunkSize: number&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The size of an upload chunk, if the data is uploaded with the * upload strategy * {@class org.openstreetmap.josm.io.UploadStrategy}.CHUNKED_DATASET_STRATEGY.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;closeChangeset: boolean&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;If true, closes the changeset after the upload. Default: true&lt;/dd&gt; * &lt;/dl&gt; * * @example * var ds = new org.openstreetmap.josm.data.osm.DataSet(); * ds.wayBuilder.withNodes( * ds.nodeBuilder.withTags({name: 'node1'}).create(), * ds.nodeBuilder.withTags({name: 'node2'}.create() * ).withTags({name: 'way1'}).create(); * var api = require(\"josm/api\").Api; * * // uploads the data in a new changeset in one chunk) * var processed = api.upload(ds, \"just testing\"); * * @param {org.openstreetmap.josm.data.osm.DataSet| * org.openstreetmap.josm.data.APIDataSet|array|java.util.Collection} data the data to upload * @param {string} comment the upload comment * @param {object} [options] various options (see above) * @static * @returns {java.util.Collection} * @summary Uploads objects * @memberof module:josm/api~Api */ exports.Api.upload = function(data, comment, options) { var UploadStrategy = org.openstreetmap.josm.io.UploadStrategy; var Changeset = org.openstreetmap.josm.data.osm.Changeset; var APIDataSet = org.openstreetmap.josm.data.APIDataSet; var DataSet = org.openstreetmap.josm.data.osm.DataSet; var UploadStrategySpecification = org.openstreetmap.josm.io.UploadStrategySpecification; var Collection = java.util.Collection; var OsmServerWriter = org.openstreetmap.josm.io.OsmServerWriter; comment = comment || \"\"; comment = String(comment); util.assertSomething(data, \"data: must not be null or undefined\"); options = options || {}; util.assert(typeof options === \"object\", \"options: expected an object with named arguments, got {0}\", options); function normalizeChunkSize(size) { util.assert(util.isNumber(size), \"chunksize: expected a number, got {0}\", size); util.assert(size &gt;= -1, \"chunksize: expected -1 or a number &gt; 0, got {0]\", size); return size; }; function normalizeChangeset(changeset) { if (util.isNothing(changeset)) { return new Changeset(); } else if (util.isNumber(changeset)) { util.assert(changeset &gt; 0, \"changeset: expected a changeset id &gt; 0, got {0}\", changeset); return new Changeset(changeset); } else if (changeset instanceof Changeset) { return changeset; } else { util.assert(false, \"changeset: unexpected value, got {0}\", changeset); } }; function uploadSpecFromOptions(options) { var strategy = options.strategy || UploadStrategy.DEFAULT_UPLOAD_STRATEGY; strategy = UploadStrategy.from(strategy); var chunkSize = options.chunkSize || UploadStrategySpecification.UNSPECIFIED_CHUNK_SIZE; chunkSize = normalizeChunkSize(chunkSize); var closeChangeset = util.isDef(options.closeChangeset) ? options.closeChangeset : true; closeChangeset = Boolean(closeChangeset); var spec = new UploadStrategySpecification(); spec.setStrategy(strategy); spec.setChunkSize(chunkSize); spec.setCloseChangesetAfterUpload(closeChangeset); return spec; }; var apiDataSet; if (data instanceof DataSet) { apiDataSet = new APIDataSet(data); } else if (data instanceof APIDataSet) { apiDataSet = data; } else if (util.isArray(data)) { apiDataSet = new APIDataSet(data); } else if (data instanceof Collection) { apiDataSet = new APIDataSet(data); } else { util.assert(false, \"data: unexpected type of value, got {0}\", data); }; if (apiDataSet.isEmpty()) return undefined; apiDataSet.adjustRelationUploadOrder(); var toUpload = apiDataSet.getPrimitives(); var changeset = options.changeset || new Changeset(); changeset = normalizeChangeset(changeset); changeset.put(\"comment\", comment); var spec = uploadSpecFromOptions(options); var writer = new OsmServerWriter(); writer.uploadOsm(spec, toUpload, changeset, null /* progress monitor */); if (spec.isCloseChangesetAfterUpload()) { exports.ChangesetApi.close(changeset); } return writer.getProcessedPrimitives(); }; /* -------------------------------------------------------------------------- */ /* ApiConfig */ /* -------------------------------------------------------------------------- */ /** * ApiConfig provides methods and properties for configuring API parameters. * * @property {object} ApiConfig * @name ApiConfig * @static */ Object.defineProperty(exports, \"ApiConfig\", { value: {}, writable: false, enumerable: true }); var DEFAULT_URL = \"http://api.openstreetmap.com/api/0.6\"; var URL = java.net.URL; /** * Get or set the API server URL. * * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;get&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies the currently configured server URL or undefinend, if no * server URL is configured.&lt;/dd&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;set&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Sets the current server URL. If null or undefined, removes the * current configuration. Accepts either a string or a {@class java.net.URL}. * Only accepts http or https URLs. * &lt;/dd&gt; * &lt;/dl&gt; * * @example * var conf = require(\"josm/api\").ApiConfig; * conf.serverUrl; // -&gt; the current server url * * // set a new API url * conf.serverUrl = \"http://api06.dev.openstreetmap.org\"; * * @static * @summary Get or set the API server URL. * @property {string} serverUrl * @name serverUrl */ Object.defineProperty(exports.ApiConfig, \"serverUrl\", { enumerable: true, get: function() { var url = Preferences.main().get(\"osm-server.url\", null); if (url == null) url = DEFAULT_URL; return url == null ? undefined: util.trim(url); }, set: function(value) { if (util.isNothing(value)) { Preferences.main().put(\"osm-server.url\", null); } else if (value instanceof URL) { util.assert(value.getProtocol() == \"http\" || value.getProtocol() == \"https\", \"url: expected a http or https URL, got {0}\", value); Preferences.main().put(\"osm-server.url\", value.toString()); } else if (util.isString(value)) { value = util.trim(value); try { var url = new URL(value); util.assert(url.getProtocol() == \"http\" || url.getProtocol() == \"https\", \"url: expected a http or https URL, got {0}\", url.toString()); Preferences.main().put(\"osm-server.url\", url.toString()); } catch(e) { util.assert(false, \"url: doesn''t look like a valid URL, got {0}. Error: {1}\", value, e); } } else { util.assert(false, \"Unexpected type of value, got {0}\", value); } } }); /** * Get the default server URL. * * @example * var conf = require(\"josm/api\").ApiConfig; * conf.defaultServerUrl; // -&gt; the default server url * * @static * @summary Get the default server URL * @name defaultServerUrl * @property {string} defaultServerUrl the default server URL * @readOnly */ Object.defineProperty(exports.ApiConfig, \"defaultServerUrl\", { value: DEFAULT_URL, writable: false, enumerable: true }); function normalizeAuthMethod(authMethod) { util.assert(util.isString(authMethod), \"authMethod: expected a string, got {0}\", authMethod); authMethod = util.trim(authMethod).toLowerCase(); util.assert(authMethod == \"basic\" || authMethod == \"oauth\", \"Unsupported value for authMethod, got {0}\", authMethod); return authMethod; }; /** * Get or set the authentication method. * * JOSM uses two authentication methods: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;basic&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Basic authentication with a username and a password&lt;/dd&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;oauth&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Authentication with the &lt;a href=\"http://oauth.net/\"&gt;OAuth&lt;/a&gt; * protocol.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var conf = require(\"josm/api\").ApiConfig; * conf.authMethod; // -&gt; the current authentication method * * // set OAuth as authentication method * conf.authMethod = \"oauth\"; * * @static * @summary Get or set the authentication method. * @type string * @name authMethod * @property {string} authMethod the authentication method */ Object.defineProperty(exports.ApiConfig, \"authMethod\", { enumerate: true, get: function() { var authMethod = Preferences.main().get(\"osm-server.auth-method\", \"basic\"); authMethod = util.trim(authMethod).toLowerCase(); if (authMethod == \"basic\" || authMethod == \"oauth\") return authMethod; // unsupported value for authMethod in the preferences. Returning // \"basic\" as default. return \"basic\"; }, set: function(value) { value = normalizeAuthMethod(value); Preferences.main().put(\"osm-server.auth-method\", value); } }); /** * Gets the credentials, i.e. username and password for the basic * authentication method. * * &lt;strong&gt;Named options&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;host:string&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The host name of the API server for which credentials are retrieved. * If missing, the host name of the currently configured OSM API server * is used.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var conf = require(\"josm/api\").ApiConfig; * * // get username/password for the current OSM API server * var credentials = conf.getCredentials(\"basic\"); * * @param {string} authMethod the authentication method. Either &lt;code&gt;basic&lt;/code&gt; or &lt;code&gt;oauth&lt;/code&gt; * @param {object} options (optional) additional options (see above) * @static * @summary Gets the credentials. * @returns {object} the credentials * @name getCredentials * @function */ exports.ApiConfig.getCredentials = function(authMethod, options) { var CredentialsManager = org.openstreetmap.josm.io.auth.CredentialsManager; var OsmApi = org.openstreetmap.josm.io.OsmApi; var RequestorType = java.net.Authenticator.RequestorType; options = options || {}; util.assert(typeof options === \"object\", \"options: expected an object with named options, got {0}\", options); function getBasicCredentials() { var cm = CredentialsManager.getInstance(); if (options.host) options.host = util.trim(String(options.host)); var host = options.host ? options.host : OsmApi.getOsmApi().getHost(); var pa = cm.lookup(RequestorType.SERVER, host); return pa ? {host: host, user: pa.getUserName(), password: java.lang.String.valueOf(pa.getPassword())} : {host: host, user: undefined, password: undefined}; }; function getOAuthCredentials() { var cm = CredentialsManager.getInstance(); var token = cm.lookupOAuthAccessToken(); if (token == null) return undefined; return {key: token.getKey(), secret: token.getSecret()}; }; authMethod = normalizeAuthMethod(authMethod); if (authMethod == \"basic\") return getBasicCredentials(); if (authMethod == \"oauth\") return getOAuthCredentials(); util.assert(false, \"Unsupported authentication method, got {0}\", authMethod); }; function normalizeBasicCredentials(credentials) { var PasswordAuthentication = java.net.PasswordAuthentication; if (util.isNothing(credentials)) return null; util.assert(credentials instanceof PasswordAuthentication || typeof credentials === \"object\", \"basic credentials: expected an object or an instance of \" +\"PasswordAuthentication , got {0}\", credentials); if (credentials instanceof PasswordAuthentication) { return credentials; } else { var user = String(credentials.user || \"\"); var password = credentials.password || null; password = password ? new java.lang.String(password).toCharArray() : password; return new PasswordAuthentication(user, password); } }; function normalizeOAuthCredentials(credentials) { var OAuthToken = org.openstreetmap.josm.data.oauth.OAuthToken; if (util.isNothing(credentials)) return null; util.assert(credentials instanceof OAuthToken || typeof credentials === \"object\", \"oauth credentials: expected an object or an instance of OAuthToken, \" + \"got {0}\", credentials); if (credentials instanceof OAuthToken) { return credentials; } else { var key = String(credentials.key || \"\"); var secret = String(credentials.secret || \"\"); return new OAuthToken(key,secret); } } /** * Set the credentials, i.e. username and password for the basic * authentication method. * * Basic authentication credentials are either an instance of * java.net.PasswordAuthentication or * an object &lt;code&gt;{user: string, password: string}&lt;/code&gt;. * * OAuth authentication credentials are either an instance of * {@class org.openstreetmap.josm.data.oauth.OAuthToken} or * an object &lt;code&gt;{key: string, secret: string}&lt;/code&gt;. * &lt;strong&gt;Named options&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;host:string&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The host name of the API server for which credentials are set. * If missing, the host name of the currently configured OSM API server * is used.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var conf = require(\"josm/api\").ApiConfig; * * // set the credentials * conf.setCredentials(\"basic\", {user:\"test\", password:\"apassword\"}); * * @param {string} authMethod the authentication method. Either \"basic\" or * \"oauth\". * @param {(object|org.openstreetmap.josm.data.oauth.OAuthToken|java.net.PasswordAuthentication)} * credentials the credentials. * @param {object} options (optional) additional options (see above) * @function * @static * @summary Set the credentials. * @returns {object} the credentials * @name setCredentials */ exports.ApiConfig.setCredentials = function(authMethod, credentials, options) { var CredentialsManager = org.openstreetmap.josm.io.auth.CredentialsManager; var RequestorType = java.net.Authenticator.RequestorType; var OsmApi = org.openstreetmap.josm.io.OsmApi; var out = java.lang.System.out; options = options || {}; util.assert(typeof options === \"object\", \"options: expected an object with named options, got {0}\", options); authMethod = normalizeAuthMethod(authMethod); if (authMethod == \"basic\") { credentials = normalizeBasicCredentials(credentials); util.assert(credentials != null, \"credentials: can''t store null credentials\"); var host = options.host ? String(options.host) : null; host = host ? host : OsmApi.getOsmApi().getHost(); var cm = CredentialsManager.getInstance(); cm.store(RequestorType.SERVER, host, credentials); } else if (authMethod == \"oauth\") { credentials = normalizeOAuthCredentials(credentials); util.assert(credentials != null, \"credentials: can''t store null credentials\"); var cm = CredentialsManager.getInstance(); cm.storeOAuthAccessToken(credentials); } else { util.assert(false, \"Unsupported authentication method, got {0}\", authMethod); } }; Ã— Search results Close "},"josm_builder.js.html":{"id":"josm_builder.js.html","title":"Source: josm/builder.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/builder.js /** * Collection of builders for creating OSM nodes, ways and relations. * * @module josm/builder */ // -- imports var Node = org.openstreetmap.josm.data.osm.Node; var Way = org.openstreetmap.josm.data.osm.Way; var Relation = org.openstreetmap.josm.data.osm.Relation; var RelationMember = org.openstreetmap.josm.data.osm.RelationMember; var DataSet = org.openstreetmap.josm.data.osm.DataSet; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; var OsmPrimitive = org.openstreetmap.josm.data.osm.OsmPrimitive; var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; var LatLon = org.openstreetmap.josm.data.coor.LatLon; var List = java.util.List; var util = require(\"josm/util\"); function assertGlobalId(id) { util.assertSomething(id, \"Expected a defined, non-null object id, got {0}\", id); util.assertNumber(id, \"Expected a number as object id, got {0}\", id); util.assert(id &gt; 0, \"Expected a positive id, got {0}\", id); }; function rememberId(builder, id, version){ assertGlobalId(id); builder.id = id; version = util.isDef(version) ? version: 1; util.assertNumber(version, \"Expected a number for 'version', got {0}\", version); util.assert(version &gt; 0, \"Expected a positive number for 'version', got {0}\", version); builder.version = version; }; function rememberTags(builder, tags) { if (util.isNothing(tags)) return; util.assert(typeof tags === \"object\", \"Expected a hash with tags, got {0}\", tags); builder.tags = builder.tags || {}; for (var name in tags) { if (! tags.hasOwnProperty(name)) break; var value = tags[name]; name = util.trim(name); if (util.isNothing(value)) break; value = value + \"\"; // convert to string builder.tags[name] = value; } } function assignTags(primitive, tags) { for (var name in tags) { if (!tags.hasOwnProperty(name)) continue; var value = tags[name]; if (util.isNothing(value)) continue; value = value + \"\"; primitive.put(name, value); } }; function rememberIdFromObject(builder, args) { if (! args.hasOwnProperty(\"id\")) return; var o = args[\"id\"]; util.assert(util.isSomething(o), \"''{0}'': must not be null or undefined\", \"id\"); util.assert(util.isNumber(o), \"''{0}'': expected a number, got {1}\", \"id\", o); util.assert(o &gt; 0, \"''{0}'': expected a number &gt; 0, got {1}\", \"id\", o); builder.id = o; } function rememberVersionFromObject(builder, args) { if (!args.hasOwnProperty(\"version\")) return; var o = args[\"version\"]; util.assert(util.isSomething(o), \"''{0}'': must not be null or undefined\", \"version\"); util.assert(util.isNumber(o), \"''{0}'': expected a number, got {1}\", \"version\", o); util.assert(o &gt; 0, \"''{0}'': expected a number &gt; 0, got {1}\", \"version\", o); builder.version = o; } function rememberPosFromObject(builder, args) { if (args.hasOwnProperty(\"pos\")) { util.assert(! (args.hasOwnProperty(\"lat\") || args.hasOwnProperty(\"lon\")), \"Can''t process both properties ''pos'' and ''lat''/''lon''\"); var pos = args[\"pos\"]; util.assert(util.isSomething(pos), \"''{0}'': must not be null or undefined\", \"pos\"); if (pos instanceof LatLon) { builder.lat = pos.lat(); builder.lon = pos.lon(); } else if (util.isArray(pos)) { util.assert(pos.length == 2, \"''{0}'': expected exactly two numbers in array\", \"pos\"); try { builder.lat = checkLat(pos[0]); } catch(e) { util.assert(false, \"''{0}'': {1}\", \"lat\", e); } try { builder.lon = checkLon(pos[1]); } catch(e) { util.assert(false, \"''{0}'': {1}\", \"lon\", e); } } else if (util.isObject(pos)) { util.assert(pos.hasOwnProperty(\"lat\"), \"''{0}'': missing mandatory property ''lat''\", \"pos\"); util.assert(pos.hasOwnProperty(\"lon\"), \"''{0}'': missing mandatory property ''lon''\", \"pos\"); try { builder.lat = checkLat(pos[\"lat\"]); } catch(e) { util.assert(false, \"''{0}'': {1}\", \"pos\", e); } try { builder.lon = checkLon(pos[\"lon\"]); } catch(e) { util.assert(false, \"''{0}'': {1}\", \"pos\", e); } } } if (args.hasOwnProperty(\"lat\")) { var o = args[\"lat\"]; util.assert(util.isSomething(o), \"''{0}'': must not be null or undefined\", \"lat\"); util.assert(util.isNumber(o), \"''{0}'': expected a number, got {1}\", \"lat\", o); util.assert(LatLon.isValidLat(o), \"''{0}'': expected a valid latitude, got {1}\", \"lat\", o); builder.lat = o; } if (args.hasOwnProperty(\"lon\")) { var o = args[\"lon\"]; util.assert(util.isSomething(o), \"''{0}'': must not be null or undefined\", \"lon\"); util.assert(util.isNumber(o), \"''{0}'': expected a number, got {1}\", \"lon\", o); util.assert(LatLon.isValidLon(o), \"''{0}'': expected a valid longitude, got {1}\", \"lon\", o); builder.lon = o; } } function rememberTagsFromObject(builder, args) { if (! args.hasOwnProperty(\"tags\")) return; var o = args[\"tags\"]; if (util.isNothing(o)) return; rememberTags(builder, o); } // ---------------------------------------------------------------------------- // NodeBuilder //----------------------------------------------------------------------------- (function() { // start submodul NodeBuilder /** * Creates a new node builder. * * NodeBuilder helps to create OSM nodes. * * Methods of NodeBuilder can be used in a static and in an instance context. * It isn't necessary to create an instance of NodeBuilder, unless it is * configured with a {@class org.openstreetmap.josm.data.osm.DataSet}, * which created nodes are added to. * * @example * var NodeBuilder = require(\"josm/builder\").NodeBuilder; * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * * var ds = new DataSet(); * // create a node builder without and underlying dataset ... * var nbuilder = new NodeBuilder(); * // ... with an underlying dataset .... * nbuilder = new NodeBuilder(ds); * // ... or using this factory method * nbuilder = NodeBuilder.forDataSet(ds); * * // create a new local node at position (0,0) without tags * var n1 = nbuilder.create(); * * // create a new global node at a specific position with tags * var n2 = nbuilder.withPosition(1,1).withTags({name: 'test'}).create(123456); * * // create a new proxy for a global node * // (an \"incomplete\" node in JOSM terminology) * var n3 = nbuilder.createProxy(123456); * * @class * @name NodeBuilder * @param {org.openstreetmap.josm.data.osm.DataSet} [ds] the dataset * which created objects are added to */ exports.NodeBuilder = function(ds) { if (util.isSomething(ds)) { util.assert(ds instanceof DataSet, \"Expected a JOSM dataset, got {0}\", ds); this.ds = ds; } }; /** * Creates or configures a NodeBuilder which will add created nodes * to the dataset &lt;code&gt;ds&lt;/code&gt;. * * @example * var builder = require(\"josm/builder\"); * * // create a new node builder building to a data set * var ds = new org.openstreetmap.josm.data.osm.DataSet(); * var nb = builder.NodeBuilder.forDataSet(ds); * * // configure an existing node builder * var nb = new builder.NodeBuilder(); * nb = nb.forDataSet(ds); * * @returns {module:josm/builder.NodeBuilder} the node builder * @param {org.openstreetmap.josm.data.osm.DataSet} ds the dataset which * created objects are added to * @summary Creates a new NodeBuilder for a specific * {@class org.openstreetmap.josm.data.osm.DataSet}. * @function * @memberof module:josm/builder~NodeBuilder */ exports.NodeBuilder.prototype.forDataSet = exports.NodeBuilder.forDataSet = function (ds) { var builder = receiver(this); util.assert(util.isSomething(ds), \"Expected a non-null defined object, got {0}\", ds); util.assert(ds instanceof DataSet, \"Expected a JOSM dataset, got {0}\", ds); builder.ds = ds; return builder; }; function receiver(that) { return typeof that === \"object\" ? that : new exports.NodeBuilder(); } function checkLat(value) { if (! util.isSomething(value)) throw \"lat must not be null or undefined\"; if (! util.isNumber(value)) throw \"lat must be a number\"; if (! LatLon.isValidLat(value)) throw \"lat must be a valid latitude\"; return value; } function checkLon(value) { if (! util.isSomething(value)) throw \"lon must not be null or undefined\"; if (! util.isNumber(value)) throw \"lon must be a number\"; if (! LatLon.isValidLon(value)) throw \"lon must be a valid longitude\"; return value; } function initFromObject(builder, args) { rememberIdFromObject(builder, args); rememberVersionFromObject(builder,args); rememberPosFromObject(builder, args); rememberTagsFromObject(builder, args); } /** * Creates a new {@class org.openstreetmap.josm.data.osm.Node}. * * Can be used in an instance or in a static context.. * * &lt;strong&gt;Optional named arguments in the parameters &lt;code&gt;args&lt;/code&gt; * &lt;/strong&gt; * &lt;ul&gt; * &lt;li&gt;&lt;code&gt;version&lt;/code&gt; - the version of a global node (number &gt; 0)&lt;/li&gt; * &lt;li&gt;&lt;code&gt;lat&lt;/code&gt; - a valide latitude (number in the range * [-90,90])&lt;/li&gt; * &lt;li&gt;&lt;code&gt;lon&lt;/code&gt; - a valide longitude (number in the range * [-180,180])&lt;/li&gt; * &lt;li&gt;&lt;code&gt;pos&lt;/code&gt; - either an array &lt;code&gt;[lat,lon]&lt;/code&gt;, * an object &lt;code&gt;{lat: ..., lon: ...}&lt;/code&gt;, * or an instance of {@class org.openstreetmap.josm.data.coor.LatLon}&lt;/li&gt; * &lt;li&gt;&lt;code&gt;tags&lt;/code&gt; - an object with tags. Null values and undefined * values are ignored. Any other value is converted to a string. * Leading and trailing white space in keys is removed.&lt;/li&gt; * &lt;/ul&gt; * * * @example * var nb = require(\"josm/builder\").NodeBuilder * // create a new local node at position [0,0] * var n1 = nb.create(); * * // create a new global node at position [0,0] * var n2 = nb.create(12345); * * // create a new global way with version 3 at a specific position * // and with some tags * var n3 = nb.create(12345, {version: 3, lat: 23.45, * lon: 87.23, tags: {amenity: \"restaurant\"} * }); * * @param {number} [id] a global node id. If missing and * not set before using &lt;code&gt;withId(..)&lt;/code&gt;, creates a new local id. * @param {object} [options] additional options for creating the node * @returns {org.openstreetmap.josm.data.osm.Node} the created node * @summary Creates a new {@class org.openstreetmap.josm.data.osm.Node} * @function * @name create * @memberof module:josm/builder~NodeBuilder */ exports.NodeBuilder.create = exports.NodeBuilder.prototype.create = function () { var builder = receiver(this); var arg; switch(arguments.length){ case 0: break; case 1: arg = arguments[0]; util.assert(util.isSomething(arg), \"Argument 0: must not be null or undefined\"); if (util.isNumber(arg)) { util.assert(arg &gt; 0, \"Argument 0: expected an id &gt; 0, got {0}\", arg); builder.id = arg; } else if (typeof arg == \"object\") { initFromObject(builder, arg); } else { util.assert(false, \"Argument 0: unexpected type, got ''{0}''\", arg); } break; case 2: arg = arguments[0]; util.assert(util.isSomething(arg), \"Argument 0: must not be null or undefined\"); util.assert(util.isNumber(arg), \"Argument 0: must be a number\"); util.assert(arg &gt; 0, \"Expected an id &gt; 0, got {0}\", arg); builder.id = arg; arg = arguments[1]; if (util.isSomething(arg)) { util.assert(typeof arg === \"object\", \"Argument 1: must be an object\"); initFromObject(builder, arg); } break; default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } var node; if (util.isNumber(builder.id)) { if (util.isNumber(builder.version)){ node = new Node(builder.id, builder.version); } else { node = new Node(builder.id, 1); } var coor = new LatLon(builder.lat || 0, builder.lon || 0); node.setCoor(coor); } else { node = new Node(new LatLon(builder.lat || 0, builder.lon || 0)); } assignTags(node, builder.tags || {}); if (builder.ds) { if (builder.ds.getPrimitiveById(node) == null) { builder.ds.addPrimitive(node); } else { throw new Error( \"Failed to add primitive, primitive already included \" + \"in dataset. \\n\" + \"primitive=\" + node ); } } return node; }; /** * Creates a new &lt;em&gt;proxy&lt;/em&gt; * {@class org.openstreetmap.josm.data.osm.Node}. A proxy node is a node, * for which we only know its global id. In order to know more details * (position, tags, etc.), we would have to download it from the OSM server. * * * The method can be used in a static and in an instance context. * * @example * var nbuilder = require(\"josm/builder\").NodeBuilder; * * // a new proxy node for the global node with id 12345 * var n1 = nbuilder.createProxy(12345); * * @param {number} id the node id (not null, number &gt; 0 expected) * @return {org.openstreetmap.josm.data.osm.Node} the new proxy node * @summary Creates a new &lt;em&gt;proxy&lt;/em&gt; {@class org.openstreetmap.josm.data.osm.Node} * @function * @name createProxy * @memberof module:josm/builder~NodeBuilder */ exports.NodeBuilder.prototype.createProxy = exports.NodeBuilder.createProxy = function createProxy(id) { var builder = receiver(this); util.assert(util.isSomething(id), \"Argument 0: must not be null or undefined\"); util.assert(util.isNumber(id), \"Argument 0: expected a number, got {0}\", id); util.assert(id &gt; 0, \"Argument 0: id &gt; 0 expected, got {0}\", id); var node = new Node(id); if (builder.ds) builder.ds.addPrimitive(node); return node; }; /** * Declares the node position. * * The method can be used in a static and in an instance context. * * @example * var nbuilder = require(\"josm/builder\").NodeBuilder; * * // a new global node with the global id 12345 at position (34,45) * var n1 = nbuilder.withPosition(34,45).create(12345); * * // a new local node at position (23.2, 87.33) * var n2 = nbuilder.withPosition(23.3,87.33).create(); * * @param {Number} lat the latitude. A number in the range [-90..90]. * @param {Number} lon the longitude. A number in the range [-180..180]. * @returns {module:josm/builder~NodeBuilder} a node builder (for method chaining) * @summary Declares the node position. * @function * @memberof module:josm/builder~NodeBuilder * @name withPosition */ exports.NodeBuilder.prototype.withPosition = exports.NodeBuilder.withPosition = function (lat, lon){ var builder = receiver(this); util.assert(util.isNumber(lat), \"Expected a number for lat, got {0}\", lat); util.assert(util.isNumber(lon), \"Expected a number for lon, got {0}\", lon); util.assert(LatLon.isValidLat(lat), \"Invalid lat, got {0}\", lat); util.assert(LatLon.isValidLon(lon), \"Invalid lon, got {0}\", lon); builder.lat = lat; builder.lon = lon; return builder; }; /** * Declares the tags to be assigned to the new node. * * The method can be used in a static and in an instance context. * * @example * var nbuilder = require(\"josm/builder\").NodeBuilder; * // a new global node with the global id 12345 and tags name=test and * // highway=road * var n1 = nbuilder.withTags({\"name\":\"test\", \"highway\":\"road\"}).global(12345); * * // a new local node tags name=test and highway=road * var tags = { * \"name\" : \"test\", * \"highway\" : \"road\" * }; * var n2 = nbuilder.withTags(tags).local(); * * @param {object} [tags] the tags * @returns {module:josm/builder~NodeBuilder} the node builder (for method chaining) * @summary Declares the node tags. * @function * @memberof module:josm/builder~NodeBuilder * @name withTags */ exports.NodeBuilder.prototype.withTags = exports.NodeBuilder.withTags = function (tags) { var builder = typeof this === \"object\" ? this : new exports.NodeBuilder(); rememberTags(builder, tags); return builder; }; /** * Declares the global node id and the global node version. * * The method can be used in a static and in an instance context. * * @param {number} id (mandatory) the global node id. A number &gt; 0. * @param {number} version (optional) the global node version. If present, * a number &gt; 0. If missing, * the version 1 is assumed. * @returns {module:josm/builder~NodeBuilder} the node builder (for method chaining) * @summary Declares the node id and version. * @function * @memberof module:josm/builder~NodeBuilder * @name withId */ exports.NodeBuilder.prototype.withId = exports.NodeBuilder.withId = function withId(id, version) { var builder = typeof this === \"object\" ? this : new exports.NodeBuilder(); rememberId(builder, id, version); return builder; }; }()); // end submodul NodeBuilder //----------------------------------------------------------------------------- // WayBuilder //----------------------------------------------------------------------------- (function(){ // start submodul WayBuilder var receiver = function(that) { return typeof that === \"object\" ? that : new exports.WayBuilder(); }; /** * Creates a new builder for OSM ways * * WayBuilder helps to create OSM * {@class org.openstreetmap.josm.data.osm.Way}s. * * Methods of WayBuilder can be used in a static and in an instance context. * It isn't necessary to create an instance of WayBuilder, unless it is * configured with a {@class org.openstreetmap.josm.data.osm.DataSet}, * which created ways are added to. * @example * var WayBuilder = require(\"josm/builder\").WayBuilder; * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * * var ds = new DataSet(); * // create a way builder without and underlying dataset ... * var wbuilder = new WayBuilder(); * // ... with an underlying dataset .... * wbuilder = new WayBuilder(ds); * // ... or using this factory method * wbuilder = WayBuilder.forDataSet(ds); * * // create a new local way * var w1 = wbuilder.create(); * * // create a new global way * var w2 = wbuilder.withTags({highway: 'residential'}).create(123456); * * // create a new proxy for a global way * // (an \"incomplete\" node in JOSM terminology) * var w3 = wbuilder.createProxy(123456); * * @class * @param {org.openstreetmap.josm.data.osm.DataSet} [ds] a JOSM * dataset which created ways are added to. If missing, the created ways * aren't added to a dataset. * @name WayBuilder */ exports.WayBuilder = function(ds) { if (util.isSomething(ds)) { util.assert(ds instanceof DataSet, \"Expected a DataSet, got {0}\", ds); this.ds = ds; } this.nodes = []; }; /** * Creates or configures a WayBuilder which will add created nodes * to the dataset &lt;code&gt;ds&lt;/code&gt;. * * @example * var builder = require(\"josm/builder\"); * * // create a new way builder building to a data set * var ds = new org.openstreetmap.josm.data.osm.DataSet(); * var wb = builder.WayBuilder.forDataSet(ds); * * // configure an existing way builder * var wb = new builder.WayBuilder(); * nb = wb.forDataSet(ds); * * @return {module:josm/builder~WayBuilder} the way builder * @param {org.openstreetmap.josm.data.osm.DataSet} ds the dataset which * created objects are added to * @summary Creates a new WayBuilder with an underlying dataset. * @function * @name forDataSet * @memberof module:josm/builder~WayBuilder * @name forDataSet */ exports.WayBuilder.prototype.forDataSet = exports.WayBuilder.forDataSet = function (ds) { var builder = receiver(this); util.assert(util.isSomething(ds), \"Expected a non-null defined object, got {0}\", ds); util.assert(ds instanceof DataSet, \"Expected a JOSM dataset, got {0}\", ds); builder.ds = ds; return builder; }; /** * Declares the global way id and the global way version. * * The method can be used in a static and in an instance context. * * @example * var wbuilder = require(\"josm/builder\").WayBuilder; * // creates a global way with id 12345 an version 12 * var w = wbuilder.withId(12345, 12).create(); * * @param {number} id (mandatory) the global way id. A number &gt; 0. * @param {number} [version] the global way version. If present, * a number &gt; 0. If missing, the version 1 is assumed. * @return {module:josm/builder~WayBuilder} the way builder (for method chaining) * @summary Declares the global way id and the global way version. * @function * @memberof module:josm/builder~WayBuilder * @name withId */ exports.WayBuilder.prototype.withId = exports.WayBuilder.withId = function (id, version) { var builder = receiver(this); rememberId(builder, id, version); return builder; }; /** * Declares the tags to be assigned to the new way. * * The method can be used in a static and in an instance context. * * @example * var wbuilder = require(\"josm/builder\").WayBuilder; * // a new global way with the global id 12345 and tags name=\"Laubeggstrasse\" * // and highway=residential * var n1 = wbuilder.withTags({name:\"Laubeggstrasse\", highway:\"residential\"}) * .create(12345); * * // a new local node tags name=test and highway=road * var tags = { * name : \"Laubeggstrasse\", * highway : \"residential\" * }; * var n2 = wbuilder.withTags(tags).create(); * * @param {object} [tags] the tags * @return {module:josm/builder~WayBuilder} the way builder (for method chaining) * @summary Declares the tags to be assigned to the new way. * @function * @memberof module:josm/builder~WayBuilder * @name withTags */ exports.WayBuilder.prototype.withTags = exports.WayBuilder.withTags = function (tags) { var builder = receiver(this); rememberTags(builder, tags); return builder; }; /** * Declares the nodes of the way. * * Accepts either a vararg list of * {@class org.openstreetmap.josm.data.osm.Node}, * an array of {@class org.openstreetmap.josm.data.osm.Node}s or a Java list * of {@class org.openstreetmap.josm.data.osm.Node}s. At least &lt;strong&gt;two * non-identical nodes&lt;/strong&gt; have to be supplied. * The same node can occure more than once in the list, but a consecutive * sequence of the same node is collapsed to one node. * * * The method can be used in a static and in an instance context. * * @example * var wbuilder = require(\"josm/builder\").WayBuilder; * var nbuilder = require(\"josm/builder\").NodeBuilder; * // creates a new local way with two local nodes * var way = builder.withNodes( * nbuilder.create(), nbuilder.create() * ).create(); * * @param nodes the list of nodes. See description and examples. * @return {module:josm/builder~WayBuilder} the way builder (for method chaining) * @summary Declares the nodes of the way. * @function * @memberof module:josm/builder~WayBuilder * @name withNodes */ exports.WayBuilder.withNodes = exports.WayBuilder.prototype.withNodes = function () { var builder = receiver(this); var nodes; switch(arguments.length) { case 0: return builder; case 1: nodes = arguments[0]; if (util.isNothing(nodes)) return builder; if (nodes instanceof Node) { nodes = [nodes]; } else if (util.isArray(nodes)) { // OK } else if (nodes instanceof List) { var temp = []; for(var it = nodes.iterator(); it.hasNext();) temp.push(it.next()); nodes = temp; } else { util.assert(false, \"Argument 0: expected a Node or a list of nodes, got {0}\", nodes); } break; default: nodes = Array.prototype.slice.call(arguments,0); break; } var newnodes = []; var last; for (var i=0; i &lt; nodes.length; i++) { var n = nodes[i]; if (util.isNothing(n)) continue; util.assert(n instanceof Node, \"Expected instances of Node only, got {0} at index {1}\", n, i); // skip sequence of identical nodes if (last &amp;&amp; last.id == n.id) continue; newnodes.push(n); last = n; } builder.nodes = newnodes; return builder; }; /** * Creates a new &lt;em&gt;proxy&lt;/em&gt; way. A proxy way is a way, for which we * only know its global id. In order to know more details (nodes, tags, etc.), * we would have to download it from the OSM server. * * The method can be used in a static and in an instance context. * * @example * var wbuilder = require(\"josm/builder\").WayBuilder; * * // a new proxy way for the global way with id 12345 * var w1 = wbuilder.createProxy(12345); * * @return {org.openstreetmap.josm.data.osm.Way} the new proxy way * @summary Creates a new proxy way * @function * @memberof module:josm/builder~WayBuilder * @name createProxy */ exports.WayBuilder.createProxy = exports.WayBuilder.prototype.createProxy = function (id) { var builder = receiver(this); if (util.isDef(id)) { util.assert(util.isNumber(id) &amp;&amp; id &gt; 0, \"Expected a number &gt; 0, got {0}\", id); builder.id = id; } util.assert(util.isNumber(builder.id), \"way id is not a number. Use .createProxy(id) or \" + \".withId(id).createProxy()\"); util.assert(builder.id &gt; 0, \"Expected way id &gt; 0, got {0}\", builder.id); var way = new Way(builder.id); if (builder.ds) builder.ds.addPrimitive(way); return way; }; function assignWayAttributes(builder, way) { if (util.hasProperties(builder.tags)) { assignTags(way, builder.tags); } if (builder.nodes.length &gt; 0) { way.setNodes(builder.nodes); } }; function rememberNodesFromObject(builder, args) { if (!args.hasOwnProperty(\"nodes\")) return; var o = args[\"nodes\"]; if (! util.isSomething(o)) return; util.assert(util.isArray(o) || o instanceof List, \"Expected an array or an instance of java.util.List, got {0}\", o); builder.withNodes(o); } function initFromObject(builder, args) { rememberIdFromObject(builder, args); rememberVersionFromObject(builder,args); rememberTagsFromObject(builder, args); rememberNodesFromObject(builder, args); } /** * Creates a new way. * * Can be used in an instance or in a static context. * * Optional named arguments in the parameters &lt;code&gt;options&lt;/code&gt;: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;id&lt;/code&gt;:number&lt;/dt&gt; * &lt;dd&gt;the id of a global way (number &gt; 0)&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;version&lt;/code&gt;:number&lt;/dt&gt; * &lt;dd&gt;the version of a global way (number &gt; 0)&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;nodes&lt;/code&gt;:array|list&lt;/dt&gt; * &lt;dd&gt;an array or a list of nodes&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;tags&lt;/code&gt;:object&lt;/dt&gt; * &lt;dd&gt;an object with tags. Null values and undefined values are ignored. * Any other value is converted to a string. Leading and trailing white * space in keys is removed.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var wb = require(\"josm/builder\").WayBuilder * // create a new local way * var w1 = wb.create(); * * // create a new global way * var w2 = wb.create(12345); * * // create a new global way with version 3 at a specific position and with * // some tags * var w3 = wb.create(12345, { * version: 3, * tags: {amenity: \"restaurant\"}, * nodes: [n1,n2,n3] * }); * * @param {number} [id] a global way id. If missing and not set * before using &lt;code&gt;withId(..)&lt;/code&gt;, creates a new local id. * @param {object} [options] additional parameters for creating the way * @returns {org.openstreetmap.josm.data.osm.Way} the created way * @summary Creates a new way * @function * @memberof module:josm/builder~WayBuilder * @name create */ exports.WayBuilder.create = exports.WayBuilder.prototype.create = function create() { var builder = receiver(this); var arg; switch(arguments.length){ case 0: break; case 1: arg = arguments[0]; util.assert(util.isSomething(arg), \"Argument 0: must not be null or undefined\"); if (util.isNumber(arg)) { util.assert(arg &gt; 0, \"Argument 0: expected an id &gt; 0, got {0}\", arg); builder.id = arg; } else if (typeof arg == \"object\") { initFromObject(builder, arg); } else { util.assert(false, \"Argument 0: unexpected type, got ''{0}''\", arg); } break; case 2: arg = arguments[0]; util.assert(util.isSomething(arg), \"Argument 0: must not be null or undefined\"); util.assert(util.isNumber(arg), \"Argument 0: must be a number\"); util.assert(arg &gt; 0, \"Expected an id &gt; 0, got {0}\", arg); builder.id = arg; arg = arguments[1]; if (util.isSomething(arg)) { util.assert(typeof arg === \"object\", \"Argument 1: must be an object\"); initFromObject(builder, arg); } break; default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } var way; if (util.isNumber(builder.id)) { if (util.isNumber(builder.version)){ way = new Way(builder.id, builder.version); } else { way = new Way(builder.id, 1); } } else { way = new Way(0); // creates a new local way } assignTags(way, builder.tags || {}); if (builder.nodes &amp;&amp; builder.nodes.length &gt; 0) { way.setNodes(builder.nodes); } if (builder.ds) { if (builder.ds.getPrimitiveById(way) == null) { builder.ds.addPrimitive(way); } else { throw new Error( \"Failed to add primitive, primitive already included \" + \"in dataset. \\n\" + \"primitive=\" + way ); } } return way; }; }()); // end submodul WayBuilder //----------------------------------------------------------------------------- // RelationBuilder //----------------------------------------------------------------------------- (function() { // start submodul Relation Buildee var receiver = function(that) { return typeof that === \"object\" ? that : new exports.RelationBuilder(); }; /** * Creates a new builder for OSM relations * * RelationBuilder helps to create OSM * {@class org.openstreetmap.josm.data.osm.Relation}s. * * Methods of RelationBuilder can be used in a static and in an instance * context. * It isn't necessary to create an instance of RelationBuilder, unless it is * configured with a {@class org.openstreetmap.josm.data.osm.DataSet}, * which created ways are added to. * @example * var RelationBuilder = require(\"josm/builder\").RelationBuilder; * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * * var ds = new DataSet(); * // create a relation builder without and underlying dataset ... * var rbuilder = new RelationBuilder(); * // ... with an underlying dataset ... * rbuilder = new RelationBuilder(ds); * // ... or using this factory method * rbuilder = RelationBuilder.forDataSet(ds); * * // create a new local relation * var r1 = rbuilder.create(); * * // create a new global way * var r2 = rbuilder.withTags({route: 'bicycle'}).create(123456); * * // create a new proxy for a global relation * // (an \"incomplete\" node in JOSM terminology) * var r3 = rbuilder.createProxy(123456); * * @class * @param {org.openstreetmap.josm.data.osm.DataSet} ds (optional) a JOSM * dataset which created ways are added to. If missing, the created ways * aren't added to a dataset. * @name RelationBuilder */ exports.RelationBuilder = function(ds) { if (util.isSomething(ds)) { util.assert(ds instanceof DataSet, \"Expected a DataSet, got {0}\", ds); this.ds = ds; } this.members = []; }; /** * Creates or configures a RelationBuilder which will add created nodes * to the dataset &lt;code&gt;ds&lt;/code&gt;. * * @example * var builder = require(\"josm/builder\"); * * // create a new relation builder building to a data set * var ds = new org.openstreetmap.josm.data.osm.DataSet(); * var rb = builder.RelationBuilder.forDataSet(ds); * * // configure an existing relation builder * var wb = new builder.RelationBuilder(); * nb = wb.forDataSet(ds); * * @return {module:josm/builder.RelationBuilder} the relation builder * @summary Creates a new RelationBuilder which adds created relations to a * dataset * @param {org.openstreetmap.josm.data.osm.DataSet} ds a JOSM * dataset which created ways are added to. * @function * @name forDataSet * @memberof module:josm/builder~RelationBuilder */ exports.RelationBuilder.prototype.forDataSet = exports.RelationBuilder.forDataSet = function (ds) { var builder = receiver(this); util.assert(util.isSomething(ds), \"Expected a non-null defined object, got {0}\", ds); util.assert(ds instanceof DataSet, \"Expected a JOSM dataset, got {0}\", ds); builder.ds = ds; return builder; }; /** * Create a RelationMember * * &lt;dl&gt; * &lt;dt&gt;member(role, obj)&lt;/dt&gt; * &lt;dd&gt;Create a relation member with role &lt;var&gt;role&lt;/var&gt; and member object * &lt;var&gt;obj&lt;/var&gt;. &lt;var&gt;role&lt;/var&gt; can be null or undefined, obj must neither * be null nor undefinde. &lt;var&gt;role&lt;/var&gt; is a string, &lt;var&gt;obj&lt;/var&gt; is an * OSM node, a way, or a relation. * &lt;/dd&gt; * &lt;dt&gt;member(obj)&lt;/dt&gt; * &lt;dd&gt;Create a relation member for the member object &lt;var&gt;obj&lt;/var&gt;. * &lt;var&gt;obj&lt;/var&gt; must neither be null nor undefinde. &lt;var&gt;obj&lt;/var&gt; is an * OSM node, a way, or a relation. The created relation member has no role. * &lt;/dd&gt; * &lt;/dl&gt; * * @example * var member = require(\"josm/builder\").RelationBuilder.member; * var nb = require(\"josm/builder\").NodeBuilder; * * // create a new RelationMember with role 'house' for a new node * var m1 = member(\"house\", nb.create()); * // create a new RelationMember with an empty role for a new node * var m2 = member(nb.create()); * * @static * @returns {org.openstreetmap.josm.data.osm.RelationMember} the relation member * @summary Utility function - creates a relation member * @memberof module:josm/builder~RelationBuilder * @name member * @function * @param {string} [role] the member role * @param {primitive} primitive the member primitive */ exports.RelationBuilder.member = function () { function normalizeObj(obj) { util.assert(util.isSomething(obj), \"obj: must not be null or undefined\"); util.assert(obj instanceof OsmPrimitive, \"obj: expected an OsmPrimitive, got {0}\", obj); return obj; } function normalizeRole(role) { if (util.isNothing(role)) return null; util.assert(util.isString(role), \"role: expected a string, got {0}\", role); return role; } switch(arguments.length) { case 0: util.assert(false, \"Expected arguments (object) or (role, object), got 0 arguments\"); case 1: var obj = normalizeObj(arguments[0]); return new RelationMember(null /* no role */, obj); case 2: var role = normalizeRole(arguments[0]); var obj = normalizeObj(arguments[1]); return new RelationMember(role, obj); default: util.assert(false, \"Expected arguments (object) or (role, object), got {0} arguments\", arguments.length); } }; /** * Declares the global relation id and the global relation version. * * The method can be used in a static and in an instance context. * * @example * var rbuilder = require(\"josm/builder\").RelationBuilder; * // creates a global relation with id 12345 an version 12 * var r = rbuilder.withId(12345, 12).create(); * * @param {number} id (mandatory) the global relation id. A number &gt; 0. * @param {number} version (optional) the global relation version. If present, * a number &gt; 0. If missing, the version 1 is assumed. * @returns {module:josm/builder~RelationBuilder} the relation builder (for method chaining) * @summary Declares the relation id and version. * @memberof module:josm/builder~RelationBuilder * @name withId * @function * @instance */ exports.RelationBuilder.prototype.withId = exports.RelationBuilder.withId = function (id, version) { var builder = receiver(this); rememberId(builder, id, version); return builder; }; /** * Declares the tags to be assigned to the new relation. * * The method can be used in a static and in an instance context. * * @example * var rbuilder = require(\"josm/builder\").RelationBuilder; * // a new global relation with the global id 12345 and tags route=\"bicycle\" * //and name=\"n8\" * var r1 = rbuilder.withTags({name:\"n8\", route:\"bicycle\"}).create(12345); * * // a new local node tags name=test and highway=road * var tags = { * name : \"n8\", * route : \"bicycle\" * }; * var r2 = rbuilder.withTags(tags).create(); * * @param {object} [tags] the tags * @returns {module:josm/builder~RelationBuilder} a relation builder (for method chaining) * @summary Declares the tags to be assigned to the new relation. * @memberof module:josm/builder~RelationBuilder * @name withTags * @function * @instance */ exports.RelationBuilder.prototype.withTags = exports.RelationBuilder.withTags = function (tags) { var builder = receiver(this); rememberTags(builder, tags); return builder; }; /** * Creates a new &lt;em&gt;proxy&lt;/em&gt; relation. A proxy relation is a relation, * for which we only know its global id. In order to know more details * (members, tags, etc.), we would have to download it from the OSM server. * * * The method can be used in a static and in an instance context. * * @example * var rbuilder = require(\"josm/builder\").RelationBuilder; * * // a new proxy relation for the global way with id 12345 * var r1 = rbuilder.createProxy(12345); * * @returns {org.openstreetmap.josm.data.osm.Relation} the new proxy relation * @summary Creates a new &lt;em&gt;proxy&lt;/em&gt; relation. * @memberof module:josm/builder~RelationBuilder * @function * @name createProxy * @instance * @param {number} id the id for the proxy relation */ exports.RelationBuilder.createProxy = exports.RelationBuilder.prototype.createProxy = function (id) { var builder = receiver(this); if (util.isDef(id)) { util.assert(util.isNumber(id) &amp;&amp; id &gt; 0, \"Expected a number &gt; 0, got {0}\", id); builder.id = id; } util.assert(util.isNumber(builder.id), \"way id is not a number. Use .createProxy(id) or \" + \".withId(id).createProxy()\"); util.assert(builder.id &gt; 0, \"Expected id &gt; 0, got {0}\", builder.id); var relation = new Relation(builder.id); if (builder.ds) builder.ds.addPrimitive(relation); return relation; }; /** * Declares the members of a relation. * * Accepts either a vararg list of relation members, nodes, ways or * relations, an array of relation members, nodes ways or relations, or a * Java list of members, nodes, ways or relation. * * * The method can be used in a static and in an instance context. * * @example * var rbuilder = require(\"josm/builder\").RelationBuilder; * var nbuilder = require(\"josm/builder\").NodeBuilder; * var wbuilder = require(\"josm/builder\").WayBuilder; * var member = require(\"josm/builder\").RelationBuilder.member; * * var r1 = rbuilder.withMembers( * member(\"house\", nbuilder.create()), * member(\"house\", nbuilder.create()), * member(\"street\", wbuilder.create()) * ).create(); * * @param nodes the list of members. See description and examples. * @returns {module:josm/builder~RelationBuilder} the relation builder (for method chaining) * @summary Declares the members of a relation. * @memberof module:josm/builder~RelationBuilder * @function * @name withMembers * @instance */ exports.RelationBuilder.withMembers = exports.RelationBuilder.prototype.withMembers = function () { var builder = receiver(this); var members = []; function remember(obj) { if (util.isNothing(obj)) return; if (obj instanceof OsmPrimitive) { members.push(new RelationMember(null, obj)); } else if (obj instanceof RelationMember) { members.push(obj); } else if (util.isArray(obj)) { for(var i=0; i &lt; obj.length; i++) remember(obj[i]); } else if (obj instanceof List) { for(var it = obj.iterator(); it.hasNext();) remember(it.next()); } else { util.assert(false, \"Can''t add object ''{0}'' as relation member\", obj); } } for (var i=0; i &lt; arguments.length; i++){ remember(arguments[i]); } builder.members = members; return builder; }; function rememberMembersFromObject(builder, args) { if (!args.hasOwnProperty(\"members\")) return; var o = args[\"members\"]; if (! util.isSomething(o)) return; util.assert(util.isArray(o) || o instanceof List, \"members: Expected an array or an instance of java.util.List, got {0}\", o); builder.withMembers(o); }; function initFromObject(builder, args) { rememberIdFromObject(builder, args); rememberVersionFromObject(builder,args); rememberTagsFromObject(builder, args); rememberMembersFromObject(builder, args); }; /** * Creates a new relation. * * Can be used in an instance or in a static context. * * &lt;strong&gt;Optional named arguments in the parameters &lt;code&gt;args&lt;/code&gt; * &lt;/strong&gt; * &lt;ul&gt; * &lt;li&gt;&lt;var&gt;id&lt;/var&gt; - the id of a global relation (number &gt; 0)&lt;/li&gt; * &lt;li&gt;&lt;var&gt;version&lt;/var&gt; - the version of a global relation (number &gt; 0) * &lt;/li&gt; * &lt;li&gt;&lt;var&gt;members&lt;/var&gt; - an array or a list of relation members, nodes, * ways, or relation&lt;/li&gt; * &lt;li&gt;&lt;var&gt;tags&lt;/var&gt; - an object with tags. Null values and undefined * values are ignored. Any other value * is converted to a string. Leading and trailing white space in keys is * removed.&lt;/li&gt; * &lt;/ul&gt; * * * @example * var rb = require(\"josm/builder\").RelationBuilder * var nb = require(\"josm/builder\").NodeBuilder * var member = rb.member; * // create a new local relation * var r1 = rb.create(); * * // create a new global relation * var r2 = rb.create(12345); * * // create a new global relation with version 3 with some tags and two * // members * var r3 = rb.create(12345, { * version: 3, * tags: {type: \"route\"}, * members: [member('house', nb.create()), member(nb.create())] * }); * * @param {number} [id] a global way id. If missing and not set * before using &lt;code&gt;withId(..)&lt;/code&gt;, creates a new local id. * @param {object} [args] additional parameters for creating the relation * @returns {org.openstreetmap.josm.data.osm.Relation} the relation * @summary Creates a new relation. * @memberof module:josm/builder~RelationBuilder * @function * @name create * @instance */ exports.RelationBuilder.create = exports.RelationBuilder.prototype.create = function () { var builder = receiver(this); var arg; switch(arguments.length){ case 0: break; case 1: arg = arguments[0]; util.assert(util.isSomething(arg), \"Argument 0: must not be null or undefined\"); if (util.isNumber(arg)) { util.assert(arg &gt; 0, \"Argument 0: expected an id &gt; 0, got {0}\", arg); builder.id = arg; } else if (typeof arg == \"object\") { initFromObject(builder, arg); } else { util.assert(false, \"Argument 0: unexpected type, got ''{0}''\", arg); } break; case 2: arg = arguments[0]; util.assert(util.isSomething(arg), \"Argument 0: must not be null or undefined\"); util.assert(util.isNumber(arg), \"Argument 0: must be a number\"); util.assert(arg &gt; 0, \"Expected an id &gt; 0, got {0}\", arg); builder.id = arg; arg = arguments[1]; if (util.isSomething(arg)) { util.assert(typeof arg === \"object\", \"Argument 1: must be an object\"); initFromObject(builder, arg); } break; default: util.assert(false, \"Unexpected number of arguments, got {0}\", arguments.length); } var relation; if (util.isNumber(builder.id)) { if (util.isNumber(builder.version)){ relation = new Relation(builder.id, builder.version); } else { relation = new Relation(builder.id, 1); } } else { relation = new Relation(0); // creates a new local reÃ¶atopm } assignTags(relation, builder.tags || {}); if (builder.members &amp;&amp; builder.members.length &gt; 0) { relation.setMembers(builder.members); } if (builder.ds) { if (builder.ds.getPrimitiveById(relation) == null) { builder.ds.addPrimitive(relation); } else { throw new Error( \"Failed to add primitive, primitive already included \" + \"in dataset. \\n\" + \"primitive=\" + relation ); } } return relation; }; }()); // end submodul Relation Builder Ã— Search results Close "},"josm_command.js.html":{"id":"josm_command.js.html","title":"Source: josm/command.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/command.js /** * A collection of functions to create commands which can be applied, undone * and redone on * {@class org.opoenstreetmap.josm.gui.layer.OsmDataLayer}s. * * @module josm/command */ var util = require(\"josm/util\"); var layers = require(\"josm/layers\"); var OsmPrimitive = org.openstreetmap.josm.data.osm.OsmPrimitive; var OsmDataLayer = org.openstreetmap.josm.gui.layer.OsmDataLayer; var UndoRedoHandler = org.openstreetmap.josm.data.UndoRedoHandler; function checkAndFlatten(primitives) { var HashSet = java.util.HashSet; var ret = new HashSet(); function visit(value) { if (util.isNothing(value)) return; if (util.isCollection(value)) { util.each(value, visit); } else if (value instanceof OsmPrimitive) { ret.add(value); } else { util.assert(false, \"Unexpected object to add as OSM primitive, got {0}\", value); } }; visit(primitives); return ret; }; function applyTo(layer) { var OsmDataLayer = org.openstreetmap.josm.gui.layer.OsmDataLayer; util.assert(util.isSomething(layer), \"layer: must not be null or undefined\"); util.assert(layer instanceof OsmDataLayer, \"layer: expected OsmDataLayer, got {0}\", layer); layer.apply(this); }; function toArray(collection){ if (util.isArray(collection)) return collection; if (collection instanceof java.util.Collection) { var ret = []; for(var it=collection.iterator();it.hasNext();) ret.push(it.next()); return ret; } }; /** * A command to add a collection of objects to a data layer. * * @class * @param {java.util.Collection|array} objs the objects to add * @summary A command to add a collection of objects to a data layer */ exports.AddCommand = function (objs) { util.assert(objs, \"objs: mandatory parameter missing\"); this._objs = toArray(checkAndFlatten(objs)); }; /** * Applies the command to a layer. * * @function * @summary Applies the command to a layer. * @param {org.openstreetmap.josm.gui.layer.OsmDataLayer} layer the data layer * @instance * @memberof module:josm/command.AddCommand * @name applyTo */ exports.AddCommand.prototype.applyTo = applyTo; /** * Creates the internal JOSM command for this command * * @function * @summary Creates the internal JOSM command for this command * @param {org.openstreetmap.josm.gui.layer.OsmDataLayer} layer the data layer * @returns {org.openstreetmap.josm.command.Command} the command * @memberof module:josm/command.AddCommand * @name createJOSMCommand * @instance */ exports.AddCommand.prototype.createJOSMCommand = function(layer) { var OsmDataLayer = org.openstreetmap.josm.gui.layer.OsmDataLayer; var AddMultiCommand = org.openstreetmap.josm.plugins.scripting.js.api.AddMultiCommand; util.assert(util.isSomething(layer), \"layer: must not be null or undefined\"); util.assert(layer instanceof OsmDataLayer, \"layer: expected OsmDataLayer, got {0}\", layer); return new AddMultiCommand(layer, this._objs); }; /** * Creates a command to add a collection of objects to a data layer. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;add(primitive, primitive, ...)&lt;/code&gt; &lt;/dt&gt; * &lt;dd&gt;&lt;code&gt;primitive&lt;/code&gt; are {@class org.openstreetmap.josm.data.osm.Node}s, * {@class org.openstreetmap.josm.data.osm.Way}s, or * {@class org.openstreetmap.josm.data.osm.Relations}s. Or javascript array * or Java collections thereof.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var cmd = require(\"josm/command\"); * var layers = require(\"josm/layer\"); * var layer = layers.get(\"Data Layer 1\"); * * // add two nodes * cmd.add(n1,n1).applyTo(layer); * * // add an array of two nodes and a way * layer.apply( * cmd.add([n1,n2,w2]) * ); * * @function * @summary Creates a command to add a collection of objects * @param {...(primitive | primitive[] | java.lang.Collection )} primitives the primitives to add * @name add * @static * @returns {module:josm/command.AddCommand} the command object */ exports.add = function() { return new exports.AddCommand(checkAndFlatten(arguments)); }; /** * A command to delete a collection of objects in a data layer. * * @class * @param {java.util.Collection|array} objs the objects to add * @summary A command to delete a collection of objects in a data layer. */ exports.DeleteCommand = function (objs) { this._objs = checkAndFlatten(objs); }; /** * Applies the command to a layer. * * @function * @summary Applies the command to a layer. * @param {org.openstreetmap.josm.gui.layer.OsmDataLayer} layer the data layer * @memberof module:josm/command.DeleteCommand * @instance * @name applyTo */ exports.DeleteCommand.prototype.applyTo = applyTo; /** * Creates the internal JOSM command for this command * * @function * @summary Creates the internal JOSM command for this command * @param {org.openstreetmap.josm.gui.layer.OsmDataLayer} layer the data layer * @returns {org.openstreetmap.josm.command.Command} the command object * @instance * @name createJOSMCommand * @memberof module:josm/command.DeleteCommand */ exports.DeleteCommand.prototype.createJOSMCommand = function(layer) { var OsmDataLayer = org.openstreetmap.josm.gui.layer.OsmDataLayer; var DeleteCommand = org.openstreetmap.josm.command.DeleteCommand; util.assert(util.isSomething(layer), \"layer: must not be null or undefined\"); util.assert(layer instanceof OsmDataLayer, \"layer: expected OsmDataLayer, got {0}\", layer); return new DeleteCommand.delete(this._objs, true /* alsoDeleteNodesInWay */, true /* silent */); }; /** * Creates a command to delete a collection of objects in a data layer. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;delete(primitive, primitive,...)&lt;/code&gt; &lt;/dt&gt; * &lt;dd&gt;&lt;code&gt;primitive&lt;/code&gt; are {@class org.openstreetmap.josm.data.osm.Node}s, * {@class org.openstreetmap.josm.data.osm.Way}s, or * {@class org.openstreetmap.josm.data.osm.Relations}s. Or javascript array * or Java collections thereof.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var cmd = require(\"josm/command\"); * var layers= require(\"josm/layer\"); * var layer = layers.get(\"Data Layer 1\"); * * // delete two nodes * cmd.delete(n1,n1).applyTo(layer); * * // delete an array of two nodes and a way * layer.apply( * cmd.delete([n1,n2,w2]) * ); * * @function * @summary Creates a command to delete a collection of objects * @param {...(primitive | primitive[] | java.lang.Collection )} primitives the primitives to delete * @static * @name delete * @returns {module:josm/command.DeleteCommand} the command object */ exports.delete = function() { return new exports.DeleteCommand(checkAndFlatten(arguments)); }; function scheduleLatChangeFromPara(para, change) { var LatLon = org.openstreetmap.josm.data.coor.LatLon; if (!para || ! util.isDef(para.lat)) return; util.assert(util.isNumber(para.lat), \"lat: lat must be a number, got {0}\", para.lat); util.assert(LatLon.isValidLat(para.lat), \"lat: expected a valid lat, got {0}\", para.lat); change.withLatChange(para.lat); }; function scheduleLonChangeFromPara(para, change) { var LatLon = org.openstreetmap.josm.data.coor.LatLon; if (!para || ! util.isDef(para.lon)) return; util.assert(util.isNumber(para.lon), \"lon: lon must be a number, got {0}\", para.lon); util.assert(LatLon.isValidLon(para.lon), \"lon: expected a valid lon, got {0}\", para.lon); change.withLonChange(para.lon); }; function schedulePosChangeFromPara(para, change) { var LatLon = org.openstreetmap.josm.data.coor.LatLon; if (!para || ! util.isDef(para.pos)) return; util.assert(para.pos, \"pos must no be null\"); var pos = para.pos; if (pos instanceof LatLon) { // OK } else if (typeof pos === \"object\") { pos = LatLon.make(pos); } else { util.assert(false, \"pos: unexpected value, expected LatLon or object, got {0}\", pos); } change.withPosChange(pos); }; function scheduleNodeChangeFromPara(para, change) { var out = java.lang.System.out; if (!para || ! util.isDef(para.nodes)) return; // convert to a Java List ... var l = new java.util.ArrayList(); for (var i=0; i&lt;para.nodes.length; i++) { l.add(para.nodes[i]); } /// ... and pass it to the change command change.withNodeChange(l); }; function scheduleMemberChangeFromPara(para, change) { if (!para || ! util.isDef(para.members)) return; var ArrayList = java.util.ArrayList; var RelationMember = org.openstreetmap.josm.data.osm.RelationMember; var l = new ArrayList(); if (para.members instanceof RelationMember) { l.add(para.members); } else if (para.members instanceof java.util.Collection) { l.addAll(para.members); } else if (util.isArray(para.members)) { for (var i=0; i&lt;para.members.length; i++) { l.add(para.members[i]); } } else { util.assert(false, \"Expected RelationMember, array or collection \" + \"of RelationMembers, got {0}\", para.members); } change.withMemberChange(l); }; function scheduleTagsChangeFromPara(para, change) { var Map = java.util.Map; var HashMap = java.util.HashMap; if (!para || ! util.isDef(para.tags)) return; util.assert(para.tags, \"tags must no be null\"); var tags = para.tags; if (tags instanceof Map) { // OK } else if (typeof tags === \"object\") { var map = new HashMap(); for (var key in tags) { if (!tags.hasOwnProperty(key)) continue; key = util.trim(key); value = tags[key]; map.put(key,value); } tags = map; } else { util.assert(false, \"tags: unexpected value, expected Map or object, got {0}\", tags); } change.withTagsChange(tags); }; function changeFromParameters(para) { var Change = org.openstreetmap.josm.plugins.scripting.js.api.Change; var change = new Change(); scheduleLatChangeFromPara(para,change); scheduleLonChangeFromPara(para,change); schedulePosChangeFromPara(para,change); scheduleTagsChangeFromPara(para,change); scheduleNodeChangeFromPara(para, change); scheduleMemberChangeFromPara(para,change); return change; }; /** * A command to change a collection of objects in a data layer. * * @class * @param {java.util.Collection|array} objs the objects to change * @param {org.openstreetmap.josm.plugins.scripting.js.api.Change} change the change specification * @summary A command to change a collection of objects in a data layer. */ exports.ChangeCommand = function (objs, change) { this._objs = checkAndFlatten(objs); this._change = change; }; /** * Applies the command to a layer. * * @function * @summary Applies the command to a layer. * @param {org.openstreetmap.josm.gui.layer.OsmDataLayer} layer the data layer * @memberof module:josm/command.ChangeCommand * @instance * @name applyTo */ exports.ChangeCommand.prototype.applyTo = applyTo; /** * Creates the internal JOSM command for this command * * @summary Creates the internal JOSM command for this command * @param {org.openstreetmap.josm.gui.layer.OsmDataLayer} layer the data layer * @returns {org.openstreetmap.josm.command.Command} the command object * @instance * @function * @name createJOSMCommand * @memberof module:josm/command.ChangeCommand */ exports.ChangeCommand.prototype.createJOSMCommand = function(layer) { var OsmDataLayer = org.openstreetmap.josm.gui.layer.OsmDataLayer; var ChangeMultiCommand = org.openstreetmap.josm.plugins.scripting.js.api.ChangeMultiCommand; util.assert(util.isSomething(layer), \"layer: must not be null or undefined\"); util.assert(layer instanceof OsmDataLayer, \"layer: expected OsmDataLayer, got {0}\", layer); return new ChangeMultiCommand(layer, this._objs, this._change); }; /** * Creates a command to change a collection of objects in a data layer. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;change(obj,obj,..., options)&lt;/code&gt; &lt;/dt&gt; * &lt;dd&gt;&lt;code&gt;obj&lt;/code&gt; are {@class org.openstreetmap.josm.data.osm.Node}s, * {@class org.openstreetmap.josm.data.osm.Way}s, or * {@class org.openstreetmap.josm.data.osm.Relations}s. Or javascript array * or Java collections thereof.&lt;/dd&gt; * &lt;/dl&gt; * * The mandatory last argument is an object with named parameters. It accepts t * he following named parameters: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;lat:number&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Changes the latitude of the target nodes to &lt;code&gt;lat&lt;/code&gt;.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;lon:number&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Changes the longitude of the target nodes to &lt;code&gt;lon&lt;/code&gt;.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;pos: * {@class org.openstreetmap.josm.data.coor.LatLon}|object&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Changes the position of the target nodes to &lt;code&gt;pos&lt;/code&gt;. * pos is either a {@class org.openstreetmap.josm.data.coor.LatLon} or an * object &lt;code&gt;{lat:..., lon:...}&lt;/code&gt; * &lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;tags:{@class java.util.Map}|object&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Changes the tags of the target objects to &lt;code&gt;tags&lt;/code&gt;.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;nodes:{@class java.util.List}|array&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Changes the nodes of the target way sto &lt;code&gt;nodes&lt;/code&gt;.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;members:{@class java.util.List}|array&lt;/code&gt; * &lt;/dt&gt; * &lt;dd&gt;Changes the nodes of the target relations to &lt;code&gt;members&lt;/code&gt;.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var cmd = require(\"josm/command\"); * var layers = require(\"josm/layer\"); * var layer = layers.get(\"Data Layer 1\"); * * // change the position of a node * cmd.change(n1,n1, {lat: 123.45, lon: 44.234}).applyTo(layer); * * // change the nodes of a way * layer.apply( * cmd.change(w2, {nodes: [n1,n2,3]}) * ); * * // change the tags of a collection of primitives * cmd.change(n1,n3, w1,r1, { * tags: {\"mycustommtag\": \"value\"} * }).applyTo(layer); * * @function * @summary Creates a command to change a collection of objects * @name change * @returns {module:josm/command.ChangeCommand} the change command object * @static */ exports.change = function() { var objs = []; var change; switch(arguments.length) { case 0: util.assert(false, \"Unexpected number of arguments, got {0} arguments\", arguments.length); default: var a = arguments[arguments.length -1]; if (a instanceof OsmPrimitive) { util.assert(false, \"Argument {0}: unexpected last argument, expected named \" + \"parameters, got {0}\", a); } else if (typeof a === \"object\") { // last argument is an object with named parameters objs = Array.prototype.slice.call(arguments,0,-1); change = changeFromParameters(a); } else { util.assert(false, \"Argument {0}: unexpected type of value, got {1}\", arguments.length -1, a); } break; } var tochange = checkAndFlatten(objs); return new exports.ChangeCommand(tochange, change); }; /** * Provides static methods to redo and undo commands. * * @class * @summary Accessor to the global command history */ exports.CommandHistory = function(){} /** * Undoes the last &lt;code&gt;depth&lt;/code&gt; commands. * * @static * @summary Undoes the last &lt;code&gt;depth&lt;/code&gt; commands. * @param {number} [depth=1] the number of commands to be undone * @memberof module:josm/command.CommandHistory * @function * @name undo */ exports.CommandHistory.undo = function(depth) { if (util.isDef(depth)) { util.assert(util.isNumber(depth), \"depth: expected a number, got {0}\", depth); util.assert(depth &gt; 0, \"depth: expected number &gt; 0, got {0}\", depth); } var undoRedoHandler = UndoRedoHandler.getInstance(); if (depth){ undoRedoHandler.undo(depth); } else { undoRedoHandler.undo(); } }; /** * Redoes the last &lt;code&gt;depth&lt;/code&gt; commands. * * @static * @summary Redoes the last &lt;code&gt;depth&lt;/code&gt; commands. * @param {number} [depth=1] the number of commands to be redone. * @memberof module:josm/command.CommandHistory * @function * @name redo */ exports.CommandHistory.redo = function(depth) { if (util.isDef(depth)) { util.assert(util.isNumber(depth), \"depth: expected a number, got {0}\", depth); util.assert(depth &gt; 0, \"depth: expected number &gt; 0, got {0}\", depth); } var undoRedoHandler = UndoRedoHandler.getInstance(); if (depth){ undoRedoHandler.redo(depth); } else { undoRedoHandler.redo(); } }; /** * Removes commands in the command history, either all commands, or only the * commands applied to a specific layer. * * @static * @summary Removes commands in the command history * @param {org.openstreetmap.josm.gui.layer.Layer} [layer] the * reference layer. Only commands applied to this layer are removed. Default * if missing: &lt;strong&gt;all&lt;/strong&gt; commands are removed. * @memberof module:josm/command.CommandHistory * @function * @name clear */ exports.CommandHistory.clear = function(layer) { var Layer = org.openstreetmap.josm.gui.layer.Layer; var undoRedoHandler = UndoRedoHandler.getInstance(); function clearAll() { undoRedoHandler.clean(); } function clearForLayer(layer) { undoRedoHandler.clean(layer); } switch(arguments.length) { case 0: clearAll(); break; case 1: var layer = arguments[0]; util.assert(layer instanceof Layer, \"Expected a Layer, got {0}\", layer); clearForLayer(layer); break; default: util.assert(false, \"Unexpected number of arguments\"); } }; /** * Combines two or more ways into one resulting way. * * Reuses the logic behind the JOSM standard menu entry Tools-&amp;gt;Combine Ways. * If invoked from a script, this may trigger modal dialogs which are presented * to the user, in particular if the direction of the ways has to be reversed * because otherwise they could not be combined. * * @example * var cmd = require(\"josm/command\"); * var layers = require(\"josm/layer\"); * var ds = layers.activeLayer.data; * var ways = [ds.way(1), ds.way(2), ds.way(3)]; * * // pass in an array ... * cmd.combineWays(ways); * // ... or the individual ways ... * cmd.combineWays(ds.way(1), ds.way(2), ds.way(3)); * // ... or any combination thereof. * * @function * @summary Combines two or more ways into one resulting way. * @param {...org.openstreetmap.josm.data.osm.Way | array} ways the ways to be combined * @static * @name combineWays */ exports.combineWays = function() { // ways becomes a java.util.HashSet var ways = checkAndFlatten(arguments); // remove any primitives which are not nodes from the arguments var it = ways.iterator(); while (it.hasNext()) { var primitive = it.next(); if (primitive == null || ! primitive.isWay) { it.remove(); } } // at least two remaining ways required to combine them. If less, just // return, don't throw if (ways.size() &lt;=1) return; var activeLayer = layers.activeLayer; if (activeLayer == null) return; var data = activeLayer.data; var CombineWayAction = org.openstreetmap.josm.actions.CombineWayAction; var ret = CombineWayAction.combineWaysWorker(ways); // happens, if combineWayWorkers present a modal dialog and the user // aborts it if (ret == null) return; // ret.b is the SequenceCommand which combines the ways into one // resulting ways. Apply this command to the active layer. activeLayer.apply(ret.b); }; /** * Combines the currently selected ways in the active layer into one resulting * way. * * Returns without effect if * &lt;ul&gt; * &lt;li&gt;there is no active layer&lt;/li&gt; * &lt;li&gt;the active layer is not a data layer&lt;/li&gt; * &lt;li&gt;there are less than two selected ways in the active layer&lt;/li&gt; * &lt;/ul&gt; * * Reuses the logic behind the JOSM standard menu entry Tools-&amp;gt;Combine Ways. * If invoked from a script, this may trigger modal dialogs which are presented * to the user, in particular if the direction of the ways has to be reversed * because otherwise they could not be combined. * * @summary Combines the currently selected ways. * @static * @name combineSelectedWays * @function */ exports.combineSelectedWays = function() { var activeLayer = layers.activeLayer; if (activeLayer == null) return; var ways = activeLayer.data.selection.ways; if (ways == null || ways.length &lt;= 1) return; exports.combineWays(ways); }; Ã— Search results Close "},"josm_layers.js.html":{"id":"josm_layers.js.html","title":"Source: josm/layers.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/layers.js /** * Provides access to the JOSM layers. * * @module josm/layers */ //-- imports var MainApplication = org.openstreetmap.josm.gui.MainApplication; var OsmDataLayer = org.openstreetmap.josm.gui.layer.OsmDataLayer; var DataSet = org.openstreetmap.josm.data.osm.DataSet; var Layer = org.openstreetmap.josm.gui.layer.Layer; var util = require(\"josm/util\"); /** * Replies the number of currently open layers. * * @readOnly * @property {number} length the number of layers * @summary Replies the number of currently open layers. * @name length * @static */ Object.defineProperty(exports, \"length\", { get: function() { return MainApplication.getLayerManager().getLayers().size(); } }); /** * Set or get the active layer. * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the active layer or undefined.&lt;/dd&gt; * * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Assign either an existing {@class org.openstreetmap.josm.layer.Layer}, * the name of a layer as string, * or a layer index as number.&lt;/dd&gt; * &lt;/dl&gt; * * @property {org.openstreetmap.josm.layer.Layer} activeLayer the active layer * @name activeLayer * @summary Set or get the active layer. * @static */ Object.defineProperty(exports, \"activeLayer\", { get: function() { return MainApplication.getLayerManager().getActiveLayer(); }, set: function(value) { util.assert(util.isSomething(value), \"Value must not be null or undefined)\"); var layer; if (value instanceof Layer) { layer = value; } else if (util.isNumber(value) || util.isString(value)) { layer = exports.get(value); } else { util.assert(false, \"Unexpected type of value, got {0}\", value); } util.assert(util.isSomething(layer), \"Layer ''{0}'' doesn''t exist. It can''t be set as active layer.\", value); MainApplication.getLayerManager().setActiveLayer(layer); } }); function getLayerByName(key) { key = util.trim(key).toLowerCase(); if (exports.length == 0) return undefined; var layers = MainApplication.getLayerManager().getLayers(); for(var it=layers.iterator(); it.hasNext();) { var l = it.next(); if (l.getName().trim().toLowerCase().equals(key)) return l; } return undefined; } function getLayerByIndex(idx) { if (idx &lt; 0 || idx &gt;= exports.length) return undefined; var layers = MainApplication.getLayerManager().getLayers(); return layers.get(idx); } /** * Replies one of the layers given a key. * &lt;ul&gt; * &lt;li&gt;If &lt;code&gt;key&lt;/code&gt; is a number, replies the layer with index key, or * undefined, if no layer for this index exists.&lt;/li&gt; * &lt;li&gt;If &lt;code&gt;key&lt;/code&gt; is a string, replies the first layer whose name * is identical to key (case insensitive, without leading/trailing * whitespace), or undefined, if no layer with such a name exists.&lt;/li&gt; * &lt;/ul&gt; * * @example * var layers = require(\"josm/layers\"); * * // get the first layer * var layer1 = layers.get(0); * * // get the first layer with name \"data layer\" * var layer2 = layers.get(\"data layer\"); * * @param {number|string} key the key to retrieve the layer * @summary Replies one of the layers given a key. * @function * @returns {org.openstreetmap.josm.layer.Layer} * @name get * @static */ exports.get = function(key) { var undefined; if (util.isNothing(key)) return undefined; if (util.isString(key)) return getLayerByName(key); if (util.isNumber(key)) return getLayerByIndex(key); return undefined; }; /** * Checks whether &lt;code&gt;layer&lt;/code&gt; is a currently registered layer. * * @example * var layers = require(\"josm/layers\"); * * // is there a layer with name \"my layer\"? * var b = layers.has(\"my layer\"); * * // is there a layer at index position 2 * b = layers.has(2); * * // is there a specific layer? * var l = layers.get(0); * b = layers.has(l); * * @param {org.openstreetmap.josm.gui.layer.Layer|string|number} layer a layer, * a layer name, or a layer index * @returns {boolean }true, if the layer or at least one layer with the given name exists. * False, otherwise. * @summary Checks whether &lt;code&gt;layer&lt;/code&gt; is currently registered layer. * @function * @name has * @static */ exports.has = function(layer) { if (util.isNothing(layer)) return false; var layerManager = MainApplication.getLayerManager(); if (layer instanceof Layer) { return layerManager.getLayers().contains(layer); } else if (util.isString(layer)) { return util.isSomething(exports.get(layer)); } else if (util.isNumber(layer)) { return layer &gt;= 0 &amp;&amp; layer &lt; exports.length; } else { return false; } }; /** * Adds a layer. * * Either pass in a layer object or a data set. In the later case, an * {@class org.openstreetmap.josm.gui.layer.OsmDataLayer} is * automatically created. * * @example * var layers = require(\"josm/layers\"); * var OsmDataLayer = org.openstreetmap.josm.gui.layer.OsmDataLayer; * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * * var dataLayer = new OsmDataLayer(new DataSet(), null, null); * // add a layer ... * layers.add(dataLayer); * * // or add a dataset, which will create a data layer * var ds = new DataSet(); * layer.add(ds); * * @param {org.openstreetmap.josm.gui.layer.Layer * |org.openstreetmap.josm.data.osm.DataSet} obj a layer to add, * or a dataset. Ignored if null or undefined. * @summary Adds a layer. * @returns {org.openstreetmap.josm.gui.layer.Layer} the added layer * @name add * @function * @static */ exports.add = function(obj) { //util.println(\"obj: \" + obj); if (util.isNothing(obj)) return; var layerManager = MainApplication.getLayerManager(); if (obj instanceof Layer) { layerManager.addLayer(obj); } else if (obj instanceof DataSet){ layerManager.addLayer(new OsmDataLayer(obj, null, null)); } else { util.println(\"wrong argument: \" + obj); util.assert(false, \"Expected an instance of Layer or DataSet, got {0}\", obj); } }; var removeLayerByIndex = function(idx) { var layer = exports.get(idx); if (util.isNothing(layer)) return; MainApplication.getLayerManager().removeLayer(layer); }; var removeLayerByName = function(name) { var layer = exports.get(name); if (util.isNothing(layer)) return; MainApplication.getLayerManager().removeLayer(layer); }; /** * Removes a layer with the given key. * &lt;ul&gt; * &lt;li&gt;If &lt;code&gt;key&lt;/code&gt; is a &lt;code&gt;Number&lt;/code&gt;, removes the layer with * the index key. If the index doesn't isn't a valid layer index, nothing * is removed.&lt;/li&gt; * &lt;li&gt;If &lt;code&gt;key&lt;/code&gt; is a &lt;code&gt;string&lt;/code&gt;, removes the layer with * the name &lt;code&gt;key&lt;/code&gt;. Leading and trailing white space is removed, * matching is a case-insensitive sub-string match.&lt;/li&gt; * &lt;/ul&gt; * @example * var layers = require(\"josm/layers\"); * * // remove the first layer * layers.remove(0); * * // remove the first layer matching with the supplied name * layers.remove(\"myLayerName\"); * * @param {number|string} key indicates the layer to remove * @summary Removes a layer. * @function * @name remove * @static */ exports.remove = function(key) { if (util.isNothing(key)) return; if (util.isNumber(key)) { removeLayerByIndex(key); return; } else if (util.isString(key)) { removeLayerByName(key); return; } else { util.assert(false, \"Expected a number or a string, got {0}\", key); } }; /** * Creates and adds a new data layer. The new layer becomes the new edit * layer. * * &lt;string&gt;Signatures&lt;/string&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;addDataLayer()&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;create data layer with a new dataset and default name&lt;/dd&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;addDataLayer(ds)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;create data layer with dataset ds and default name&lt;/dd&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;addDataLayer(name)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;create data layer with a new dataset and name &lt;code&gt;name&lt;/code&gt;&lt;/dd&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;addDataLayer({name: ..., ds: ...})&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;create data layer with a new dataset and name &lt;code&gt;name&lt;/code&gt;&lt;/dd&gt; * &lt;/dl&gt; * @example * // creates a new data layer * var layer = josm.layers.addDataLayer(); * * // creates a new data layer with name 'test' * layer = josm.layers.addDataLayer(\"test\"); * * // creates a new data layer for the dataset ds * var ds = new DataSet(); * layer = josm.layers.addDataLayer(ds); * * @returns {org.openstreetmap.josm.gui.layer.OsmDataLayer} the added layer * @summary Adds a data layer * @function * @name addDataLayer * @param {string | org.openstreetmap.josm.data.osm.DataSet | object } args see description * @static */ exports.addDataLayer = function() { var name, ds; switch(arguments.length){ case 0: break; case 1: if (util.isString(arguments[0])) { name = util.trim(arguments[0]); } else if (arguments[0] instanceof DataSet) { ds = arguments[0]; } else if (typeof arguments[0] === \"object\") { if (util.isString(arguments[0].name)) { name = util.trim(arguments[0].name); } if (arguments[0].ds instanceof DataSet) { ds = arguments[0].ds; } } else { util.assert(false, \"unsupported type of argument, got {0}\", arguments[0]); } break; default: util.assert(false, \"Unsupported number of arguments, got {0}\", arguments.length); } ds = ds || new DataSet(); name = name || OsmDataLayer.createNewName(); var layer = new OsmDataLayer(ds, name, null /* no file */); exports.add(layer); return layer; }; Ã— Search results Close "},"josm_mixin_BoundsMixin.js.html":{"id":"josm_mixin_BoundsMixin.js.html","title":"Source: josm/mixin/BoundsMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/BoundsMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.data.Bounds}. * * @module josm/mixin/BoundsMixin */ var util = require(\"josm/util\"); var LatLon = org.openstreetmap.josm.data.coor.LatLon; var Bounds = org.openstreetmap.josm.data.Bounds; /** * This mixin is auto-loaded by the scripting plugin and mixed into the * native java class {@class org/openstreetmap/josm/data/Bounds}. * * @mixin BoundsMixin * @summary JavaScript mixin for the java class {@class org/openstreetmap/josm/data/Bounds} * @forClass org.openstreetmap.josm.data.Bounds * */ exports.forClass = org.openstreetmap.josm.data.Bounds; exports.mixin = {}; /** * Creates a Bounds from a javascript object. * * @example * var bounds1 = Bounds.make({minlat: 46.9479186, minlon: 7.4619484, * maxlat: 46.9497642, maxlon: 7.4660683}); * * var bounds2 = Bounds.make({ * min: {lat: 46.9479186, lon: 7.4619484}, * max: {lat: 46.9497642, lon: 7.4660683} * }); * * @param {object} obj a javascript object * @return {org.openstreetmap.josm.data.Bounds} the bounds * @memberof module:josm/mixin/BoundsMixin~BoundsMixin * @name make * @function * @static */ exports.mixin.make = function(obj) { util.assert(util.isSomething(obj), \"obj: must not be null or undefined\"); util.assert(typeof obj === \"object\", \"obj: expected an object, got {0}\", obj); function normalizeLat(obj,name) { util.assert(util.isDef(obj[name]), \"{0}: missing mandatory property\", name); util.assert(util.isNumber(obj[name]), \"{0}: expected a number, got {1}\", name, obj[name]); util.assert(LatLon.isValidLat(obj[name]), \"{0}: expected a valid lat, got {1}\", name, obj[name]); return obj[name]; } function normalizeLon(obj,name) { util.assert(util.isDef(obj[name]), \"{0}: missing mandatory property\", name); util.assert(util.isNumber(obj[name]), \"{0}: expected a number, got {1}\", name, obj[name]); util.assert(LatLon.isValidLon(obj[name]), \"{0}: expected a valid lon, got {1}\", name, obj[name]); return obj[name]; } if (util.isDef(obj.minlat)) { var minlat = normalizeLat(obj.minlat); var minlon = normalizeLat(obj.minlon); var maxlat = normalizeLat(obj.maxlat); var maxlon = normalizeLat(obj.maxlon); return new Bounds(minlat, minlon, maxlat, maxlon); } else if (util.isDef(obj.min)) { var min = LatLon.make(obj.min); var max = LatLon.make(obj.max); return new Bounds(min,max); } else { util.assert(false, \"obj: expected an object {min:.., max:..} or \" + \"{minlat:, maxlat:, minlon:, maxlon:}, got {0}\", obj); } }; exports.mixin.make.static=true; Ã— Search results Close "},"josm_mixin_ChangesetMixin.js.html":{"id":"josm_mixin_ChangesetMixin.js.html","title":"Source: josm/mixin/ChangesetMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/ChangesetMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.data.osm.Changeset}. * * @module josm/mixin/ChangesetMixin */ var util = require(\"josm/util\"); var Tags = org.openstreetmap.josm.plugins.scripting.js.api.Tags; /** * This mixin is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.data.osm.Changeset}. * * @mixin ChangesetMixin * @summary JavaScript mixin for the java class {@class org.openstreetmap.josm.data.osm.Changeset} * @forClass org.openstreetmap.josm.data.osm.Changeset */ exports.forClass=org.openstreetmap.josm.data.osm.Changeset; exports.mixin = {}; /** * Replies the unique numeric id. * * @readonly * @property {number} id * @name id * @summary Replies the unique numeric id. * @instance * @memberof module:josm/mixin/ChangesetMixin~ChangesetMixin */ exports.mixin.id = { get: function() { return this.getId(); } }; /** * Get or set whether this changeset is open. * * @property {boolean} isOpen * @name isOpen * @instance * @summary Get or set whether this changeset is open. * @memberof module:josm/mixin/ChangesetMixin~ChangesetMixin * @alias open */ exports.mixin.isOpen = exports.mixin.open = { get: function() { return this.$isOpen(); }, set: function(value) { util.assert(typeof value === \"boolean\", \"value: expected a boolean, got {0}\", value); this.$setOpen(value); } }; var LatLon = org.openstreetmap.josm.data.coor.LatLon; var Bounds = org.openstreetmap.josm.data.Bounds; /** * Set or get the coordinates of the lower left corner of the bounding box. * * * &lt;dl&gt; * &lt;dt&gt;get:&lt;/dt&gt; * &lt;dd&gt;Replies a {@class org.openstreetmap.josm.data.coor.LatLon} or * undefined, if min isn't known.&lt;/dd&gt; * * &lt;dt&gt;set:&lt;/dt&gt; * &lt;dd&gt;Assign null or undefined to clear the coordinates. Assign a * {@class org.openstreetmap.josm.data.coor.LatLon} or * an object &lt;code&gt;{lat:number, lon: number}&lt;/code&gt; to set the coordinates. * &lt;/dd&gt; * &lt;/dl&gt; * @property {org.openstreetmap.josm.data.coor.LatLon} min the lower left corner * @name min * @summary Get or set the coordinates of the lower left corner * @instance * @memberof module:josm/mixin/ChangesetMixin~ChangesetMixin */ exports.mixin.min = { get: function() { var min = this.$getMin(); return min == null ? undefined : min; }, set: function(value) { if (util.isNothing(value)) { this.$setMin(null); return; } util.assert(value instanceof LatLon || typeof value === \"object\", \"value: expected a LatLon or an object, got {0}\", value); if (value instanceof LatLon) { this.$setMin(value); } else if (typeof value === \"object\") { value = LatLon.make(value); this.$setMin(value); } } }; /** * Set or get the coordinates of the upper right corner of the bounding box. * * &lt;dl&gt; * &lt;dt&gt;get:&lt;/dt&gt; * &lt;dd&gt;Replies a {@class org.openstreetmap.josm.data.coor.LatLon} or * undefined, if max isn't known.&lt;/dd&gt; * * &lt;dt&gt;set:&lt;/dt&gt; * &lt;dd&gt;Assign null or undefined to clear the coordinates. Assign a * {@class org.openstreetmap.josm.data.coor.LatLon} or * an object &lt;code&gt;{lat:number, lon: number}&lt;/code&gt; to set the coordinates. * &lt;/dd&gt; * &lt;/dl&gt; * @name max * @property {org.openstreetmap.josm.data.coor.LatLon} max the upper right corner * @summary Get or set the coordinates of the upper right corner * @instance * @memberOf module:josm/mixin/ChangesetMixin~ChangesetMixin */ exports.mixin.max = { get: function() { var max = this.$getMax(); return max == null ? undefined : max; }, set: function(value) { if (util.isNothing(value)) { this.$setMax(null); return; } util.assert(value instanceof LatLon || typeof value === \"object\", \"value: expected a LatLon or an object, got {0}\", value); if (value instanceof LatLon) { this.$setMax(value); } else if (typeof value === \"object\") { value = LatLon.make(value); this.$setMax(value); } } }; /** * Get the bounding box the bounding box. * &lt;dl&gt; * &lt;dt&gt;get:&lt;/dt&gt; * &lt;dd&gt;Replies a {@class org.openstreetmap.josm.data.Bounds} or undefined, * if the bounding box isn't known.&lt;/dd&gt; * &lt;/dl&gt; * * * @name bounds * @property {org.openstreetmap.josm.data.Bounds} bounds the bounding box * @summary Get the bounding box the bounding box. * @memberof module:josm/mixin/ChangesetMixin~ChangesetMixin * @instance * @readOnly */ exports.mixin.bounds = { get: function() { var bounds = this.$getBounds(); return bounds == null ? undefined : bounds; } }; function applyTagMap(obj, tags) { if (util.isNothing(tags)) return; for(var it=tags.keySet().iterator(); it.hasNext();){ var key = it.next(); var value = tags.get(key); if (util.isNothing(key)) continue; if (util.isNothing(value)) continue; key = util.trim(key + \"\"); value = value + \"\"; if (! obj.has(key) || value != obj.get(key)) { obj.$put(key, value); if (!obj.modified) obj.modified = true; } } }; function applyTagObject(obj,tags) { if (util.isNothing(tags)) return; for(var p in tags) { if (!tags.hasOwnProperty(p)) continue; var value = tags[p]; var key = util.trim(p); if (util.isNothing(value)) continue; var value = value + \"\"; if (! obj.has(key) || value != obj.get(key)) { obj.$put(key, value); if (!obj.modified) obj.modified = true; } } }; /** * Get or set the tags of the changeset. * &lt;strong&gt;get:&lt;/strong&gt; - replies the tags as javascript object. * * &lt;strong&gt;set:&lt;/strong&gt; * &lt;ul&gt; * &lt;li&gt;assign null or undefined to remove all tags&lt;/li&gt; * &lt;li&gt;assign an object to set its properties as tags.&lt;/li&gt; * &lt;li&gt;assign an java.util.Map to set its elements as tags&lt;/li&gt; * &lt;/ul&gt; * * * null values and undefined tag values aren't assigned. tag keys are * normalized, i.e. leading and trailing white space is removed. Both, tag * keys and tag values, are converted to strings. * * @example * var cs = .... // create a changeset * * // set the tags using a javascript object * cs.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; * cs.tags.amenity; // -&gt; restaurant * cs.tags.name; // -&gt; Obstberg * * // remove all tags * cs.tags = null; * * // set tags using a java map * var tags = new java.util.HashMap(); * tags.put(\"amenity\", \"restaurant\"); * tags.put(\"name\", \"Obstberg\"); * cs.tags = tags; * * @memberOf module:josm/mixin/ChangesetMixin~ChangesetMixin * @name tags * @property {object} tags the tags * @summary Get or set the tags. * @instance */ exports.mixin.tags = { get: function() { return new Tags(this); }, set: function(tags) { var ntags = this.keySet().size(); this.removeAll(); if (ntags &amp;&amp; ! this.modified) this.modified = true; if (util.isNothing(tags)) { // skip } else if (tags instanceof java.util.Map) { applyTagMap(this, tags); } else if (typeof tags === \"object\") { applyTagObject(this, tags); } else { util.assert(false, \"Can''t assign tags from object {0}\", tags); } } }; /** * Set or get the date this changeset was created. * &lt;dl&gt; * &lt;dt&gt;get:&lt;/dt&gt; * &lt;dd&gt;Replies a {@class java.utilDate} or undefined, if the date isn't * known.&lt;/dd&gt; * * &lt;dt&gt;set:&lt;/dt&gt; * &lt;dd&gt;Assign null or undefined to clear the date. Assign a * {@class java.util.Date} to set the date. Note, that you can't * assign a javascript Date object.&lt;/dd&gt; * &lt;/dl&gt; * * @memberOf module:josm/mixin/ChangesetMixin~ChangesetMixin * @name createdAt * @property {java.util.Date} createdAt date the changeset was created * @summary Set or get the date this changeset was created. * @instance */ exports.mixin.createdAt = { get: function() { var d = this.getCreatedAt(); return d == null ? undefined: d; }, set: function(value) { if (util.isNothing(value)) { this.setCreatedAt(null); } else if (value instanceof Date) { util.assert(false, \"Can''t assign a date from a javascript Date. \" + \"Use a java.util.Date object instead.\"); } else if (value instanceof java.util.Date) { this.setCreatedAt(value); } else { util.assert(false, \"Unexpected type of value, got {0}\", value); } } }; /** * Set or get the date this changeset was closed. * * &lt;dl&gt; * &lt;dt&gt;get:&lt;/dt&gt; * &lt;dd&gt;Replies a {@class java.utilDate} or undefined, if the date isn't * known.&lt;/dd&gt; * * &lt;dt&gt;set:&lt;/dt&gt; * &lt;dd&gt;Assign null or undefined to clear the date. Assign a * {@class java.util.Date} to set the date. Note, that you can't assign a * javascript Date object.&lt;/dd&gt; * &lt;/dl&gt; * * @memberOf module:josm/mixin/ChangesetMixin~ChangesetMixin * @name closedAt * @property {java.util.Date} closedAt date the changeset was closed * @summary Set or get the date this changeset was closed. * @instance */ exports.mixin.closedAt = { get: function() { var d = this.getClosedAt(); return d == null ? undefined: d; }, set: function(value) { if (util.isNothing(value)) { this.setClosedAt(null); } else if (value instanceof Date) { util.assert(false, \"Can''t assign a date from a javascript Date. \" + \"Use a java.util.Date object instead.\"); } else if (value instanceof java.util.Date) { this.setClosedAt(value); } else { util.assert(false, \"Unexpected type of value, got {0}\", value); } } }; Ã— Search results Close "},"josm_mixin_DataSetMixin.js.html":{"id":"josm_mixin_DataSetMixin.js.html","title":"Source: josm/mixin/DataSetMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/DataSetMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org/openstreetmap/josm/data/osm/DataSet}. * * @module josm/mixin/DataSetMixin */ var util = require(\"josm/util\"); var NodeBuilder = require(\"josm/builder\").NodeBuilder; var WayBuilder = require(\"josm/builder\").WayBuilder; var RelationBuilder = require(\"josm/builder\").RelationBuilder; var OsmPrimitive = org.openstreetmap.josm.data.osm.OsmPrimitive; var Node = org.openstreetmap.josm.data.osm.Node; var Way = org.openstreetmap.josm.data.osm.Way; var Relation = org.openstreetmap.josm.data.osm.Relation; var PrimitiveId = org.openstreetmap.josm.data.osm.PrimitiveId; var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; var DataSet = org.openstreetmap.josm.data.osm.DataSet; var Collection = java.util.Collection; var HashMap = java.util.HashMap; var HashSet = java.util.HashSet; var Collections = java.util.Collections; /** * This mixin provides additional properties and methods which you can * invoke on an instance of {@class org.openstreetmap.josm.data.osm.DataSet}. * * * @example * var ds = new org.openstreetmap.josm.data.osm.DataSet(); * * // create objects * var n1 = ds.nodeBuilder.create(); * var n2 = ds.nodeBuilder.create(); * var w1 = ds.wbuilder.create(1234, {nodes: [n1,n2]}); * * // access and manipulate the objects in the dataset * ds.add(w1); * ds.has(w1); // -&gt; true * ds.has(n1); // -&gt; true * * // access and manipulate the selected objects * ds.selection.add(n2); * ds.selection.isSelected(n2); // -&gt; true * ds.selection.toogle(n2); * * @mixin DataSetMixin * @summary JavaScript mixin for the java class {@class org.openstreetmap.josm.data.osm.DataSet} * @forClass org.openstreetmap.josm.data.osm.DataSet */ exports.mixin = {}; exports.forClass = org.openstreetmap.josm.data.osm.DataSet; function each(collection, delegate) { if (util.isArray(collection) || util.isArguments(collection)) { for(var i=0; i&lt;collection.length;i++) delegate(collection[i]); } else if (collection instanceof Collection){ for(var it=collection.iterator(); it.hasNext();) delegate(it.next()); } else { util.assert(false, \"Expected list or collection, got {0}\", collection); } } function collect(collection, predicate) { var ret = []; each(collection, function(obj) { if (predicate(obj)) ret.push(obj); }); return ret; }; function isCollection(collection){ return util.isArray(collection) || util.isArguments(collection) || collection instanceof Collection; } function colToArray(col) { var ret = []; for(var it=col.iterator(); it.hasNext();) ret.push(it.next()); return ret; } /** * Adds one or more primitives to the dataset. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;add(o1,o2, ...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Adds a variable number of objects. null or undefined are ignored. * An object is either an instance of * {@class org/openstreetmap/josm/data/osm/Node}, * {@class org/openstreetmap/josm/data/osm/Way}, * or {@class org/openstreetmap/josm/data/osm/Relation}.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;add(array|collection)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Adds an javascript array or a java collection of objects. null or * undefined are ignored. A list element is an instance of * {@class org/openstreetmap/josm/data/osm/Node}, * a {@class org/openstreetmap/josm/data/osm/Way}, * or {@class org/openstreetmap/josm/data/osm/Relation}. * null and undefined are ignored.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * var rbuilder = require(\"josm/builder\").RelationBuilder; * var nbuilder = require(\"josm/builder\").NodeBuilder; * var wbuilder = require(\"josm/builder\").WayBuilder; * * // add two nodes and a way to the dataset * ds.add( * var n1 = nb.create(), * var n2 = nb.create(), * wb.withNodes(n1,n2).create() * ); * * // add a array of objects to the dataset * var l = [nb.create(1), nb.create(2), wb.create()]; * relation.add(l); * * @summary Adds one or more objects to the dataset. * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name add * @param {(...primitive|primitive[]|java.util.Collection)} primitives primitives to add * @function * @instance */ exports.mixin.add = function() { var objs = []; function remember(obj){ if(util.isNothing(obj)) return; if (obj instanceof OsmPrimitive) { objs.push(obj); } else if (isCollection(obj)) { each(obj, function(that){remember(that);}); } else { util.assert(false, \"Can''t add object {0} to a dataset\", obj); } } remember(arguments); var ds = this; this.batch(function() { each(objs, function(obj) { ds.addPrimitive(obj); }); }); }; function normalizeId(id) { util.assert(util.isSomething(id), \"id: must not be null or undefined\"); util.assert(util.isNumber(id), \"id: expected a number, got {0}\", id); util.assert(id != 0, \"id: must not be 0\", id); return id; }; function normalizeType(type) { util.assert(util.isSomething(type), \"type: must not be null or undefined\"); if (util.isString(type)) { type = util.trim(type).toLowerCase(); try { return OsmPrimitiveType.fromApiTypeName(type); } catch(e) { util.assert(false, \"type: unsupported OSM primitive type ''{0}''\", type); } } else if (type instanceof OsmPrimitiveType) { util.assert(type == OsmPrimitiveType.NODE || type == OsmPrimitiveType.WAY || type == OsmPrimitiveType.RELATION, \"type: unsupported OSM primitive type, got {0}\", type); return type; } else { util.assert(false, \"type: unsupported value, got {0}\", type); } }; function primitiveIdFromObject(obj) { util.assert(util.isDef(obj.id), \"missing mandatory property ''{0}'' in {1}\", \"id\", obj); var id = normalizeId(obj.id); var type = normalizeType(obj.type); return new SimplePrimitiveId(id, type); }; /** * Replies an OSM object from the dataset, or undefined, if no such object * exists. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;get(id, type)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies an object given by its unique numeric id and a type. * The type is either a string \"node\", \"way\", or \"relation\", or one of * the symbols * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.NODE, * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.WAY, or * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.RELATION.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;get(id)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies an object given an ID. &lt;code&gt;id&lt;/code&gt; is either an instance * of * {@class org.openstreetmap.josm.data.osm.PrimitiveId} or an object with * the properties &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt;, i.e. * &lt;code&gt;{id: 1234, type: \"node\"}&lt;/code&gt;.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; * var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; * var rbuilder = require(\"josm/builder\").RelationBuilder; * var nbuilder = require(\"josm/builder\").NodeBuilder; * var wbuilder = require(\"josm/builder\").WayBuilder; * * // get a node with a global id * var o1 = ds.get(1234, \"node\"); * * // get a way with a global id * var o2 = ds.get(3333, OsmPrimitiveType.WAY); * * // get a relation with an id object * var o3 = ds.get({id: 5423, type: \"relation\"}); * * // pass in a SimplePrimitiveId * var id = new SimplePrimitiveId(-5, OsmPrimitiveType.NODE); * var o4 = ds.get(id); * * // pass in a primitive to get it * var way = wbuilder.create(987); * var o5 = ds.get(way); * * @summary Get an object from the dataset. * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @function * @name get * @param params see description * @instance */ exports.mixin.get = function() { var args = Array.prototype.slice.call(arguments,0); function get_1(ds) { var id = args[0]; util.assert(util.isSomething(id), \"id: must not be null or undefined\"); if (id instanceof PrimitiveId) { var obj = ds.getPrimitiveById(id); return obj == null ? undefined : obj; } else if (typeof id === \"object\") { return primitiveIdFromObject(id); } else if (util.isNumber(id)) { // common mistake when using get() -&gt; explain in error message. util.assert(false, \"Only got a numeric id {0}. Use get(id, type) or one of the \" + \"methods node(id), way(id), or relation(id).\", id); } else { util.assert(false, \"id: unexpected value, got {0}\", id); } }; function get_2(ds) { var id = normalizeId(args[0]); var type = normalizeType(args[1]); var osmId = new SimplePrimitiveId(id, type); var obj = ds.getPrimitiveById(osmId); return obj == null ? undefined : obj; }; switch(arguments.length){ case 0: util.assert(false, \"Expected 1 or 2 arguments, got none\"); case 1: return get_1(this); case 2: return get_2(this); default: util.assert(false, \"Expected 1 or 2 arguments, got {0}\", args.length); } }; /** * Replies the node with id &lt;code&gt;id&lt;/code&gt;. * * @param {number} id the unique numeric id. Must not be 0. * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name node * @summary Get a specific {@class org.openstreetmap.josm.data.osm.Node} * from the dataset. * @return {org.openstreetmap.josm.data.osm.Node} the node * @function * @instance */ exports.mixin.node = function(id) { return this.get(normalizeId(id), \"node\"); }; /** * Replies the way with id &lt;code&gt;id&lt;/code&gt;. * * @param {number} id the unique numeric id. Must not be 0. * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name way * @summary Get a specific {@class org.openstreetmap.josm.data.osm.Way} * from the dataset. * @returns {org.openstreetmap.josm.data.osm.Way} the way * @function * @instance */ exports.mixin.way = function(id) { return this.get(normalizeId(id), \"way\"); }; /** * Replies the relation with id &lt;code&gt;id&lt;/code&gt;. * * @param {number} id the unique numeric id. Must not be 0. * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name relation * @summary Get a specific {@class org.openstreetmap.josm.data.osm.Relation} * from the dataset. * @returns {org.openstreetmap.josm.data.osm.Relation} * @function * @instance */ exports.mixin.relation = function(id) { return this.get(normalizeId(id), \"relation\"); }; /** * Run a sequence of operations against the dataset in \"batch mode\". * Listeners to data set events are only notified at the end of the batch. * * @example * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * var ds = new DataSet(); * ds.batch(function() { * var n1 = ds.nodeBuilder.create(); * var n2 = ds.nodeBuilder.create(); * ds.wayBuilder.withNodes(n1,n2).create(); * }); * * @param {function} delegate the function implementing the batch processes. * Ignored if null or undefined. * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name batch * @summary Run a sequence of command without notifying listeners. * @function * @instance */ exports.mixin.batch = function(delegate) { if (util.isNothing(delegate)) return; util.assert(util.isFunction(delegate), \"delegate: expected a function, got {0}\", delegate); try { this.beginUpdate(); delegate(); } finally { this.endUpdate(); } }; function normalizeIds(ids) { function walk(set, ids) { if (util.isNothing(ids)) return; if (ids instanceof PrimitiveId) { set.add(ids); } else if (isCollection(ids)) { each(ids, function(that) { walk(set, that); }); } else if (typeof ids === \"object\") { set.add(primitiveIdFromObject(ids)); } else { util.assert(false, \"Can''t derive a OSM primitive id from object {0}\", ids); } } var set = new HashSet(); walk(set, ids); return set; }; function normalizeObjId(id, type){ id = normalizeId(id); type = normalizeType(type); return new SimplePrimitiveId(id, type); }; /** * Removes objects from the dataset. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;remove(id, type)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Removes a single object given by its unique numeric ID (nid) and a * type. The type is either a string \"node\", \"way\", or \"relation\", or one * of the symbols * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.NODE, * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.WAY, or * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.RELATION.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;remove(id, id, ...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Removes a collection of objects given by the ids. &lt;code&gt;id&lt;/code&gt; is * either an instance of * {@class org.openstreetmap.josm.data.osm.PrimitiveId} or an object with * the properties &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt;, i.e. * &lt;code&gt;{id: 1234, type: \"node\"}&lt;/code&gt;. * null and undefined are ignored.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;remove(array|collection)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Removes a collection of objects given by the an array or a * java.util.Collection of ids. * The collection elemeents are either instances of * {@class org.openstreetmap.josm.data.osm.PrimitiveId} or an object with * the properties &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt;, i.e. * &lt;code&gt;{id: 1234, type: \"node\"}&lt;/code&gt;. * null or undefined elements are ignored. * &lt;/dd&gt; * &lt;/dl&gt; * * @example * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; * var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; * var rbuilder = require(\"josm/builder\").RelationBuilder; * var nbuilder = require(\"josm/builder\").NodeBuilder; * var wbuilder = require(\"josm/builder\").WayBuilder; * * // get a node with a global id * ds.remove(1234, \"node\"); * * // remove a node and a way * var id1 = new SimplePrimitiveId(1234, \"node\") * var id2 = new SimplePrimitiveId(3333, OsmPrimitiveType.WAY) * ds.remove(id1, id2); * * // remove a relation and a node * ds.remove({id: 1234, type: \"relation\"}, id1); * * // remove an array of nodes * ds.remove([id1,id2]); * * // remove a set of objects * var ids = new HashSet(); * ids.add(id1); ids.add(id1); * ds.remove(ids); * * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name remove * @summary Remove one or more objects from the dataset. * @function * @instance * @param primitives see description and examples */ exports.mixin.remove = function() { var ids; if (arguments.length == 2 &amp;&amp; util.isNumber(arguments[0])){ // handling remove(id, type) var id = normalizeId(arguments[0]); var type = normalizeType(arguments[1]); ids = [new SimplePrimitiveId(id, type)]; } else { // handling remove(id, id, id, ...) and remove(array|collection) ids = normalizeIds(arguments); } var ds = this; this.batch(function() { each(ids, function(id) { ds.removePrimitive(id); }); }); }; /** * Replies true, if the dataset contains an object. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;has(id, type)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies true, if an object given by its unique numeric ID and a type * is in the dataset. The type is either a string * \"node\", \"way\", or \"relation\", or one of the symbols * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.NODE, * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.WAY, or * {@class org.openstreetmap.josm.data.osm.OsmPrimitiveType}.RELATION.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;has(id)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies true, if an object with the id &lt;code&gt;id&lt;/code&gt; exists in the * dataset. &lt;code&gt;id&lt;/code&gt; is either * an instance of {@class org.openstreetmap.josm.data.osm.PrimitiveId} or * an object with the properties &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt;, * i.e. &lt;code&gt;{id: 1234, type: \"node\"}&lt;/code&gt;.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var DataSet = org.openstreetmap.josm.data.osm.DataSet; * var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; * var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; * var rbuilder = require(\"josm/builder\").RelationBuilder; * var nbuilder = require(\"josm/builder\").NodeBuilder; * var wbuilder = require(\"josm/builder\").WayBuilder; * * // is there a node with id 1234 ? * var ret = ds.has(1234, \"node\"); * * // is there a way with id 3333 ? * ret = ds.has(3333, OsmPrimitiveType.WAY); * * // is there a relation with id 5433 ? * ret = ds.has({id: 5423, type: \"relation\"}); * * // is there a node with id -5 ? * var id = new SimplePrimitiveId(-5, OsmPrimitiveType.NODE); * ret = ds.has(id); * * // does it contain the way w? * var way = wbuilder.create(987); * ret = ds.has(way); * * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name has * @summary Check whether an object is in the dataset. * @function * @param params see description and examples * @instance */ exports.mixin.has = function() { return mixin.get.apply(this, Array.prototype.slice.call(arguments)) !== undefined; }; /** * Replies a node builder to create nodes in this dataset. * * @example * var ds = new DataSet(); * var n = ds.nodeBuilder.withId(1234).withTags({amenity: \"restaurant\"}) * .create(); * ds.has(n); // --&gt; true * * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name nodeBuilder * @property {module:josm/builder~NodeBuilder} nodeBuilder a node builder for this dataset * @readOnly * @summary the builder for creating {@class org.openstreetmap.josm.data.osm.Node}s * @instance */ exports.mixin.nodeBuilder = { get: function() { return NodeBuilder.forDataSet(this); } }; /** * Replies a way builder to create ways in this dataset. * * @example * var ds = new DataSet(); * var w = ds.wayBuilder.create(1234, {tags: {highway: \"residential\"}}); * ds.has(w); // --&gt; true * * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name wayBuilder * @property {module:josm/builder~WayBuilder} wayBuilder the way builder for this dataset * @readOnly * @instance * @summary the builder for creating {@class org.openstreetmap.josm.data.osm.Way}s */ exports.mixin.wayBuilder = { get: function() { return WayBuilder.forDataSet(this); } }; /** * Replies a relation builder to create relations in this dataset. * * @example * var ds = new DataSet(); * var r = ds.relationBuilder.withId(8765).create({tags: {type: \"network\"}}); * ds.has(r); // --&gt; true * * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name relationBuilder * @property {module:josm/builder~RelationBuilder} relationBuilder the relation builder for this dataset * @readOnly * @instance * @summary the builder for creating {@class org.openstreetmap.josm.data.osm.Relation}s */ exports.mixin.relationBuilder = { get: function() { return RelationBuilder.forDataSet(this); } }; /** * Replies the dataset selection object. * * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name selection * @property {module:josm/mixin/DataSetMixin~DataSetSelectionFacade} selection a handler for the selected objects in the dataset * @summary to manipulate the selected objects in the dataset * @instance */ exports.mixin.selection = { get: function() { return new DataSetSelectionFacade(this); } }; /** * Queries the dataset * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;query(josmSearchExpression,?options)&lt;/code&gt; * &lt;/dt&gt; * &lt;dd&gt;Queries the dataset using the JOSM search expression * &lt;code&gt;josmSearchExpression&lt;/code&gt;. * &lt;code&gt;josmSearchExpression&lt;/code&gt; is a string as you would enter it in * the JOSM search dialog. &lt;code&gt;options&lt;/code&gt; is an (optional) object * with named parameters, see below.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;query(predicate,?options)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Queries the dataset using a javascript predicate function * &lt;code&gt;predicate&lt;/code&gt;. &lt;code&gt;predicate&lt;/code&gt; is a javascript * function which accepts a object as parameter and replies * true, when it matches for the object ans false otherwise. * &lt;code&gt;options&lt;/code&gt; is an (optional) object with named parameters, * see below.&lt;/dd&gt; * &lt;/dl&gt; * * The parameter &lt;code&gt;options&lt;/code&gt; consist of the following (optional) * named parameters: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;allElements&lt;/code&gt; : boolean * (Deprecated parameter names: * &lt;code class=\"signature\"&gt;all&lt;/code&gt;)&lt;/dt&gt; * &lt;dd&gt;If true, searches &lt;em&gt;all&lt;/em&gt; objects in the dataset. If false, * ignores incomplete or deleted * objects. Default: false.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;caseSensitive&lt;/code&gt; : boolean&lt;/dt&gt; * &lt;dd&gt;&lt;strong&gt;Only applicable for searches with a JOSM search * expression&lt;/strong&gt;. If true, searches case sensitive. If false, * searches case insensitive. Default: false.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;regexSearch&lt;/code&gt; : boolean (Deprecated * parameter names: * &lt;code class=\"signature\"&gt;withRegexp&lt;/code&gt;, * &lt;code class=\"signature\"&gt;regexpSearch&lt;/code&gt;)&lt;/dt&gt; * &lt;dd&gt;&lt;strong&gt;Only applicable for searches with a JOSM search * expression&lt;/strong&gt;. If true, the search expression contains regular * expressions. If false, it includes only plain strings for searching. * Default: false.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;mapCSSSearch&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;&lt;strong&gt;Only applies for searches with a JOSM search * expression&lt;/strong&gt;. * Default: false.&lt;/dd&gt; * &lt;/dl&gt; * * @param {string|function} expression the match expression * @param {object} [options] additional named parameters * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name query * @summary Queries the dataset. * @function * @instance */ exports.mixin.query = function(expression, options) { var collection; var SearchAction = org.openstreetmap.josm.actions.search.SearchAction; var SearchSetting = org.openstreetmap.josm.data.osm.search.SearchSetting; var SearchCompiler = org.openstreetmap.josm.data.osm.search.SearchCompiler; options = options || {}; switch(arguments.length){ case 0: return []; case 1: case 2: if (util.isString(expression)) { var ss = new SearchSetting(); ss.caseSensitive = Boolean(options.caseSensitive); ss.regexSearch = Boolean(options.regexSearch) || Boolean(options.regexpSearch) || Boolean(options.withRegexp); ss.allElements = Boolean(options.all) || Boolean(options.allElements); ss.mapCSSSearch = Boolean(options.mapCSSSearch); ss.text = expression; var matcher = SearchCompiler.compile(ss); var predicate= function josmSearchExpressionPredicate(matcher) { return function(obj) { return matcher.match(obj); }; }; var collection = ss.allElements ? this.allPrimitives() : this.allNonDeletedCompletePrimitives(); return collect(collection, predicate(matcher)); } else if (util.isFunction(expression)) { var collection = options.all ? this.allPrimitives() : this.allNonDeletedCompletePrimitives(); return collect(collection, expression); } else { util.assert(false, \"expression: Unexpected type of argument, got {0}\", arguments[0]); } break; default: util.assert(false, \"Expected a predicate, got {0} arguments\", arguments.length); } }; /** * Iterates over the objects in the dataset. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;each(delegate,?options)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Iterates over the objects in the dataset and invokes * &lt;code&gt;delegate&lt;/code&gt; for each object. If null or undefined, the iteration * is skipped. Expects a function with the following signature: * &lt;pre&gt; * function(obj) {} // when invoked, obj is a node, a way, or a relation * &lt;/pre&gt; * &lt;code&gt;options&lt;/code&gt; is an (optional) object with named parameters, * see below. * &lt;/dd&gt; * &lt;/dl&gt; * * The parameter &lt;code&gt;options&lt;/code&gt; consists of the following (optional) * named parameters: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;all&lt;/code&gt; : boolean&lt;/dt&gt; * &lt;dd&gt;If true, searches &lt;em&gt;all&lt;/em&gt; objects in the dataset. If false, * ignores incomplete or deleted * objects. Default: false.&lt;/dd&gt; * &lt;/dl&gt; * * @param {function} delegate the function invoked on every element * @param {object} [options] additional named parameters * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @name each * @summary Iterates over the dataset. * @function * @instance */ exports.mixin.each = function(delegate, options){ if (util.isNothing(delegate)) return; util.assert(util.isFunction(delegate), \"delegate: expected a function, got {0}\", delegate); options = options || {}; util.assert(typeof options === \"object\", \"options: expected an object, got {0}\", options); var collection = options.all ? this.allPrimitives() : this.allNonDeletedCompletePrimitives(); each(collection, delegate); }; /** * Loads a dataset from a file. * * Derives the format of the file from the file suffix, unless the named * option &lt;code&gt;options.format&lt;/code&gt; is set. * * &lt;code&gt;options&lt;/code&gt; can contain the following named options: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;format&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;one of the strings \"osm\" (Open Street Map XML data), \"osc\" * (Open Street Map change format), \"osm.bz2\" (Open Street Map XML data, * compressed with bzip2), or \"osm.gz\" (Open Street Map XML data, * compressed with gzip). Value is normalized by removing leading and * trailing whitespace and conversion to lower case.&lt;/dd&gt; * &lt;/dl&gt; * * @example * // loads OSM data from a data file * var ds1 = DataSet.load(\"/tmp/my-data.osm\"); * * // loads OSM data from a data file, the format is compressed OSM xml * var ds2 = DataSet.load(\"/tmp/my-data.ogz\", {format: \"osm.gz\"}); * * @param {string|java.io.File} source the data source. Either a file * name as string or a java.io.File * @param {object} [options] optional named parameters * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin * @static * @name load * @summary Loads a dataset from a file. * @function */ exports.mixin.load = function(source, options){ var io = java.io; var jio = org.openstreetmap.josm.io; var jtools = org.openstreetmap.josm.tools; var GZIPInputStream = java.util.zip.GZIPInputStream; var oCBZip2InputStream = org.apache.tools.bzip2.CBZip2InputStream; function normalizeFile(source) { if (source instanceof io.File) { return source; } else if (util.isString(source)) { return new io.File(source); } else { util.assert(false, \"source: illegal value, expected string or File, got {0}\", source); } }; function normalizeFormat(source, options){ var FORMATS = { \"osm\" :true, \"osc\" :true, \"osm.bz2 \":true, \"osm.gz\" :true }; if (util.isSomething(options.format)) { // convert to string var format = util.trim(options.format + \"\").toLowerCase(); if (FORMATS[format] === true) return format; util.assert(false, \"options.format: unknown format ''{0}''\", format); } else { if (new jio.OsmImporter().acceptFile(source)) return \"osm\"; if (new jio.OsmChangeImporter().acceptFile(source)) return \"osc\"; if (new jio.OsmBzip2Importer().acceptFile(source)) return \"osm.bz2\"; if (new jio.OsmGzipImporter().acceptFile(source)) return \"osm.gz\"; util.assert(false, \"Failed to derive format from file name. file is ''{0}''\", source); } }; util.assert(util.isSomething(source), \"source: must not be null or undefined\"); options = options || {}; source = normalizeFile(source); var format = normalizeFormat(source, options); var is = null; try { if (format == \"osm\") { is = new io.FileInputStream(source); return jio.OsmReader.parseDataSet(is, null /* null progress monitor */); } else if (format == \"osc\") { is = new io.FileInputStream(source); return jio.OsmChangeReader.parseDataSet(is, null /* null progress monitor */); } else if (format == \"osm.gz\") { is = new GZIPInputStream(new io.FileInputStream(source)); return jio.OsmReader.parseDataSet(is, null /* null progress monitor */); } else if (format == \"osm.bz2\") { var bis = new io.BufferedInputStream( new io.FileInputStream(source)); // skip the first two ints, the magic 'Bz' sequence bis.read(); bis.read(); is = new CBZip2InputStream(bis); return jio.OsmReader.parseDataSet(is, null /* null progress monitor */); } util.assert(false, \"should not happen\"); } finally { is &amp;&amp; jtools.Utils.close(is); } }; exports.mixin.load.static = true; /** * Saves the dataset to a file (in OSM XML format). * * &lt;code&gt;options&lt;/code&gt; can contain the following named options: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;version&lt;/code&gt;: string&lt;/dt&gt; * &lt;dd&gt;the value of the attribute &lt;code&gt;version&lt;/code&gt; in the OSM file * header. Default: \"0.6\"&lt;/dd&gt; * * &lt;dt&gt;&lt;codeclass=\"signature\"&gt;changeset&lt;/code&gt;: Changeset&lt;/dt&gt; * &lt;dd&gt;the changeset whose id is included in the attribute * &lt;code&gt;changeset&lt;/code&gt; on every OSM object. If undefined, includes the * individual &lt;code&gt;changeset&lt;/code&gt; attribute of the OSM object. * Default: undefined&lt;/dd&gt; * &lt;/dl&gt; * * @example * var ds = ....; // create and populate a dataset * // save the data * ds.save(\"/tmp/data.osm\"); * * @param {string|java.io.File} target the target file. Either a file * name as string or a java.io.File * @param {object} [options] optional named parameters * @name save * @summary Saves a dataset to a file. * @function * @memberOf module:josm/mixin/DataSetMixin~DataSetMixin */ exports.mixin.save = function(target, options) { var io = java.io; var Utils = org.openstreetmap.josm.tools.Utils; var OsmWriter = org.openstreetmap.josm.io.OsmWriter; var OsmWriterFactory = org.openstreetmap.josm.io.OsmWriterFactory; var Changeset = org.openstreetmap.josm.data.osm.Changeset; function normalizeTarget(target) { util.assert(util.isSomething(target), \"target: must not be null or undefined\"); if (util.isString(target)) { return new io.File(target); } else if (target instanceof io.File) { return target; } else { util.assert(false, \"target: unexpected type of value, got {0}\", target); } }; function normalizeOptions(options){ options = options || {}; util.assert(!util.isDef(options.version) || util.isString(options.version), \"options.version: expected a string, got {0}\", options.version); options.version = options.version ? util.trim(options.version) : null /* default version */; var changeset = options.changeset; util.assert(!util.isDef(changeset) || changeset instanceof Changeset, \"options.changeset: expected a changeset, got {0}\", changeset); return options; }; target = normalizeTarget(target); options = normalizeOptions(options); var pw = null; try { pw = new io.PrintWriter(new io.FileWriter(target)); var writer = new OsmWriterFactory.createOsmWriter(pw, false, options.version); options.changeset &amp;&amp; writer.setChangeset(options.changeset); try { this.getReadLock().lock(); writer.header(); writer.writeContent(this); writer.footer(); } finally { this.getReadLock().unlock(); } } finally { pw &amp;&amp; pw.close(); } }; /** * Creates a facade * * @class * @name DataSetSelectionFacade * @param {org.openstreetmap.josm.data.osm.DataSet} ds the dataset. * Must not be null or undefined. * @summary Creates a facade */ exports.DataSetSelectionFacade = function(ds) { util.assert(util.isSomething(ds), \"ds: must not be null or undefined\"); util.assert(ds instanceof DataSet, \"ds: expected a DataSet, got {0}\", ds); this._ds = ds; }; /** * Set the selected objects as selected. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;set(p1,p2, ...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Selects a variable number of primitives.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;set(array|collection)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Select a variable number of primitives given by an array or a * java collection of primitives.&lt;/dd&gt; * &lt;/dl&gt; * * Each primitive {@code p} is either an instance of aa node, a way, or * a relation, or an instance of * {@class org.openstreetmap.josm.data.osm.PrimitiveId}. * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @function * @instance * @name set * @summary Set the selected objects as selected. * @param {...primitive | array | java.uitl.Collection} primitives see description */ exports.DataSetSelectionFacade.prototype.set = function() { var ids = normalizeIds(arguments); if (ids.length == 0) return; if (ids.length == 0){ this._ds.clearSelection(); } else { this._ds.setSelected(ids); } }; /** * Adds selected objects. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;add(p1,p2,...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Selects a variable number of primitives. &lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;add(array|collection)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Select a variable number of primitives given by an array or a * java collection of primitives.&lt;/dd&gt; * &lt;/dl&gt; * * Each primitive {@code p} is either an instance of aa node, a way, or * a relation, or an instance of * {@class org.openstreetmap.josm.data.osm.PrimitiveId}. * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @function * @instance * @name add * @summary Adds selected objects * @param {...primitive | array | java.util.Collection} primitives see description */ exports.DataSetSelectionFacade.prototype.add = function() { var ids = normalizeIds(arguments); if (ids.length == 0) return; this._ds.addSelected(ids); }; /** * Unselects a collection of objects. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;clear(p1,p2, ...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Unselect a variable number primitives.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;clear(array|collection)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Unselect a variable number of primitives given by an array or a * java collection of primitives.&lt;/dd&gt; * &lt;/dl&gt; * * Each primitive {@code p} is either an instance of aa node, a way, or * a relation, or an instance of * {@class org.openstreetmap.josm.data.osm.PrimitiveId}. * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @function * @instance * @name clear * @summary Unselects a collection of objects * @param {...primitive | array | java.util.Collection} primitives see description */ exports.DataSetSelectionFacade.prototype.clear = function() { var ids = normalizeIds(arguments); if (ids.length == 0) return; this._ds.clearSelection(ids); }; /** * Clear the selection. * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @function * @instance * @name clearAll * @summary Clear the selection */ exports.DataSetSelectionFacade.prototype.clearAll = function() { // clearSelection has multiple overloaded variants. Make sure to call // the one with no arguments. this._ds[\"clearSelection()\"](); }; /** * Toggle the selection state of a collection of objects. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;toggle(p1,p2, ...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Toggle the selection state of a variable number of primitives.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;toggle(array|collection)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Toggle the selection state of variable number of primitives given by * an array or a java collection of ids.&lt;/dd&gt; * &lt;/dl&gt; * * Each primitive {@code p} is either an instance of aa node, a way, or * a relation, or an instance of * {@class org.openstreetmap.josm.data.osm.PrimitiveId}. * * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @function * @instance * @name toggle * @summary Toggle the selection state of a collection of objects */ exports.DataSetSelectionFacade.prototype.toggle = function() { var ids = normalizeIds(arguments); if (ids.length == 0) return; this._ds.toggleSelected(ids); }; /** * Replies true, if an object is currently selected. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;isSelected(id, type)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies true, if the object with numeric id &lt;code&gt;id&lt;/code&gt; and * type &lt;code&gt;type&lt;/code&gt; is selected.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;isSelected(id)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies true, if the object with id &lt;code&gt;id&lt;/code&gt; is selected. * &lt;code&gt;id&lt;/code&gt; is either an instance of * {@class org/openstreetmap/josm/data/osm/PrimitiveId} or an object with * the properties &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt;, * i.e. &lt;code&gt;{id: 1234, type: \"node\"}&lt;/code&gt;&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;isSelected(obj)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Replies true, if the object &lt;code&gt;obj&lt;/code&gt; is selected. obj is * either a * {@class org/openstreetmap/josm/data/osm/Node}, * a {@class org/openstreetmap/josm/data/osm/Way}, or a * {@class org/openstreetmap/josm/data/osm/Relation}.&lt;/dd&gt; * &lt;/dl&gt; * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @function * @instance * @name isSelected * @alias has * @returns {boolean} true, if the primitive is selected * @summary true, if an object is currently selected * @param {primitive | id} primitive see description */ exports.DataSetSelectionFacade.prototype.isSelected = function() { var args = Array.prototype.slice.call(arguments,0); function isSelected_1(ds) { var id = args[0]; util.assert(util.isSomething(id), \"id: must not be null or undefined\"); if (id instanceof PrimitiveId) { var obj = ds.getPrimitiveById(id); return obj == null ? false : ds.isSelected(obj); } else if (id instanceof OsmPrimitive) { return ds.isSelected(obj); } else if (typeof id === \"object\") { var obj = ds.getPrimitiveById(primitiveIdFromObject(id)); return obj == null ? false : ds.isSelected(obj); } else { util.assert(false, \"id: unexpected value, got {0}\", id); } }; function isSelected_2(ds) { var obj = ds.getPrimitiveById( new SimplePrimitiveId( normalizeId(args[0]), normalizeType(args[1]) ) ); return obj == null ? false : ds.isSelected(obj); }; switch(arguments.length){ case 0: util.assert(false, \"Expected 1 or 2 arguments, got none\"); case 1: return isSelected_1(this._ds); case 2: return isSelected_2(this._ds); default: util.assert(false, \"Expected 1 or 2 arguments, got {0}\", args.length); } }; exports.DataSetSelectionFacade.prototype.has = exports.DataSetSelectionFacade.prototype.isSelected; /** * Replies an array with the selected nodes. * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @name nodes * @property {array} nodes the selected nodes * @instance * @readOnly * @summary an array with the selected nodes */ Object.defineProperty(exports.DataSetSelectionFacade.prototype, \"nodes\", { get: function() { return colToArray(this._ds.getSelectedNodes()); } }); /** * Replies an array with the selected ways. * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @name ways * @property {array} ways the selected ways * @instance * @readOnly * @summary an array with the selected ways */ Object.defineProperty(exports.DataSetSelectionFacade.prototype, \"ways\", { get: function() { return colToArray(this._ds.getSelectedWays()); } }); /** * Replies an array with the selected relations. * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @name relations * @property {array} relations the selected relations * @instance * @readOnly * @summary an array with the selected relations */ Object.defineProperty(exports.DataSetSelectionFacade.prototype, \"relations\", { get: function() { return colToArray(this._ds.getSelectedRelations()); } }); /** * Replies an array with the selected objects. * * @memberOf module:josm/mixin/DataSetMixin~DataSetSelectionFacade * @name objects * @property {array} objects the selected primitives * @instance * @readOnly * @summary an array with the selected object */ Object.defineProperty(exports.DataSetSelectionFacade.prototype, \"objects\", { get: function() { return colToArray(this._ds.getSelected()); } }); Ã— Search results Close "},"josm_mixin_JSActionMixin.js.html":{"id":"josm_mixin_JSActionMixin.js.html","title":"Source: josm/mixin/JSActionMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/JSActionMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class * {@class org.openstreetmap.josm.plugins.scripting.js.JSAction}. * * @module josm/mixin/JSActionMixin */ var util = require(\"josm/util\"); var Preferences = org.openstreetmap.josm.data.Preferences; /** * This mixin is auto-loaded by the scripting plugin and mixed into the * native java class * {@class org.openstreetmap.josm.plugins.scripting.js.JSAction}. It * provides additional properties and methods which you can invoke on an * instance of * {@class org.openstreetmap.josm.plugins.scripting.js.JSAction}. * * @mixin JSActionMixin * @forClass org.openstreetmap.josm.plugins.scripting.js.JSAction */ exports.mixin = {}; exports.forClass = org.openstreetmap.josm.plugins.scripting.js.JSAction; /** * Set or get the function to be called when the &lt;em&gt;enabled&lt;/em&gt; state * should be initialized. * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the function or undefined, if no function has been assigned. * &lt;/dd&gt; * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Set the function, null, or undefined to remove the function.&lt;/dd&gt; * &lt;/dl&gt; * * @memberOf module:josm/mixin/JSActionMixin~JSActionMixin * @name onInitEnabled * @property {function} onInitEnabled callback * @summary Set or get the function to be called when the &lt;em&gt;enabled&lt;/em&gt; * state of the action should be reevaluated. * @instance */ exports.mixin.onInitEnabled = { get: function() { var value = this.$getOnInitEnabled(); return value == null ? undefined: value; }, set: function(fun) { if (util.isSomething(fun)) { util.assert(util.isFunction(fun), \"fun: expected a function, got {0}\", fun); } else { fun = null; } this.$setOnInitEnabled(fun); } }; /** * Set or get the function to be called when the &lt;em&gt;enabled&lt;/em&gt; state of * the action should be reevaluated. * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the function or undefined, if no function has been assigned. * &lt;/dd&gt; * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Set the function, null, or undefined to remove the function.&lt;/dd&gt; * &lt;/dl&gt; * * @memberOf module:josm/mixin/JSActionMixin~JSActionMixin * @name onUpdateEnabled * @property {function} onUpdateEnabled callback * @summary Set or get the function to be called when the &lt;em&gt;enabled&lt;/em&gt; * state of the action should be reevaluated. * @instance */ exports.mixin.onUpdateEnabled = { enumerable: true, get: function() { var value = this.$getOnUpdateEnabled(); return value == null ? undefined : value; }, set: function(fun) { if (util.isSomething(fun)) { util.assert(util.isFunction(fun), \"fun: expected a function, got {0}\", fun); } else { fun = null; } this.$setOnUpdateEnabled(fun); } }; /** * Set or get the function to be called when the action is executed. * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the function or undefined, if no function has been assigned. * &lt;/dd&gt; * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Set the function, null, or undefined to remove the function.&lt;/dd&gt; * &lt;/dl&gt; * * @memberOf module:josm/mixin/JSActionMixin~JSActionMixin * @name onExecute * @property {function} onExecute callback * @summary Set or get the function to be called when the action is executed. * @instance */ exports.mixin.onExecute = { get: function() { var value = this.$getOnExecute(); return value == null ? undefined : value; }, set: function(fun) { if (util.isSomething(fun)) { util.assert(util.isFunction(fun), \"fun: expected a function, got {0}\", fun); } else { fun = null; } this.$setOnExecute(fun); } }; /** * Set or get the name. * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the name as string, or undefined, if no name is set. &lt;/dd&gt; * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Set null or undefined to clear the name. Any other value is converted * to a string.&lt;/dd&gt; * &lt;/dl&gt; * * @memberOf module:josm/mixin/JSActionMixin~JSActionMixin * @name name * @property {string} name the action name * @summary Set or get the name. * @instance */ exports.mixin.name = { get: function() { var Action = javax.swing.Action; var value = this.getValue(Action.NAME); return value == null ? undefined: value; }, set: function(value) { var Action = javax.swing.Action; value = util.isNothing(value) ? null : String(value); this.putValue(Action.NAME, value); } }; /** * Set or get the tooltip text. * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the tooltip as string, or undefined, if no tooltip is set. * &lt;/dd&gt; * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Set null or undefined to clear the tooltip. Any other value is * converted to a string.&lt;/dd&gt; * &lt;/dl&gt; * * @memberOf module:josm/mixin/JSActionMixin~JSActionMixin * @name tooltip * @property {string} tooltip the action tooltip * @summary Set or get the tooltip text. * @instance */ exports.mixin.tooltip = { get: function() { var Action = javax.swing.Action; var value = this.getValue(Action.SHORT_DESCRIPTION); return value == null ? undefined: value; }, set: function(value) { var Action = javax.swing.Action; value = util.isNothing(value) ? null : String(value); this.putValue(Action.SHORT_DESCRIPTION, value); } }; /** * Adds an action to a menu. * * @example * var JSAction = require(\"josm/ui/menu\").JSAction; * * // adds a new action to the JOSM edit menu * new JSAction({name: \"My Action\"}) * .addToMenu(josm.menu.get(\"edit\")); * * @name addToMenu * @summary Adds an action to a menu. * @memberOf module:josm/mixin/JSActionMixin~JSActionMixin * @param {java.swing.JMenu} menu the menu. This should be one of the global * JOSM menus. * @param {number} [index] the index where to add the menu. * Default if missing: adds the menu at the end * @function * @instance */ exports.mixin.addToMenu = function(menu, index) { var MainMenu = org.openstreetmap.josm.gui.MainMenu; util.assert(util.isSomething(menu), \"menu: must not be null or undefined\"); util.assert(menu instanceof javax.swing.JMenu, \"menu: expected a JMenu, got {0}\", menu); if (util.isDef(index)) { util.assert(util.isNumber(index), \"index: expected a number, got {0}\", index); util.assert(index &gt;= 0, \"index: expected a number &gt;= 0, got {0}\", index); } // FIXME support for named options // options = options || {}; // util.assert(typeof options === \"object\", \"options: expected an object, // got {0}\", options); // var inExpertModeOnly = util.isDef(options.inExpertModeOnly) // ? false : Boolean(options.inExpertModeOnly); var inExpertModeOnly = false; if (util.isDef(index)) { MainMenu.add(menu, this, inExpertModeOnly, index); } else { MainMenu.add(menu, this, inExpertModeOnly); } }; function atFromOptions(options) { if (!options || !util.isDef(options.at)) return undefined; if (util.isString(options.at)) { var at = util.trim(options.at).toLowerCase(); switch(at) { case \"start\": return 0; case \"end\": return -1; default: util.assert(false, \"at: unsupported string value, got ''{0}''\", options.at); } } else if (util.isNumber(options.at)) { util.assert(options.at &gt;= 0, \"at: expected number &gt;= 0, got {0}\", options.at); return options.at; } else { util.assert(false, \"at: unsupported value, got {0}\", options.at); } }; function beforeFromOptions(options) { if (!options || !options.before) return undefined; if (util.isString(options.before)) return util.trim(options.before); util.assert(false, \"before: unsupported value, got {0}\", options.before); }; function afterFromOptions(options) { if (!options || !options.after) return undefined; if (util.isString(options.after)) return util.trim(options.after); util.assert(false, \"after: unsupported value, got {0}\", options.after); }; /** * Adds an action to the toolbar. * * If no parameters are passed in, the action is registered with its * toolbar id (see property tooblarId) for being displayed in the toolbar. * It isn't displayed, however, unless the toolbar id is already included * in the toolbar preferences. If not, the user first has to configure it * manually in the preference dialog. * * Use one of the named options described below to display the the action at a a specific position in the toolbar. * If you use one of these options, the toolbar configuration is saved * to the preferences. * * &lt;code&gt;options&lt;/code&gt; support the following named parameters: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;toolbarId: string&lt;/code&gt; &lt;/dt&gt; * &lt;dd&gt;Optional toolbar id, overriding an already assigned toolbar id.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;at: number, \"start\", \"end\"&lt;/code&gt; &lt;/dt&gt; * &lt;dd&gt;Display the toolbar entry at a specific position, at the start or at * the end of the toolbar.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;after: string&lt;/code&gt; &lt;/dt&gt; * &lt;dd&gt;Display the toolbar entry after the entry with toolbar * id &lt;code&gt;after&lt;/code&gt;.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;before: string&lt;/code&gt; &lt;/dt&gt; * &lt;dd&gt;Display the toolbar entry before the entry with toolbar * id &lt;code&gt;before&lt;/code&gt;.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var JSAction = require(\"josm/ui/menu\").JSAction; * var action = new JSAction({name: \"My Action\", toolbarId: \"myaction\"}); * * // add the action after the \"open\" action in the toolbar * action.addToToolbar({after: \"open\"}); * * // add the action at the end of the toolbar * action.addToToolbar({at: \"end\"}); * * @name addToToolbar * @summary Adds an action to the toolbar. * @memberOf module:josm/mixin/JSActionMixin~JSActionMixin * @param {objects} [options] named parameters * @function * @instance */ exports.mixin.addToToolbar = function(options) { var Preferences = org.openstreetmap.josm.data.Preferences; var MainApplication = org.openstreetmap.josm.gui.MainApplication; var ArrayList = java.util.ArrayList; options = options || {}; util.assert(typeof options === \"object\", \"options: expected an object, got {0}\", options); if (util.isSomething(options.toolbarId)) { this.putValue(\"toolbarId\", String(options.toolbarId)); } MainApplication.getToolbar().register(this); var toolbarId = this.getValue(\"toolbarId\"); var toolbarPrefs = new ArrayList( Preferences.main().getList(\"toolbar\",new ArrayList())); // The following is clumsy. We have to fiddle with preference settings // in order to display a toolbar entry at a specific position // var at = atFromOptions(options); var before = beforeFromOptions(options); var after = afterFromOptions(options); // if we got the parameter 'at', we add the toolbar entry at this position // if (util.isDef(at)) { if (at == -1) { toolbarPrefs.remove(toolbarId); toolbarPrefs.add(toolbarId); } else { toolbarPrefs.remove(toolbarId); toolbarPrefs.add(Math.min(toolbarPrefs.size(), at), toolbarId); } Preferences.main().putList(\"toolbar\", toolbarPrefs); } else if (util.isDef(after)) { // if we got the parameter 'after', we try to insert it after the // entry given as value for 'after' // var at = toolbarPrefs.indexOf(after); if (at != -1) { toolbarPrefs.remove(toolbarId); toolbarPrefs.add(at + 1, toolbarId); } Preferences.main().putList(\"toolbar\", toolbarPrefs); } else if (util.isDef(before)) { // if we got the parameter 'before', we try to insert it before the // entry given as value for 'before' // var at = toolbarPrefs.indexOf(before); if (at != -1) { toolbarPrefs.remove(toolbarId); toolbarPrefs.add(at, toolbarId); } Preferences.main().putList(\"toolbar\", toolbarPrefs); } MainApplication.getToolbar().refreshToolbarControl(); }; Ã— Search results Close "},"josm_mixin_LatLonMixin.js.html":{"id":"josm_mixin_LatLonMixin.js.html","title":"Source: josm/mixin/LatLonMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/LatLonMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.data.coor.LatLon}. * * @module josm/mixin/LatLonMixin */ var util = require(\"josm/util\"); var LatLon = org.openstreetmap.josm.data.coor.LatLon; /** * This mixin provides additional properties and methods which you can * invoke on an instance of * {@class org.openstreetmap.josm.data.coor.LatLon}. * * @mixin LatLonMixin * @forClass org.openstreetmap.josm.data.coor.LatLon * */ exports.mixin = {}; exports.forClass = org.openstreetmap.josm.data.coor.LatLon; /** * Get the latitude. * * @example * var LatLon = org.openstreetmap.josm.data.coor.LatLon; * * // set members * var pos = new LatLon(1,2); * pos.lat; // -&gt; 1 * * // you can still invoke the native java method lat(), just add $ as prefix. * // Note the parentheses - the native method has to be called as function! * pos.$lat(); // -&gt; 1 * * @memberOf module:josm/mixin/LatLonMixin~LatLonMixin * @name lat * @property {number} lat latitude * @readOnly * @summary Get the latitude. * @instance */ exports.mixin.lat = { get: function() { return this.$lat(); } }; /** * Get the longitude. * * @example * var LatLon = org.openstreetmap.josm.data.coor.LatLon; * * // set members * var pos = new LatLon(1,2); * pos.lon; // -&gt; 2 * * // you can still invoke the native java method lon(), just add $ as prefix. * // Note the parentheses - the native method has to be called as function! * pos.$lon(); // -&gt; 1 * * @memberOf module:josm/mixin/LatLonMixin~LatLonMixin * @name lon * @property {number} lon longitude * @readOnly * @summary Get the longitude. * @instance */ exports.mixin.lon = { get: function() { return this.$lon(); } }; /** * Creates a {@class org.openstreetmap.josm.data.coor.LatLon} from a * javascript object. * * @example * var pos = LatLon.make({lat: 1, lon: 2}); * * @param {object} obj a javascript object with two number properties * &lt;code&gt;lat:&lt;/code&gt; and * &lt;code&gt;lon:&lt;/code&gt; * @memberOf module:josm/mixin/LatLonMixin~LatLonMixin * @name make * @static * @returns {org.openstreetmap.josm.data.coor.LatLon} * @summary Create a {@class org.openstreetmap.josm.data.coor.LatLon} * from a javascript object. * @function */ exports.mixin.make = function(obj) { util.assert(util.isSomething(obj), \"obj: must not be null or undefined\"); util.assert(typeof obj === \"object\", \"obj: expected an object, got {0}\", obj); util.assert(util.isNumber(obj.lat), \"obj.lat: expected a number, got {0}\", obj.lat); util.assert(util.isNumber(obj.lon), \"obj.lon: expected a number, got {0}\", obj.lon); util.assert(LatLon.isValidLat(obj.lat), \"obj.lat: expected a valid lat in the range [-90,90], got {0}\", obj.lat); util.assert(LatLon.isValidLon(obj.lon), \"obj.lon: expected a valid lon in the range [-180,180], got {0}\", obj.lon); return new LatLon(obj.lat, obj.lon); }; exports.mixin.make.static=true; Ã— Search results Close "},"josm_mixin_NodeMixin.js.html":{"id":"josm_mixin_NodeMixin.js.html","title":"Source: josm/mixin/NodeMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/NodeMixin.js /** * &lt;p&gt;This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.data.osm.Node}.&lt;/p&gt; * * @module josm/mixin/NodeMixin */ var util = require(\"josm/util\"); var LatLon = org.openstreetmap.josm.data.coor.LatLon; /** * &lt;p&gt;This mixin is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.data.osm.Node}. It * provides additional properties and methods which you can invoke on an * instance of * {@class org.openstreetmap.josm.data.osm.Node}.&lt;/p&gt; * * @mixin NodeMixin * @extends OsmPrimitiveMixin * @forClass org.openstreetmap.josm.data.osm.Node */ exports.mixin = {}; exports.forClass = org.openstreetmap.josm.data.osm.Node; /** * &lt;p&gt;Get or set the node latitude.&lt;/p&gt; * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the current latitude, or undefined, if the latitude isn't * known.&lt;/dd&gt; * * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Assign the latitude. Expects a number in the range [-90,90]. * Raises an error, if the node is a proxy node.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var nb = require(\"josm/builder\").NodeBuilder; * * // set members * var n = nb.create(); * n.lat = 23.245; * n.lat; // -&gt; 23.245 * * @memberOf module:josm/mixin/NodeMixin~NodeMixin * @name lat * @property {number} lat latitude * @summary Get or set the node latitude. * @instance */ exports.mixin.lat = { get: function() { if (this.isIncomplete || this.getCoor() == null) return undefined; return this.getCoor().$lat(); }, set: function(lat) { util.assert(! this.isIncomplete, \"Can't set lat on an incomplete node\"); util.assert(util.isNumber(lat), \"Expected a number, got {0}\", lat); util.assert(LatLon.isValidLat(lat), \"Expected a valid lat in the range [-90,90], got {0}\", lat); var oldlat = this.lat; var coor = this.getCoor(); if (coor == null) coor = new LatLon(0,0); coor = new LatLon(lat, coor.$lon()); this.setCoor(coor); if (oldlat != this.lat &amp;&amp; !this.modified) this.modified = true; } }; /** * &lt;p&gt;Get or set the node longitude.&lt;/p&gt; * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the current longitude, or undefined, if the longitude isn't * known.&lt;/dd&gt; * * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Assign the longitude. Expects a number in the range [-180,180]. * Raises an error, if the node is a proxy node.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var nb = require(\"josm/builder\").NodeBuilder; * * // set members * var n = nb.create(); * n.lon = -120.78; * n.lon; // -&gt; -120.78; * * * @memberOf module:josm/mixin/NodeMixin~NodeMixin * @name lon * @property {number} lon longitude * @summary Get or set the node longitude. * @instance */ exports.mixin.lon = { get: function() { if (this.isIncomplete || this.getCoor() == null) return undefined; return this.getCoor().$lon(); }, set: function(lon) { util.assert(! this.isIncomplete, \"Can''t set lon on an incomplete node\"); util.assert(util.isNumber(lon), \"Expected a number, got {0}\", lon); util.assert(LatLon.isValidLon(lon), \"Expected a valid lon in the range [-180,180], got {0}\", lon); var oldlon = this.lon; var coor = this.getCoor(); if (coor == null) coor = new LatLon(0,0); coor = new LatLon(coor.$lat(), lon); this.setCoor(coor); if (oldlon != this.lon &amp;&amp; !this.modified) this.modified = true; } }; /** * &lt;p&gt;Get the projected east coordinate, or undefined, if the projected east * coordinate isn't known.&lt;/p&gt; * * @example * var nb = require(\"josm/builder\").NodeBuilder; * * // set members * var n = nb.create(); * n.east; * * @memberOf module:josm/mixin/NodeMixin~NodeMixin * @name east * @readOnly * @property {number} east projected east coordinate * @summary Get the projected east coordinate. * @instance */ exports.mixin.east= { get: function() { if (this.isIncomplete || this.getEastNorth() == null) return undefined; return this.getEastNorth().east(); } }; /** * &lt;p&gt;Get the projected north coordinate, or undefined, if the projected * north coordinate isn't known.&lt;/p&gt; * * @example * var nb = require(\"josm/builder\").NodeBuilder; * * // set members * var n = nb.create(); * n.north; * * @memberOf module:josm/mixin/NodeMixin~NodeMixin * @name north * @readOnly * @property {number} north projected north coordinate * @summary Get the projected north coordinate. * @instance */ exports.mixin.north = { get: function() { if (this.isIncomplete || this.getEastNorth() == null) return undefined; return this.getEastNorth().north(); } }; /** * &lt;p&gt;Get or set the node position.&lt;/p&gt; * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;replies an instance of * {@class org.openstreetmap.josm.data.coor.LatLon} or * undefined, if the position isn't known.&lt;/dd&gt; * * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Assign the position. Either an instance of * {@class org.openstreetmap.josm.data.coor.LatLon} * or an object with the properties &lt;code&gt;{lat: ..., lon: ...}&lt;/code&gt;&lt;/dd&gt; * &lt;/dl&gt; * * @example * var LatLon = org.openstreetmap.josm.data.coor.LatLon; * var nb = require(\"josm/builder\").NodeBuilder; * * // assign a LatLon as position * n.pos = new LatLon(23, 32.33); * * // assign an object as position * n.pos = {lat: 23, lon: 32.33}; * * // get the position * n.pos; // -&gt; a LatLon with the position * * @memberOf module:josm/mixin/NodeMixin~NodeMixin * @name pos * @property {org.openstreetmap.josm.data.coor.LatLon} pos position of the node * @summary Get or set the node position. * @instance */ exports.mixin.pos = { get: function() { if (this.isIncomplete || this.getCoor() == null) return undefined; return this.getCoor(); }, set: function(coor) { util.assert(util.isSomething(coor), \"value must not be null or undefined\"); util.assert(!this.isIncomplete, \"Can''t set a position on an incomplete node\"); var oldpos = this.pos; if (coor instanceof LatLon) { this.setCoor(coor); } else if (typeof coor === \"object\") { var pos = LatLon.make(coor); this.setCoor(pos); } else { util.assert(false, \"Unexpected type of value, got {0}\", coor); } if (!util.javaEquals(oldpos, this.pos) &amp;&amp; !this.modified) this.modified = true; } }; exports.mixin = util.mix(require(\"josm/mixin/OsmPrimitiveMixin\").mixin, exports.mixin); Ã— Search results Close "},"josm_mixin_OsmDataLayerMixin.js.html":{"id":"josm_mixin_OsmDataLayerMixin.js.html","title":"Source: josm/mixin/OsmDataLayerMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/OsmDataLayerMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.layer.OsmDataLayer}. * * @module josm/mixin/OsmDataLayerMixin */ var util = require(\"josm/util\"); var LatLon = org.openstreetmap.josm.data.coor.LatLon; var Bounds = org.openstreetmap.josm.data.Bounds; var Command = org.openstreetmap.josm.command.Command; /** * This mixin is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.layer.OsmDataLayer}. * * @mixin OsmDataLayerMixin * @forClass org.openstreetmap.josm.gui.layer.OsmDataLayer * */ exports.mixin = {}; exports.forClass=org.openstreetmap.josm.gui.layer.OsmDataLayer; /** * Applies one or more undoable/redoable commands to the data layer. * * &lt;strong&gt;Signature&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;apply(cmd,cmd,...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;&lt;code&gt;cmd&lt;/code&gt; is either an instance of * {@class org.openstreetmap.josm.command.Command} * or an object with a method &lt;code&gt;createJOSMCommand(OsmDataLayer)&lt;/code&gt;. * &lt;/dd&gt; * &lt;/dl&gt; * * @param {...(org.openstreetmap.josm.command.Command | object)} commands the commands to apply * @function * @name apply * @summary Apply commands * @memberOf module:josm/mixin/OsmDataLayerMixin~OsmDataLayerMixin */ exports.mixin.apply = function() { var UndoRedoHandler = org.openstreetmap.josm.data.UndoRedoHandler; var cmds = []; var layer = this; util.each(arguments, function(arg) { if (util.isNothing(arg)) return; if (arg.createJOSMCommand) { cmds.push(arg.createJOSMCommand(layer)); } else if (arg instanceof Command) { cmds.push(arg); } else { util.assert(false, \"Unexpected type of arguments, got {0}\",arg); } }); try { this.data.beginUpdate(); util.each(cmds, function(cmd) { UndoRedoHandler.getInstance().add(cmd); }); } finally { this.data.endUpdate(); } }; Ã— Search results Close "},"josm_mixin_OsmPrimitiveMixin.js.html":{"id":"josm_mixin_OsmPrimitiveMixin.js.html","title":"Source: josm/mixin/OsmPrimitiveMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/OsmPrimitiveMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.data.osm.OsmPrimitive}. * * @module josm/mixin/OsmPrimitiveMixin */ var util = require(\"josm/util\"); var User = org.openstreetmap.josm.data.osm.User; var Tags = org.openstreetmap.josm.plugins.scripting.js.api.Tags; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; var Map = java.util.Map; /** * OsmPrimitiveMixin provides additional properties and methods which you * can invoke on an instance of * {@class org.openstreetmap.josm.data.osm.OsmPrimitive}. * * @mixin OsmPrimitiveMixin * @forClass org.openstreetmap.josm.data.osm.OsmPrimitive */ exports.mixin = {}; exports.forClass = org.openstreetmap.josm.data.osm.OsmPrimitive; /** * The unique numeric id, positive for global primitives, negative for local * primitives. * * @example * var nb = require(\"josm/builder\").NodeBuilder; * * // get members * var node = nb.create(); * var id = node.id; // -&gt; a negative value * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name id * @property {number} id the numberic id * @readOnly * @summary The unique numeric id * @instance */ exports.mixin.id = { get: function() { return this.getUniqueId(); } }; /** * The version of the object. * * Only global objects have a version. The version for local and proxy * objects is &lt;var&gt;undefined&lt;/var&gt;. * * @example * var nb = require(\"josm/builder\").NodeBuilder; * * // local object - get version is undefined * var node = nb.create(); * node.version; // -&amp;gt; undefined * * // global object - get version is defined * var node = nb.create(12345, {version: 9}); * node.version; // -&amp;gt; 9 * * // proxy object - get version is undefined * var node = nb.createProxy(12345); * node.version; // -&amp;gt; undefined * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name version * @property {number} version the primitive version * @readOnly * @summary The version of the object. * @instance */ exports.mixin.version = { get: function() { var version = this.$getVersion(); return version == 0 ? undefined : version; } }; /** * Replies true, if this is a local primitive. * * @example * var nb = require(\"josm/builder\").NodeBuilder; * * // get members * var node = nb.create(); * node.isLocal; // -&gt; true * * node = nb.create(1234); * node.isLocal; // -&gt; false * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name isLocal * @property {boolean} isLocal true, if this is a local primitive * @readOnly * @summary Replies true, if this is a local primitive. * @alias local * @alias isNew * @instance */ exports.mixin.isLocal = exports.mixin.local = exports.mixin.isNew = { get: function() { return this.$isNew(); } }; /** * Replies true, if this is a global primitive * * @example * var nb = require(\"josm/builder\").NodeBuilder; * * // get members * var node = nb.create(); * node.isGlobal; // -&gt; false * * node = nb.create(1234); * node.isGlobal; // -&gt; true * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name isGlobal * @alias global * @property {boolean} isGlobal true, if this is a global primitive * @readOnly * @summary Replies true, if this is a global primitive * @instance */ exports.mixin.isGlobal = exports.mixin.global = { get: function() { return ! this.$isNew(); } }; /** * Replies the parent dataset or undefined, if this primitive is not * attached to a dataset. * * @example * var ds = new DataSet(); * var nb = require(\"josm/builder\").NodeBuilder.forDataSet(ds); * * // get members * var n1 = nb.create(); * n1.dataSet; // -&gt; ds * * var nb = require(\"josm/builder\").NodeBuilder; * var n2 = nb.create(); * n2.dataSet; // -&gt; undefined * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name dataSet * @readOnly * @property {org.openstreetmap.josm.data.osm.DataSet} dataSet the parent dataset * @summary Replies the parent dataset. * @instance * */ exports.mixin.dataSet = { get: function() { var ds = this.$getDataSet(); return ds == null? undefined: ds; } }; /** * Set or get the user. * * &lt;strong&gt;get:&lt;/strong&gt; - replies a User object or undefined, if not * user is set. * * &lt;strong&gt;set:&lt;/strong&gt; - assign a user, either as instance of User, * supplying a user name or the unique global user id as number. Assign null * or undefined to assign no user. * * @example * var User = org.openstreetmap.josm.data.osm.User; * var nb = require(\"josm/builder\").NodeBuilder.forDataSet(ds); * * * var n1 = nb.create(); * // assign a user object * n1.user = new User(\"foobar\"); * // assign the unique global user with name 'foobar' * n1.user = \"foobar\"; * // assign the unique global user with id 12345 * n1.user = 12345; * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name user * @property {org.openstreetmap.josm.data.osm.User} user the user who last modified the primitive * @summary Set or get the user. * @instance */ exports.mixin.user = { get: function() { var user = this.$getUser(); return user == null ? undefined : user; }, set: function(val) { if (util.isNothing(val)) { this.$setUser(null); } else if (val instanceof User){ this.$setUser(val); } else if (util.isString(val)) { var user = User.getByName(val); util.assert(user != null, \"Can''t set user with name ''{0}''. User doesn''t exist (yet) \" + \"in the local user cache.\", val); util.assert(user.size() == 1, \"Can''t set user with name ''{0}''. Found {0} matching users.\", val, user.size()); this.$setUser(user.get(0)); } else if (util.isNumber(val)) { var user = User.getById(val); util.assert(user != null, \"Can''t set user with id {0}'. \" + \"User doesn''t exist (yet) in the local user cache.\", val); this.$setUser(user); } else { util.assert(false, \"Unexpected type of value, got {0}\", val); } } }; /** * Set or get the changeset id this primitive was last modified in. * * &lt;strong&gt;get:&lt;/strong&gt; - replies the changeset id or undefined, if no * changeset id is known (i.e. for local primitives or proxy primitives). * * &lt;strong&gt;set:&lt;/strong&gt; - assign a changset id, a number &amp;gt, 0. * * @example * var nb = require(\"josm/builder\").NodeBuilder.forDataSet(ds); * * var n1 = nb.create(12345); * // assign the changeset id * n1.changesetId = 6; * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name changesetId * @property {number} changesetId the changset id * @summary set or get the changeset id this primitive was last modified in. * @instance * */ exports.mixin.changesetId = { get: function() { var cid = this.$getChangesetId(); return cid == 0 ? undefined: cid; }, set: function(val) { util.assert(util.isSomething(val), \"null or undefined not allowed\"); util.assert(util.isNumber(val), \"Expected a number, got {0}\", val); util.assert(val &gt; 0, \"Expected a number &gt; 0, got {0}\", val); this.$setChangesetId(val); } }; /** * Get the timestamp this primitive was last modified on the server. * Undefined, if this timestamp isn't known, i.e. for local primitives or * for proxy primitives. * * @example * var nb = require(\"josm/builder\").NodeBuilder.forDataSet(ds); * * var n1 = ... // assume n1 was downloaded from the server * n1.timestamp; // the timestamp of last modification * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name timestamp * @readOnly * @property {java.util.Date} timestamp the timestamp of last modification * @summary Get the timestamp this primitive was last modified on the server. * @instance */ exports.mixin.timestamp = { get: function() { if (this.$isTimestampEmpty()) return undefined; return this.$getTimestamp(); } }; /** * Replies true if this a proxy object, in JOSM terminology called an * incomplete object. * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name isIncomplete * @alias isProxy * @alias incomplete * @alias proxy * @readOnly * @property {boolean} isIncomplete true if this is a proxy object * @summary Replies true if this is a proxy object * @instance */ exports.mixin.isIncomplete = exports.mixin.isProxy = exports.mixin.incomplete = exports.mixin.proxy = { get: function() { return this.$isIncomplete(); } }; /** * Sets or gets whether this object is &lt;em&gt;modified&lt;/em&gt;. * * Supported alias: &lt;code&gt;modified&lt;/code&gt;. * * @example * var node = .... // create a node * node.modified; // -&gt; true or false * node.isModified = true; // sets the modified flag to true * * @summary Sets or gets whether this object is &lt;em&gt;modified&lt;/em&gt;. * @name isModified * @alias modified * @property {boolean} isModified true, if modified * @memberof module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @instance */ exports.mixin.isModified = exports.mixin.modified = { get: function() { return this.$isModified(); }, set: function(value) { util.assert(util.isDef(value), \"value: missing mandatory value\"); this.$setModified(Boolean(value)); } }; function applyTagMap(obj, tags) { if (util.isNothing(tags)) return; for(var it=tags.keySet().iterator(); it.hasNext();){ var key = it.next(); var value = tags.get(key); if (util.isNothing(key)) continue; if (util.isNothing(value)) continue; key = util.trim(key + \"\"); value = value + \"\"; if (! obj.has(key) || value != obj.get(key)) { obj.$put(key, value); if (!obj.modified) obj.modified = true; } } }; function applyTagObject(obj,tags) { if (util.isNothing(tags)) return; for(var p in tags) { if (!tags.hasOwnProperty(p)) continue; var value = tags[p]; var key = util.trim(p); if (util.isNothing(value)) continue; var value = value + \"\"; if (! obj.has(key) || value != obj.get(key)) { obj.$put(key, value); if (!obj.modified) obj.modified = true; } } }; /** * Get or set the tags of the object. * * &lt;strong&gt;get:&lt;/strong&gt; - replies the tags as javascript object. * * &lt;strong&gt;set:&lt;/strong&gt; * &lt;ul&gt; * &lt;li&gt;assign null or undefined to remove all tags&lt;/li&gt; * &lt;li&gt;assign an object to set its properties as tags.&lt;/li&gt; * &lt;li&gt;assign an java.util.Map to set its elements as tags&lt;/li&gt; * &lt;/ul&gt; * * * null values and undefined tag values aren't assigned. tag keys are * normalized, i.e. leading and trailing white space is removed. Both, tag * keys and tag values, are converted to strings. * * @example * var node = .... // create a node * * // set the tags using a javascript object * node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; * node.tags.amenity; // -&gt; restaurant * node.tags.name; // -&gt; Obstberg * * // remove all tags * node.tags = null; * * // set tags using a java map * var tags = new java.util.HashMap(); * tags.put(\"amenity\", \"restaurant\"); * tags.put(\"name\", \"Obstberg\"); * node.tags = tags; * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name tags * @property {object} tags the tags * @summary Get or set the tags of the object. * @instance */ exports.mixin.tags = { get: function() { return new Tags(this); }, set: function(tags) { var ntags = this.keySet().size(); this.removeAll(); if (ntags &amp;&amp; ! this.modified) this.modified = true; if (util.isNothing(tags)) { // skip } else if (tags instanceof Map) { applyTagMap(this, tags); } else if (typeof tags === \"object\") { applyTagObject(this, tags); } else { util.assert(false, \"Can''t assign tags from object {0}\", tags); } } }; /** * Replies an array with the tag keys. * * @example * var node = .... // create a node * * // get the tag keys * var keys = node.keys; * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name keys * @property {array} keys the tag keys * @summary Replies an array with the tag keys. * @readonly * @instance */ exports.mixin.keys = { get: function() { var ret = []; for (var it = this.keySet().iterator(); it.hasNext();) { ret.push(it.next()); } return ret; } }; /** * Replies the value of a tag, or undefined, if the tag isn't set. * * @example * var node = .... // create a node * * // set the tags using a javascript object * node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; * node.get(\"amenity\"); // -&gt; restaurant * node.get(\"name\"); // -&gt; Obstberg * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @param {string} name the tag name. Must not be null or undefined. * Non-string values are converted to a string. Leading and trailing * whitespace is removed. * @name get * @function * @returns {string} the tag value * @summary Replies the value of a tag. */ exports.mixin.get = function(name) { if (util.isNothing(name)) return undefined; name = util.trim(name + \"\"); var value = this.$get(name); return value == null ? undefined : value; }; /** * Set a tag or a collection of tags. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;strong&gt;set(name,value)&lt;/strong&gt;&lt;/dt&gt; * &lt;dd&gt;sets a tag given a name and a value.&lt;br/&gt; * &lt;var&gt;name&lt;/var&gt; must not be null or undefined. Non-string values are * converted to a string. Leading and trailing whitespace is removed.&lt;br/&gt; * &lt;var&gt;value&lt;/var&gt;: if null or undefined, the tag is removed. Any other * value is converted to a string * &lt;/dd&gt; * * &lt;dt&gt;&lt;strong&gt;set(tags)&lt;/strong&gt;&lt;/dt&gt; * &lt;dd&gt;&lt;var&gt;tags&lt;/var&gt; is either a java object whose properties are set as * tags, or a java.util.Map.&lt;/dd&gt; * &lt;/dl&gt; * * * @example * var node = .... // create a node * * // set the tags using a javascript object * node.set(\"amenity\", \"restaurant\"); * node.set(\"name\", \"obstberg\"); * node.get(\"amenity\"); // -&gt; restaurant * node.get(\"name\"); // -&gt; Obstberg * * // set the tags using an object * node.set({amenity:\"restaurant\", name: \"Obstberg\"}); * node.get(\"amenity\"); // -&gt; restaurant * node.get(\"name\"); // -&gt; Obstberg * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name set * @function * @param {any} tag key/value pair, see description * @summary Set a tag or a collection of tags. */ exports.mixin.set = function() { function setWithNameAndValue(name,value){ util.assert(util.isSomething(name), \"name: must not be null or undefined\"); name = util.trim(name + \"\"); if (util.isNothing(value)) { this.remove(name); } else { value = value + \"\"; if (!this.has(name) || value != this.get(name)) { this.$put(name,value); if (!this.modified) this.modified = true; } } } function setFromObject(tags) { if (util.isNothing(tags)) return; if (tags instanceof Map) { applyTagMap(this,tags); } else if (typeof tags === \"object\") { applyTagObject(this, tags); } else { util.assert(false, \"Can''t assign tags from object {0}\", tags); } } switch(arguments.length){ case 0: return; case 1: setFromObject.call(this,arguments[0]); break; case 2: setWithNameAndValue.call(this, arguments[0], arguments[1]); break; } }; /** * Replies true, if the object has a tag with key &lt;var&gt;key&lt;/var&gt;. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;strong&gt;has(key)&lt;/strong&gt;&lt;/dt&gt; * &lt;dd&gt; &lt;var&gt;key&lt;/var&gt; is a string. Replies true, if the * object has a tag with this key. Before matching, leading and trailing * white space is removed from &lt;var&gt;key&lt;/var&gt;.&lt;/dd&gt; * * &lt;dt&gt;&lt;strong&gt;has(regexp)&lt;/strong&gt;&lt;/dt&gt; * &lt;dd&gt;&lt;var&gt;regexp&lt;/var&gt; is a regular expression. Replies true, if the * object has at least one tag whose key matches with &lt;var&gt;regexp&lt;/var&gt;.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var node = .... // create a node * * // set the tags using a javascript object * node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; * * // test wheter the tags are set * node.has(\"amenity\"); // -&gt; true * node.has(\"no-such-tag\"); // -&gt; false * * // use a regexp * node.has(/^a/); // -&gt; true * node.has(/^name(:.*)?$/i); // -&gt; false * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name has * @function * @returns {boolean} true, if there is a tag with this key * @param {(string | regexp)} key the tag key we are looking up * @summary Checks whether a primitive has a tag. */ exports.mixin.has = function(key) { if (util.isNothing(key)) return false; // Strange: key instanceof RegExp doesn't work if (key.constructor.name == \"RegExp\") { for(var it=this.keySet().iterator(); it.hasNext();) { if (key.test(it.next())) return true; } return false; } else { key = util.trim(key + \"\"); return this.$hasKey(key); } }; /** * Removes a tag. * * @example * var node = .... // create a node * * // set the tags using a javascript object * node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; * node.remove(\"amenity\"); * node.has(\"amenity\"); // -&gt; false * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @param {string} name the tag name. Must not be null or undefined. * Non-string values are converted to a string. Leading and trailing * whitespace is removed. * @name removeTag * @function * @summary Removes a tag. */ exports.mixin.removeTag = function(key){ if (util.isNothing(key)) return; key = util.trim(key + \"\"); if (this.has(key)) { this.$remove(key); if (! this.modified) this.modified = true; } }; /** * &lt;strong&gt;Deprecated&lt;/strong&gt;. There is a name conflict with the * &lt;code&gt;remove()&lt;/code&gt; method for removing a node in &lt;code&gt;WayMixin&lt;/code&gt;. * Use &lt;code&gt;removeTag()&lt;/code&gt; instead. * * Removes a tag. * * @example * var node = .... // create a node * * // set the tags using a javascript object * node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; * node.remove(\"amenity\"); * node.has(\"amenity\"); // -&gt; false * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @param {string} name the tag name. Must not be null or undefined. * Non-string values are converted to a string. Leading and trailing * whitespace is removed. * @name remove * @function * @summary Removes a tag. */ exports.mixin.remove = exports.mixin.removeTag; /** * Replies true if this object is a node * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name isNode * @readOnly * @property {boolean} isNode true if this object is a node * @summary Replies true if this object is a node */ exports.mixin.isNode = { get: function() { return this.getType() == OsmPrimitiveType.NODE; } }; /** * Replies true if this object is a way * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name isWay * @readOnly * @property {boolean} isWay true if this object is a way * @summary Replies true if this object is a way */ exports.mixin.isWay = { get: function() { return this.getType() == OsmPrimitiveType.WAY; } }; /** * Replies true if this object is a relation * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name isRelation * @readOnly * @property {boolean} isRelation true if this object is a relation * @summary Replies true if this object is a relation */ exports.mixin.isRelation = { get: function() { return this.getType() == OsmPrimitiveType.RELATION; } }; /** * Set or get wheter this primitive is deleted. * * In order to invoke the native method &lt;code&gt;isDeleted()&lt;/code&gt;, * prefix the name with $, i.e. * &lt;pre&gt; * node.$isDeleted(); // -&gt; same as node.isDeleted without parantheses * &lt;/pre&gt; * * * @memberOf module:josm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixin * @name isDeleted * @alias deleted * @property {boolean} isDeleted true, if this primitive is deleted * @summary Set or get wheter this primitive is deleted. */ exports.mixin.isDeleted = exports.mixin.deleted = { get: function() { return this.$isDeleted(); }, set: function(value) { util.assert(util.isDef(value), \"value: mandatory value is missing\"); util.assert(typeof value === \"boolean\", \"value: expected a boolean, got {0}\", value); this.$setDeleted(value); } }; Ã— Search results Close "},"josm_mixin_RelationMixin.js.html":{"id":"josm_mixin_RelationMixin.js.html","title":"Source: josm/mixin/RelationMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/RelationMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org/openstreetmap/josm/data/osm/Relation}. * * @module josm/mixin/RelationMixin */ var util = require(\"josm/util\"); var RelationMember = org.openstreetmap.josm.data.osm.RelationMember; var OsmPrimitive = org.openstreetmap.josm.data.osm.OsmPrimitive; var List = java.util.List; /** * This mixin provides additional properties and methods which you can * invoke on an instance of * {@class org/openstreetmap/josm/data/osm/Relation}. * * You can access relation members using * &lt;pre&gt;relation[i]&lt;/pre&gt;, * see examples below. * * @example * var Relation = org.openstreetmap.josm.data.osm.Relation; * var out = java.lang.System.out; * var relation = new Relation(12345); * * // use the mixin property 'id' to access the relation id ... * var id = relation.id; * * // ... or the native method getUniqueId() * id = relation.getUniqueId(); * * // loop over relation members and print out the roles * for (var i=0; i &lt; relation.length; i++) { * out.println(relation[i].role); * } * * @mixin RelationMixin * @extends OsmPrimitiveMixin * @forClass org.openstreetmap.josm.data.osm.Relation */ exports.mixin = {}; exports.forClass=org.openstreetmap.josm.data.osm.Relation; /** * Replies the number of relation members. * * @memberOf module:josm/mixin/RelationMixin~RelationMixin * @name length * @property {number} length the number of relation members * @readOnly * @summary Replies the number of relation members. * @instance */ exports.mixin.length = { get: function() { return this.getMembersCount(); } } function memberListEquals(l1,l2) { if (l1.length != l2.length) return false; for (var i=0; i&lt; l1.length; i++) { if (! l1[i].equals(l2[i])) return false; } return true; }; /** * The relation members * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;replies the current list of relation members as javascript array.&lt;/dd&gt; * * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Assign the list of relation members. Assign null or undefined to * remove all members. * Assign an array or a java.util.List of members. Members can be instances * of * {@class org/openstreetmap/josm/data/osm/RelationMember}, * {@class org/openstreetmap/josm/data/osm/Node}, * {@class org/openstreetmap/josm/data/osm/Way}, or * {@class org/openstreetmap/josm/data/osm/Relation}. * null or undefined are ignored.&lt;br/&gt; * &lt;strong&gt;Note:&lt;/strong&gt; you can't assign members to a proxy relation. * &lt;/dd&gt; * &lt;/dl&gt; * @example * var rb = require(\"josm/builder\").RelationBuilder; * var nb = require(\"josm/builder\").NodeBuilder; * var relation = rb.create(); * * // set members * relation.members = [nb.create(), rb.member('role.1', rb.create(12345))]; * * // get members * var members = relation.members; * * @memberOf module:josm/mixin/RelationMixin~RelationMixin * @name members * @property {...member | member[] | java.util.List} members the relation members * @summary Set or get the relation members * @instance */ exports.mixin.members = { get: function() { var ret = []; for(var it = this.getMembers().iterator(); it.hasNext();) { ret.push(it.next()); } return ret; }, set: function(val) { var members = []; function remember(obj) { if (util.isNothing(obj)) return; if (obj instanceof RelationMember) { members.push(obj); } else if (obj instanceof OsmPrimitive) { members.push(new RelationMember(null, obj)); } else if (util.isArray(obj)) { for (var i=0; i&lt;obj.length;i++) remember(obj[i]); } else if (obj instanceof List) { for (var it=obj.iterator(); it.hasNext();) remember(it.next()); } else { util.assert(false, \"Can''t add object {0} as relation member\", obj); } } var oldmembers = this.members; if (util.isNothing(val)) { this.setMembers(null); } else { remember(val); this.setMembers(members); } if (!memberListEquals(oldmembers, this.members) &amp;&amp; !this.modified) this.modified = true; } }; exports.mixin.__getByIndex = function(idx) { util.assert(idx &gt;= 0 &amp;&amp; idx &lt; this.getMembersCount(), \"Index out of range, got {0}\", idx); return this.getMember(idx); }; exports.mixin.__putByIndex = function(idx, val) { util.assert(idx &gt;= 0 &amp;&amp; idx &lt;= this.getMembersCount(), \"Index out of range, got {0}\", idx); util.assert(util.isSomething(val), \"value: must not be null or undefined\"); util.assert(val instanceof RelationMember || val instanceof OsmPrimitive, \"Unexpected type of value, got {0}\", val); if (idx == this.length) { this.add(val); } else { this.setAt(idx, val); } return this.getMember(idx); }; /** * Adds additional members at the end of the relation members list. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;add(m1, m2, ...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Adds a variable number of members. null or undefined are ignored. * A member is either an instance of * &lt;code&gt;{@class org.openstreetmap.josm.data.osm.RelationMember}&lt;/code&gt; or a * {@class org.openstreetmap.josm.data.osm.Node}, * {@class org.openstreetmap.josm.data.osm.Way}, * or {@class org.openstreetmap.josm.data.osm.Relation}. If an OSM primitive * is passed in, a relation member with an empty role is created.&lt;/dd&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;add(array|list)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Adds an array or list of members. null or undefined are ignored. * A list is either a javascript array or an instance of a java List * (&lt;code&gt;java.util.List&lt;/code&gt;). A list element is either an * instance of * &lt;code&gt;{@class org.openstreetmap.josm.data.osm.RelationMember}&lt;/code&gt;, * or or a {@class org.openstreetmap.josm.data.osm.Node}, * {@class org.openstreetmap.josm.data.osm.Way}, * or {@class org.openstreetmap.josm.data.osm.Relation}. If an OSM primitive * is passed in, a relation member with an empty role is created. null and * undefined are ignored.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var rbuilder = require(\"josm/builder\").RelationBuilder; * var nbuilder = require(\"josm/builder\").NodeBuilder; * var relation = rb.create(); * * // add a member using a RelationMember instance (created with the utility * // method rbuilder.member(...) * relation.add(rbuilder.member('myrole', nbuilder.create())); * * // add three nodes as members, each with the empty role * relation.add(nb.create(), nb.create(), nb.create()); * * // add an array of members * var m = [nb.create(), rb.member(\"role.1\", nb.create())]; * relation.add(m); * * @memberOf module:josm/mixin/RelationMixin~RelationMixin * @function * @name add * @param members see description * @summary Adds one or more member to the relation. * @instance */ exports.mixin.add = function(){ var toAdd = []; function remember(obj){ if (util.isNothing(obj)) return; if (obj instanceof RelationMember) { toAdd.push(obj); } else if (obj instanceof OsmPrimitive) { toAdd.push(new RelationMember(null /* no role */, obj)); } else if (util.isArray(obj)) { for (var i=0; i&lt;obj.length;i++) remember(obj[i]); } else if (obj instanceof List) { for (var it = obj.iterator(); it.hasNext();) remember(it.next()); } else { util.assert(false, \"Can''t add a value ''{0}'' as member to a relation\", obj); } } for (var i=0; i &lt; arguments.length; i++) remember(arguments[i]); for (var i=0; i&lt; toAdd.length; i++) this.addMember(toAdd[i]); }; /** * Inserts a member at position &lt;code&gt;idx&lt;/code&gt;. * * @example * var rb = require(\"josm/builder\").RelationBuilder; * var nb = require(\"josm/builder\").NodeBuilder; * var wb = require(\"josm/builder\").WayBuilder; * * // create a relation with two members * var relation = rb.withMembers(nb.create(), nb.create()).create(); * * // insert another member for a another node at position 0 * relation.insertAt(0, nb.create()); * * // insert a way with role 'role.1' at position 1 * relation.insertAt(1, rb.member('role.1', wb.create())); * * @memberOf module:josm/mixin/RelationMixin~RelationMixin * @function * @name insertAt * @param {number} idx the index. a number &amp;gt;= 0 and &amp;lt;= the current * number of members * @param {object} object the object, either a RelationMember, or a Node, a Way, or a * Relation. Must not be null or undefined. * @summary Inserts one or more members at a position. * @instance */ exports.mixin.insertAt = function(idx, obj) { util.assert(util.isSomething(idx), \"idx: must not be null or undefined\"); util.assert(util.isNumber(idx), \"idx: expected a number, got {0}\", idx); util.assert(idx &gt;= 0, \"idx: expected a number &gt; 0, got {0}\", idx); idx = Math.max(this.getRelationsCount(), idx); util.assert(util.isSomething(obj), \"obj: must not be null or undefined\"); if (obj instanceof RelationMember) { this.addMember(idx, obj); } else if (obj instanceof OsmPrimitive) { this.addMember(idx, new RelationMember(null /* no role */, obj)); } else { util.assert(false, \"obj: unexpected type of value, got {0}\", obj); } }; /** * Sets a member at position &lt;code&gt;idx&lt;/code&gt;. * * @example * var rb = require(\"josm/builder\").RelationBuilder; * var nb = require(\"josm/builder\").NodeBuilder; * var wb = require(\"josm/builder\").WayBuilder; * * // relation has two members * var relation = rb.withMembers(nb.create(), nb.create()).create(); * * // set another member for a another node at position 0 * relation.setAt(0, nb.create()); * * // set a way with role 'role.1' at position 1 * relation.setAt(1, rb.member('role.1', wb.create())); * * @memberOf module:josm/mixin/RelationMixin~RelationMixin * @function * @name setAt * @param {number} idx the index. a number &amp;gt;= 0 and &amp;lt; the current * number of members * @param {object} object either a RelationMember, or a Node, a Way, * or a Relation. Must not be null or undefined. * @summary Sets one or more members at a position. * @instance */ exports.mixin.setAt = function(idx, obj) { util.assert(util.isSomething(idx), \"idx: must not be null or undefined\"); util.assert(util.isNumber(idx), \"idx: expected a number, got {0}\", idx); util.assert(idx &gt;= 0 &amp;&amp; idx &lt; this.getMembersCount(), \"idx: out of range, got {0}\", idx); util.assert(util.isSomething(obj), \"obj: must not be null or undefined\"); if (obj instanceof RelationMember) { this.setMember(idx, obj); } else if (obj instanceof OsmPrimitive) { this.setMember(idx, new RelationMember(null /* no role */, obj)); } else { util.assert(false, \"obj: unexpected type of value, got {0}\", obj); } }; /** * Replies the unique object id for the member object at position * &lt;var&gt;idx&lt;/var&gt;. * * @example * var rb = require(\"josm/builder\").RelationBuilder; * var nb = require(\"josm/builder\").NodeBuilder; * var wb = require(\"josm/builder\").WayBuilder; * * // relation has two members * var relation = rb.withMembers(nb.create(), nb.create()).create(); * var id = relation.getIdAt(0); * * @memberOf module:josm/mixin/RelationMixin~RelationMixin * @function * @name getIdAt * @param {number} idx the index. a number &amp;gt;= 0 and &amp;lt; the current * number of members * @return {number} the unique object id for the member object at position * &lt;var&gt;idx&lt;/var&gt; * @summary Replies the object id of a member. * @instance */ exports.mixin.getIdAt = function(idx) { util.assert(util.isSomething(idx), \"idx: must not be null or undefined\"); util.assert(util.isNumber(idx), \"idx: expected a number, got {0}\", idx); util.assert(idx &gt;= 0 &amp;&amp; idx &lt; this.getMembersCount(), \"idx: out of range, got {0}\", idx); return this.getMemberId(idx); }; /** * Replies the member role for the member at position &lt;code&gt;idx&lt;/code&gt;. * * @example * var rb = require(\"josm/builder\").RelationBuilder; * var nb = require(\"josm/builder\").NodeBuilder; * var wb = require(\"josm/builder\").WayBuilder; * * // relation has two members * var relation = rb.withMembers(nb.create(), nb.create()).create(); * var role = relation.getRoleAt(0) // ==&gt; \"\", the empty role ; * * @memberOf module:josm/mixin/RelationMixin~RelationMixin * @function * @name getRoleAt * @param {number} idx the index. a number &amp;gt;= 0 and &amp;lt; the current * number of members * @return {string} the member role for the member at position &lt;var&gt;idx&lt;/var&gt; * @summary Replies the role of a member. * @instance */ exports.mixin.getRoleAt = function(idx) { util.assert(util.isSomething(idx), \"idx: must not be null or undefined\"); util.assert(util.isNumber(idx), \"idx: expected a number, got {0}\", idx); util.assert(idx &gt;= 0 &amp;&amp; idx &lt; this.getMembersCount(), \"idx: out of range, got {0}\", idx); return this.getRole(idx); }; /** * Replies the object represented by the member at position * &lt;code&gt;idx&lt;/code&gt;. * * @example * var rb = require(\"josm/builder\").RelationBuilder; * var nb = require(\"josm/builder\").NodeBuilder; * var wb = require(\"josm/builder\").WayBuilder; * * // relation has two members * var n1 = nb.create(); * var relation = rb.withMembers(n1, nb.create()).create(); * var node = relation.getObjectAt(0) // ==&gt; n1 * * @memberOf module:josm/mixin/RelationMixin~RelationMixin * @function * @name getObjectAt * @param {number} idx the index. a number &amp;gt;= 0 and &amp;lt; the current * number of members * @return {object} the object represented by the member at position &lt;code&gt;idx&lt;/code&gt; * @summary Replies the object of a member. * @instance */ exports.mixin.getObjectAt = function(idx) { util.assert(util.isSomething(idx), \"idx: must not be null or undefined\"); util.assert(util.isNumber(idx), \"idx: expected a number, got {0}\", idx); util.assert(idx &gt;= 0 &amp;&amp; idx &lt; this.getMembersCount(), \"idx: out of range, got {0}\", idx); return this.getMember(idx).getMember(); }; exports.mixin = util.mix(require(\"josm/mixin/OsmPrimitiveMixin\").mixin, exports.mixin); Ã— Search results Close "},"josm_mixin_UploadStrategyMixin.js.html":{"id":"josm_mixin_UploadStrategyMixin.js.html","title":"Source: josm/mixin/UploadStrategyMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/UploadStrategyMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.io.UploadStrategy}. * * @module josm/mixin/UploadStrategyMixin */ var util = require(\"josm/util\"); var UploadStrategy = org.openstreetmap.josm.io.UploadStrategy; /** * This mixin provides additional properties and methods which you can * invoke on an instance of {@class org.openstreetmap.josm.io.UploadStrategy}. * * @mixin UploadStrategyMixin * @forClass org.openstreetmap.josm.io.UploadStrategy */ exports.mixin = {}; exports.forClass = org.openstreetmap.josm.io.UploadStrategy; /** * Checks whether a value can be converted into an * {@class org.openstreetmap.josm.io.UploadStrategy}, * converts and normalizes it, and returns the converted value. * Throws an error, if &lt;code&gt;value&lt;/code&gt; can't be converted. * * Accepts one of the following values: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;a * {@class org.openstreetmap.josm.io.UploadStrategy}&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;just replies value&lt;/dd&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;a string&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;One of the following strings: * &lt;ul&gt; * &lt;li&gt;individualobjects&lt;/li&gt; * &lt;li&gt;chunked&lt;/li&gt; * &lt;li&gt;singlerequest&lt;/li&gt; * &lt;/ul&gt; * * Replies the matching enumeration value * {@class org.openstreetmap.josm.io.UploadStrategy}&lt;/dd&gt; * &lt;/dl&gt; * * Throws an error, if value is null or undefined. * * @example * var UploadStrategy = org.openstreetmap.josm.io.UploadStrategy; * var strategy = UploadStrategy.from(\"individualobjects\"); * * @param {org.openstreetmap.josm.io.UploadStrategy|string} value * the value to normalize * @memberOf module:josm/mixin/UploadStrategyMixin~UploadStrategyMixin * @static * @function * @name from * @returns {org.openstreetmap.josm.io.UploadStrategy} * @summary Convert value to {@class org.openstreetmap.josm.io.UploadStrategy} */ exports.mixin.from = function(value) { util.assertSomething(value, \"value: must not be null or undefined\"); if (util.isString(value)) { value = util.trim(value).toLowerCase(); var values = UploadStrategy.values(); for (var i =0; i&lt; values.length; i++) { if (values[i].getPreferenceValue().startsWith(value)) return values[i]; } util.assert(false, \"value: can''t convert string ''{0}'' to an UploadStrategy\", value); } else if (value instanceof UploadStrategy) { return value; } else { util.assert(false, \"value: can''t convert value to an UploadStrategy, got {0}\", value); } }; exports.mixin.from.static = true; /** * Replies true, if {@class org.openstreetmap.josm.io.UploadStrategy}, * is equal to a specific enumeration value or to a string value. * * Accepts one of the following values: * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;a * {@class org.openstreetmap.josm.io.UploadStrategy}&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;replies true, if &lt;/dd&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;a string&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;One of the following strings: * &lt;ul&gt; * &lt;li&gt;individualobjects&lt;/li&gt; * &lt;li&gt;chunked&lt;/li&gt; * &lt;li&gt;singlerequest&lt;/li&gt; * &lt;/ul&gt; * * Replies true, if the value is a prefix of the preference value. * &lt;/dd&gt; * &lt;/dl&gt; * * @example * var UploadStrategy = org.openstreetmap.josm.io.UploadStrategy; * var strategy = UploadStrategy.INDIVIDUAL_OBJECTS_STRATEGY; * strategy.is(\"indiv\"); // true * strategy.is(\"individualobjects\"); // true * strategy.is(\"chunked\"); // false * * @param {org.openstreetmap.josm.io.UploadStrategy | string} value * the value to check * @memberOf module:josm/mixin/UploadStrategyMixin~UploadStrategyMixin * @function * @name is * @instance * @returns {boolean} true, if string value matches * @summary Checks equality with string values */ exports.mixin.is = function(value) { if (util.isNothing(value)) return false; if (util.isString(value)) { value = util.trim(value).toLowerCase(); return this.getPreferenceValue().startsWith(value); } else if (value instanceof UploadStrategy) { return this.equals(value); } else { return false; } }; Ã— Search results Close "},"josm_mixin_WayMixin.js.html":{"id":"josm_mixin_WayMixin.js.html","title":"Source: josm/mixin/WayMixin.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/mixin/WayMixin.js /** * This module is auto-loaded by the scripting plugin and mixed into the * native java class {@class org.openstreetmap.josm.data.osm.Way}. * * @module josm/mixin/WayMixin */ var util = require(\"josm/util\"); var LatLon = org.openstreetmap.josm.data.coor.LatLon; var Node = org.openstreetmap.josm.data.osm.Node; var Collection = java.util.Collection; var HashSet = java.util.HashSet; /** * This mixin provides additional properties and methods which you can * invoke on an instance of {@class org.openstreetmap.josm.data.osm.Way}. * * You can access nodes using indexed properties, i.e. * &lt;pre&gt;way[i]&lt;/pre&gt;, see example below. * * @mixin WayMixin * @extends OsmPrimitiveMixin * @forClass org.openstreetmap.josm.data.osm.Way */ exports.mixin = {}; exports.forClass = org.openstreetmap.josm.data.osm.Way; function nodeListEquals(l1, l2) { if (l1.length != l2.length) return false; for(var i=0; i&lt;l1.length; i++) { if (l1[i].id != l2[i].id) return false; } return true; }; /** * Set or get the nodes of a way. * * &lt;dl&gt; * &lt;dt&gt;get&lt;/dt&gt; * &lt;dd&gt;Replies the nodes as array.&lt;/dd&gt; * &lt;dt&gt;set&lt;/dt&gt; * &lt;dd&gt;Set the an array or {@class java.util.List} of * {@class org.openstreetmap.josm.data.osm.Node}s.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var way = ... // create the way; * var n1,n2,n3 = ...; // create the nodes * way.nodes = [n1,n2,n3]; * way.nodes; // -&gt; [n1,n2,n3] * * @name nodes * @property {org.openstreetmap.josm.data.osm.Way.Node[]} nodes the nodes * @instance * @memberof module:josm/mixin/WayMixin~WayMixin * @summary Set or get the nodes of a way. */ exports.mixin.nodes= { get: function() { if (this.isIncomplete) return undefined; var nodes = []; for(var it = this.getNodes().iterator(); it.hasNext();) { nodes.push(it.next()); } return nodes; }, set: function(val) { util.assert(util.isSomething(val), \"nodes must not be null or undefined\"); var oldnodes = this.nodes; if (util.isArray(val) || val instanceof java.util.List) { this.setNodes(val); } else { util.assert(false, \"Expected array or list of nodes, got {0}\", val); } if (!nodeListEquals(oldnodes, this.nodes) &amp;&amp; !this.modified) { this.modified = true; } } }; /** * Replies the number of nodes. * * @name length * @property {number} length number of nodes * @instance * @memberof module:josm/mixin/WayMixin~WayMixin * @readOnly * @summary Replies the number of nodes. */ exports.mixin.length = { get: function() { return this.getNodesCount(); } }; exports.mixin.__getByIndex = function(idx) { util.assert(idx &gt;= 0 &amp;&amp; idx &lt; this.length, \"Node index out of range, got {0}\", idx); return this.getNode(idx); }; /** * Checks if a node is part of a way. * * @param {org.openstreetmap.josm.data.osm.Node} node the node to check * @function * @instance * @name contains * @returns {boolean} true, if the node is part of the way * @memberof module:josm/mixin/WayMixin~WayMixin * @summary Checks if a node is part of a way. */ exports.mixin.contains = function(node) { if (util.isNothing(node)) return false; util.assert(node instanceof Node, \"Expected a Node, got {0}\", node); return this.containsNode(node); }; /** * The first node or undefined, if this way doesn't have nodes * (i.e. because it is a proxy way). * * @property {org.openstreetmap.josm.data.osm.Node} first the node or undefined * @name first * @instance * @memberof module:josm/mixin/WayMixin~WayMixin * @summary The first node */ exports.mixin.first = { get: function() { if (this.length == 0) return undefined; return this.getNode(0); } }; /** * The last node or undefined, if this way doesn't have nodes * (i.e. because it is a proxy way). * * @property {org.openstreetmap.josm.data.osm.Node} last the node or undefined * @name last * @instance * @memberof module:josm/mixin/WayMixin~WayMixin * @summary The last node */ exports.mixin.last = { get: function() { if (this.length == 0) return undefined; return this.getNode(this.length-1); } }; /** * Removes one or more nodes from the way. * * &lt;strong&gt;Signatures&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;remove(n1,n2, ...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Removes the nodes. &lt;code&gt;n&lt;/code&gt;&lt;em&gt;i&lt;/em&gt; are instances of * {@class org.openstreetmap.josm.data.osm.Node}.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;remove(array|collection)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Removes the nodes. &lt;code&gt;array&lt;/code&gt; is a javascript array of * {@class org.openstreetmap.josm.data.osm.Node}s, * &lt;code&gt;collection&lt;/code&gt; is a java collection of * {@class org.openstreetmap.josm.data.osm.Node}s.&lt;/dd&gt; * &lt;/dl&gt; * * @function * @param {...org.openstreetmap.josm.data.osm.Node | array | java.util.Collection} nodes the nodes to remove * @name remove * @instance * @memberOf module:josm/mixin/WayMixin~WayMixin * @summary Removes one or more nodes from the way. */ exports.mixin.remove = function(){ var candidates = new HashSet(); function remember(o){ if (util.isNothing(o)) return; if (o instanceof Node) { candidates.add(o); } else if (util.isArray(o)) { for(var i=0; i&lt; o.length; i++) remember(o[i]); } else if (o instanceof Collection){ for(var it= o.iterator(); it.hasNext();) remember(it.next()); } else { // ignore } } var oldnodes = this.nodes; for (var i=0;i &lt; arguments.length; i++) remember(arguments[i]); this.removeNodes(candidates); if (!nodeListEquals(oldnodes, this.nodes) &amp;&amp; !this.modified) { this.modified = true; } }; exports.mixin = util.mix(require(\"josm/mixin/OsmPrimitiveMixin\").mixin,exports.mixin); Ã— Search results Close "},"josm_scriptingconsole.js.html":{"id":"josm_scriptingconsole.js.html","title":"Source: josm/scriptingconsole.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/scriptingconsole.js /** * &lt;p&gt;Provides a set of functions to write to the built-in scripting * console.&lt;/p&gt; * * @module josm/scriptingconsole */ // -- imports var MessageFormat = java.text.MessageFormat; var scripting = org.openstreetmap.josm.plugins.scripting; var ScriptingConsole = scripting.ui.console.ScriptingConsole; function consoleWriter() { return ScriptingConsole.instance.scriptLog.logWriter; } /** * &lt;p&gt;Prints a string to the console&lt;/p&gt; * * @example * var console = require(\"josm/scriptingconsole\"); * console.print(\"Hello world!\"); * * // or use formatting * console.print(\"Hello world! My name is {0}\", \"foo\"); * * @summary Prints a string to the console * @param {string} message the message * @param {...object} [values] optional values * @static * @name print * @function */ exports.print = function() { var args = Array.prototype.slice.call(arguments,0); switch(args.length) { case 0: return; case 1: consoleWriter().print(args[0] + \"\"); return; default: args[0] = args[0] + \"\"; // make sure first argument is a string var msg = MessageFormat.format(args[0],args.slice(1)); consoleWriter().print(msg); } }; /** * &lt;p&gt;Prints a string to the console, including newline&lt;/p&gt; * * @example * var console = require(\"josm/scriptingconsole\"); * console.println(\"Hello world!\"); * * // or use formatting * console.println(\"Hello world! My name is {0}\", \"foo\"); * * @summary Prints a string to the console, including newline * @static * @name println * @function * @param {string} message the message * @param {...object} [values] optional values */ exports.println = function() { var args = Array.prototype.slice.call(arguments,0); switch(args.length) { case 0: return; case 1: consoleWriter().println(args[0] + \"\"); return; default: args[0] = args[0] + \"\"; // make sure first argument is a string var msg = MessageFormat.format(args[0],args.slice(1)); consoleWriter().println(msg); } }; /** * &lt;p&gt;Clears the scripting console.&lt;/p&gt; * * @example * var console = require(\"josm/scriptingconsole\"); * console.clear(); * * @summary Clears the scripting console. * @function * @name clear * @static */ exports.clear = function() { var action = ScriptingConsole.instance.scriptLog.clearAction; action.actionPerformed(null); }; /** * &lt;p&gt;Shows the scripting console&lt;/p&gt; * * @example * var console = require(\"josm/scriptingconsole\"); * console.show(); * * @summary Shows the scripting console * @function * @name show * @static */ exports.show = function() { ScriptingConsole.showScriptingConsole(); }; /** * &lt;p&gt;Hides the scripting console&lt;/p&gt; * * @example * var console = require(\"josm/scriptingconsole\"); * console.hide(); * * @summary Hides the scripting console * @function * @name hide * @static */ exports.hide = function() { ScriptingConsole.hideScriptingConsole(); }; /** * &lt;p&gt;Toggles the visibility of the scripting console&lt;/p&gt; * * @example * var console = require(\"josm/scriptingconsole\"); * console.toggle(); * * @summary Toggles the visibility of the scripting console * @function * @name toggle * @static */ exports.toggle = function() { ScriptingConsole.toggleScriptingConsole(); }; Ã— Search results Close "},"josm_ui_menu.js.html":{"id":"josm_ui_menu.js.html","title":"Source: josm/ui/menu.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/ui/menu.js var util = require(\"josm/util\"); /** * Provides a collection of namespaces, classes and functions to work with * JOSMs menu system. * * @module josm/ui/menu */ /** * Represents JOSMs global menu bar. * * @class * @name MenuBar */ exports.MenuBar = function() {}; /** * Replies the number of menus in the JOSM menu bar. * * @example * // display the number of menus * josm.alert(josm.menu.length); * * @property {number} length * @summary the number of menus in the JOSM menu bar * @memberof module:josm/ui/menu~MenuBar * @instance */ Object.defineProperty(exports.MenuBar, \"length\", { enumerable: true, get: function() { var MainApplication = org.openstreetmap.josm.gui.MainApplication; if (!MainApplication.getMenu()) return 0; return MainApplication.getMenu().getMenuCount(); } }); /** * Replies a menu in the JOSM menu bar. * * &lt;code&gt;key&lt;/code&gt; is either a numberic index or one of the following * symbolic names as string: * &lt;ul&gt; * &lt;li&gt;&lt;code&gt;file&lt;/code&gt;&lt;/li&gt; * &lt;li&gt;&lt;code&gt;edit&lt;/code&gt;&lt;/li&gt; * &lt;li&gt;&lt;code&gt;view&lt;/code&gt;&lt;/li&gt; * &lt;li&gt;&lt;code&gt;tools&lt;/code&gt;&lt;/li&gt; * &lt;li&gt;&lt;code&gt;presets&lt;/code&gt;&lt;/li&gt; * &lt;li&gt;&lt;code&gt;imagery&lt;/code&gt;&lt;/li&gt; * &lt;li&gt;&lt;code&gt;window&lt;/code&gt;&lt;/li&gt; * &lt;li&gt;&lt;code&gt;help&lt;/code&gt;&lt;/li&gt; * &lt;/ul&gt; * * @example * // get the edit menu with a numeric index * var editmenu = josm.menu.get(1); * * // get the file menu with a symbolic name * var filemenu = josm.menu.get(\"file\"); * * @return {javax.swing.JMenu} the menu * @summary Replies a menu in the JOSM menu bar. * @param {number|string} key the key denoting the menu * @memberof module:josm/ui/menu~MenuBar * @name get * @function * @instance */ exports.MenuBar.get = function(key) { var MainApplication = org.openstreetmap.josm.gui.MainApplication; util.assert(util.isSomething(key), \"key: must not be null or undefined\"); var mainMenu = MainApplication.getMenu(); if (util.isNumber(key)) { util.assert(key &gt;= 0 &amp;&amp; key &lt; exports.MenuBar.length, \"key: index out of range, got {0}\", key); return mainMenu.getMenu(key); } else if (util.isString(key)) { key = util.trim(key).toLowerCase(); switch(key) { case \"file\": return mainMenu.fileMenu; case \"edit\": return mainMenu.editMenu; case \"view\": return mainMenu.viewMenu; case \"tools\": return mainMenu.toolsMenu; case \"presets\": return mainMenu.presetsMenu; case \"imagery\": return mainMenu.imageryMenu; case \"window\": return mainMenu.windowMenu; case \"help\": return mainMenu.helpMenu; default: util.assert(false, \"Unsupported key to access a menu, got {0}\", key); } } else { util.assert(false, \"Unexpected value, got {0}\", key); } }; /** * Replies an array with the symbolic menu names. * * @memberof module:josm/ui/menu~MenuBar * @name menuNames * @property {array} menuNames the names of the menues in the menu bar * @readOnly * @summary Replies an array with the symbolic menu names. */ Object.defineProperty(exports.MenuBar, \"menuNames\", { enumerable: true, get: function() { return [\"file\", \"edit\", \"view\", \"tools\", \"presets\", \"imagery\", \"window\", \"help\"]; } }); var counter = 0; function defaultName() { return \"JosmAction\" + counter; }; function stringPropertyFromPara(para, name, defaultValue) { defaultValue = defaultValue || null; if (!para || ! para[name]) return null; return String(para[name]); }; /** * JSAction is an action for which a menu item or a toolbar item can be * added to JOSMs menu or JOSMs toolbar respectively. * * This is just a shortcut for the Java class * {@class org.openstreetmap.josm.plugins.scripting.js.JSAction}. * * The constructor accepts an object with the following optional named * parameters. * &lt;dl&gt; * &lt;dt&gt;&lt;code class=\"signature\"&gt;name:string&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The optional name of the action. Default: an auto generated named.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;tooltip:string&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The optional tooltip of the action. Default: empty string.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;iconName:string&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The optional name of an icon. Default: null.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;toolbarId:string&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The optional name of the tooblar, this action is going to be added to * later. Note, that it isn't added automatically, when this action is * created. Default: null.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;onExecute:function&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The (optional) function which is called when the action is executed. * Default: null.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;onInitEnabled:function&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The (optional) function which is called when the &lt;em&gt;enabled&lt;/em&gt; * state of the function is evaluated the first time. Default: null.&lt;/dd&gt; * * &lt;dt&gt;&lt;code class=\"signature\"&gt;onUpdateEnabled:function&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;The (optional) function which is called when the &lt;em&gt;enabled&lt;/em&gt; * state of the function is reevaluated, in particular, when layer change * events or selection change events occur. Default: null.&lt;/dd&gt; * &lt;/dl&gt; * * @example * var JSAction = require(\"josm/ui/menu\").JSAction; * var action = new JSAction({ * name: \"My Action\", * tooltip: \"This is my action\", * onInitEnabled: function() { * this.enabled = false; * } * }); * * action.onExecute = function() { * josm.alert(\"Action is executing ...\"); * }; * * @property {org.openstreetmap.josm.plugins.scripting.js.JSAction} JSAction * @static * @name JSAction */ exports.JSAction = org.openstreetmap.josm.plugins.scripting.js.JSAction; Ã— Search results Close "},"josm_util.js.html":{"id":"josm_util.js.html","title":"Source: josm/util.js","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Source: josm/util.js /** * &lt;p&gt;Provides a set of static utility functions.&lt;/p&gt; * * @module josm/util */ // -- imports var MessageFormat = java.text.MessageFormat; /** * Checks whether a value is null or undefined. * * @param {object} value the value to check * @return {boolean} false, if &lt;code&gt;value&lt;/code&gt; is null or undefined; true, otherwise * @summary Checks whether a value is null or undefined. * @function * @name isNothing */ exports.isNothing = function(value) { return value === null || value === void 0; }; /** * Checks whether a value is neither null nor undefined. * * @param {object} value the value to check * @return {boolean} false, if &lt;code&gt;value&lt;/code&gt; is null or undefined; true, otherwise * @summary Checks whether a value is neither null nor undefined. * @function * @name isSomething */ exports.isSomething = function(val) { return ! exports.isNothing(val); }; /** * &lt;p&gt;Trims leading and trailing whitespace from &lt;code&gt;s&lt;/code&gt;.&lt;/p&gt; * * &lt;p&gt;Replies s, if s is null or undefined. Any other value is converted to a * string, then leading and trailing white space is removed.&lt;/p&gt; * * @param {string} s the string to be trimmed * @return {string} * @summary Trims leading and trailing whitespace from &lt;code&gt;s&lt;/code&gt;. * @function * @name trim */ exports.trim = function(s){ if (exports.isNothing(s)) return s; return (s + '').replace(/^\\s+/, '').replace(/\\s+$/, ''); }; /** * &lt;p&gt;Assert a condition and throw an Error if the condition isn't met.&lt;/p&gt; * * &lt;p&gt;&lt;strong&gt;Usage:&lt;/strong&gt; * &lt;dl&gt; * &lt;dt&gt;&lt;code&gt;assert()&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Does nothing&lt;/dd&gt; * * &lt;dt&gt;&lt;code&gt;assert(cond)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Checks the condition &lt;code&gt;cond&lt;/code&gt;. If it is false, throws an * Error.&lt;/dd&gt; * * &lt;dt&gt;&lt;code&gt;assert(cond, msg)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Checks the condition &lt;code&gt;cond&lt;/code&gt;. If it is false, throws an * Error, whose &lt;code&gt;description&lt;/code&gt; property * is set to &lt;code&gt;msg&lt;/code&gt;.&lt;/dd&gt; * * &lt;dt&gt;&lt;code&gt;assert(cond, msg, objs...)&lt;/code&gt;&lt;/dt&gt; * &lt;dd&gt;Checks the condition &lt;code&gt;cond&lt;/code&gt;. If it is false, throws an * Error, whose &lt;code&gt;description&lt;/code&gt; property * is set to the formatted message &lt;code&gt;msg&lt;/code&gt;. Internally uses * &lt;code&gt;java.text.MessageFormat&lt;/code&gt; to format the message.&lt;/dd&gt; * * &lt;/dl&gt; * * @example * var util = require(\"josm/util\"); * // throws an Error * util.assert(false); * * // throws an Error e, with e.description == \"My message\" * util.assert(false, \"My message\"); * * // throws an Error e, with e.description == \"My message: test\" * util.assert(false, \"My message: {0}\", \"test\"); * * @summary Assert a condition and throw an Error if the condition isn't met. * @function * @name assert * @static * @param {boolean} condition * @param {string} [message] the message * @param {...object} [values] an optional list of values */ exports.assert = function() { var error = new Error(); switch(arguments.length) { case 0: return; case 1: if (arguments[0]) return; error.name = \"AssertionError\"; error.description = \"An assertion failed\"; throw error; case 2: if (arguments[0]) return; error.name = \"AssertionError\"; error.description = arguments[1]; throw error; default: if (arguments[0]) return; error.name = \"AssertionError\"; var args = Array.prototype.slice.call(arguments,0); error.description = MessageFormat.format( args[1], args.slice(2) ); throw error; } }; /** * Asserts that &lt;code&gt;val&lt;/code&gt; is defined and non-null. * * @example * var util = require(\"josm/util\"); * util.assertSomething(null); // -&gt; throws an exception * util.assertSomething(void 0); // -&gt; throws an exception * * util.assertSomting(\"test\"); // -&gt; OK * util.assertSomething(5); // -&gt; OK * * @param {any} val the value to check * @param {string} [msg] message if the assertion fails * @param {...object} [values] additional values used in &lt;code&gt;msg&lt;/code&gt; * placeholders * @summary Asserts that &lt;code&gt;val&lt;/code&gt; is defined and non-null. * @function * @static * @name assertSomething */ exports.assertSomething = function(val) { var args; if (arguments.length &lt;= 1) { args = [exports.isSomething(val), \"Expected a defined non-null value, got {0}\", val]; } else { args = [exports.isSomething(val)].concat( Array.prototype.slice.call(arguments,1)); } exports.assert.apply(args); }; /** * Asserts that &lt;code&gt;val&lt;/code&gt; is a number. * * @param {Anything} value the value to check * @param {String} [msg] message if the assertion fails * @param {...object} [values] values used in &lt;code&gt;msg&lt;/code&gt; placeholders * @summary Asserts that &lt;code&gt;val&lt;/code&gt; is a number. * @function * @name assertNumber * @static */ exports.assertNumber = function(val) { var args; if (arguments.length &lt;= 1) { args = [exports.isSomething(val), \"Expected a number, got {0}\", val]; } else { args = [exports.isSomething(val)] .concat(Array.prototype.slice.call(arguments,1)); } exports.assert.apply(args); }; /** * Returns true if &lt;code&gt;val&lt;/code&gt; is defined. * * @param {any} value the value to check * @summary Returns true if &lt;code&gt;val&lt;/code&gt; is defined. * @return {boolean} true if &lt;code&gt;val&lt;/code&gt; is defined * @function * @name isDef * @static */ exports.isDef = function(val) { return val !== void 0; }; /** * Returns true if &lt;code&gt;val&lt;/code&gt; is a number. * * @param {any} value the value to check * @summary Returns true if &lt;code&gt;val&lt;/code&gt; is a number. * @return {boolean} true if &lt;code&gt;val&lt;/code&gt; is a number * @function * @name isNumber * @static */ exports.isNumber = function(val) { return typeof val === \"number\"; }; /** * Returns true if &lt;code&gt;val&lt;/code&gt; is a string. * * @param {any} value the value to check * @return {boolean} true, if val is a string or a String object * @summary Returns true if &lt;code&gt;val&lt;/code&gt; is a string. * @function * @name isString * @static */ exports.isString = function(val) { return exports.isDef(val) &amp;&amp; (typeof val === \"string\" || val instanceof String); }; /** * Replies true if &lt;code&gt;val&lt;/code&gt; is an array. * * @param {anything} value the value to check * @return {boolean} true, if val is an array * @summary Replies true if &lt;code&gt;val&lt;/code&gt; is an array. * @function * @name isArray * @static */ exports.isArray = function(val) { return Object.prototype.toString.call( val ) === '[object Array]'; }; /** * Replies true if &lt;code&gt;val&lt;/code&gt; is a list of arguments. * * @param {anything} value the value to check * @return {boolean} true, if val is a list of arguments * @summary Replies true if &lt;code&gt;val&lt;/code&gt; is a list of arguments. * @function * @name isArguments * @static */ exports.isArguments = function(val) { return Object.prototype.toString.call(val) === '[object Arguments]'; }; /** * Replies the number of properties owned by &lt;code&gt;o&lt;/code&gt;. * * @example * var util = require(\"josm/util\"); * var o = {p1: \"v1\", p2: \"v2\"}; * var c = util.countProperties(o); // -&gt; 2 * * o = {}; * c = util.countProperties(o); // -&gt; 0 * * o = undefined; * c = util.countProperties(o); // -&gt; undefined * * @param {any} o the object * @summary Replies the number of properties owned by &lt;code&gt;o&lt;/code&gt;. * @return {number} the number of properties owned by &lt;code&gt;o&lt;/code&gt;. * @function * @name countProperties * @static */ exports.countProperties = function(o) { if (exports.isNothing(o)) return void 0; if (! (typeof o === \"object\")) return void 0; var count = 0; for (var p in o) { if (o.hasOwnProperty(p)) count++; } return count; }; /** * Replies true, if &lt;code&gt;o&lt;/code&gt; owns at least one property. * * @example * var util = require(\"josm/util\"); * var o = {p1: \"v1\", p2: \"v2\"}; * var c = util.hasProperties(o); // -&gt; true * * o = {}; * c = util.hasProperties(o); // -&gt; false * * o = undefined; * c = util.hasProperties(o); // -&gt; false * * @param {any} o the object * @summary Replies true, if &lt;code&gt;o&lt;/code&gt; owns at least one property. * @return {boolean} true, if &lt;code&gt;o&lt;/code&gt; owns at least one property. * @function * @name hasProperties * @static */ exports.hasProperties = function(o) { var count = exports.countProperties(o); if (count === void 0) return false; return count &gt; 0; }; /** * Replies true, if f is a function. * * @param {any} f the object * @summary Replies true, if f is a function. * @return {boolean} true, if f is a function. * @function * @name isFunction * @static */ exports.isFunction = function(f) { return typeof f === \"function\"; }; /** * Mixes the properties of a list of objects into one object. * * @return a new object which includes the combined properties of the * argument objects * @return {object} * @summary Mixes the properties of a list of objects into one object. * @function * @name mix * @static */ exports.mix = function(){ var mixin = {}; function copyProperties(other){ for (var p in other){ if (!other.hasOwnProperty(p)) continue; mixin[p] = other[p]; } } for (var i=0; i&lt; arguments.length; i++){ var template = arguments[i]; if (exports.isNothing(template)) continue; if (! (typeof template === \"object\")) continue; copyProperties(template); } return mixin; }; /** * &lt;p&gt;Prints a message to stdout (including newline).&lt;/p&gt; * * &lt;p&gt;Supports the same string templates as {@class java.text.MessageFormat}.&lt;/p&gt; * * @example * var myname = \"...\"; * util.println(\"Hello world! My name is {0}\", myname); * // escape meta characters like {, } or ' with a leading apostrophe * util.println(\" a pair of curly braces '{'}\"); * * @summary Prints a message to stdout (including newline). * @param {string} message * @param {...object} [args] * @function * @name println * @static */ exports.println = function() { var args = Array.prototype.slice.call(arguments,0); if (args.length == 0) return \"\"; args[0] = args[0] + \"\"; // make sure first argument is a string java.lang.System.out.println(MessageFormat.format(args[0],args.slice(1))); }; /** * &lt;p&gt;Prints a message to stdout (without newline).&lt;/p&gt; * * &lt;p&gt;Supports the same string templates as {@class java.text.MessageFormat}&lt;/p&gt; * * @example * var myname = \"...\"; * util.print(\"Hello world! My name is {0}\", myname); * // escape meta characters like {, } or ' with a leading apostrophe * util.print(\" a pair of curly braces '{'}\"); * * @summary Prints a message to stdout (without newline). * @param {string} message * @param {...object} [args] * @function * @name print * @static */ exports.print = function() { var args = Array.prototype.slice.call(arguments,0); if (args.length == 0) return \"\"; args[0] = args[0] + \"\"; // make sure first argument is a string java.lang.System.out.print(MessageFormat.format(args[0],args.slice(1))); }; /** * &lt;p&gt;Checks whether two java objects are either both null or equal by calling * o1.equals(o2).&lt;/p&gt; * * @param {object} o1 a java object or null * @param {object} o2 a java object or null * @summary Are two java objects equal. * @return {boolean} * @function * @name javaEquals * @static */ exports.javaEquals = function(o1, o2) { exports.assert(typeof o1 === \"object\" &amp;&amp; typeof o1.equals === \"function\"); exports.assert(typeof o2 === \"object\" &amp;&amp; typeof o2.equals === \"function\"); if (o1 === null &amp;&amp; o2 === null) return true; if (o1 === null &amp;&amp; o2 !== null) return false; return o1.equals(o2); }; /** * &lt;p&gt;Iterates over the elements in &lt;code&gt;collection&lt;/code&gt; and invokes * &lt;code&gt;delegate()&lt;/code&gt; on each element.&lt;/p&gt; * * @param {array|arguments|java.util.Collection} collection the collection of * elements * @param {function} delegate the function to call on each elemennt * @summary Iteraties over the elements of a collection * @function * @name each * @static */ exports.each = function(collection, delegate) { if (exports.isNothing(collection) || exports.isNothing(delegate)) return; if (exports.isArray(collection) || exports.isArguments(collection)) { var len = collection.length; for (var i=0; i&lt;len; i++) delegate(collection[i]); } else if (collection instanceof java.util.Collection) { for (var it = collection.iterator(); it.hasNext();) delegate(it.next()); } else { exports.assert(false, \"collection: unexpected type of value, got {0}\", collection); } }; /** * Replies true, if a value is an array, an arguments list or a Java * collection. * * @param {object} value the value to check * @summary Is a value a collection? * @return {boolean} true, if &lt;code&gt;value&lt;/code&gt; is a collection * @function * @name isCollection * @static */ exports.isCollection = function(value) { return exports.isArray(value) || exports.isArguments(value) || value instanceof java.util.Collection; }; Ã— Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Modules API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Classes Api ChangesetApi NodeBuilder RelationBuilder WayBuilder AddCommand A command to add a collection of objects to a data layer ChangeCommand A command to change a collection of objects in a data layer. CommandHistory Accessor to the global command history DeleteCommand A command to delete a collection of objects in a data layer. DataSetSelectionFacade Creates a facade MenuBar Mixins BoundsMixin JavaScript mixin for the java class Bounds ChangesetMixin JavaScript mixin for the java class Changeset DataSetMixin JavaScript mixin for the java class DataSet JSActionMixin LatLonMixin NodeMixin OsmDataLayerMixin OsmPrimitiveMixin RelationMixin UploadStrategyMixin WayMixin Ã— Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Classes API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Classes Api ChangesetApi NodeBuilder RelationBuilder WayBuilder AddCommand A command to add a collection of objects to a data layer ChangeCommand A command to change a collection of objects in a data layer. CommandHistory Accessor to the global command history DeleteCommand A command to delete a collection of objects in a data layer. DataSetSelectionFacade Creates a facade MenuBar Mixins BoundsMixin JavaScript mixin for the java class Bounds ChangesetMixin JavaScript mixin for the java class Changeset DataSetMixin JavaScript mixin for the java class DataSet JSActionMixin LatLonMixin NodeMixin OsmDataLayerMixin OsmPrimitiveMixin RelationMixin UploadStrategyMixin WayMixin Ã— Search results Close "},"mixins.list.html":{"id":"mixins.list.html","title":"Mixins","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixins API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Classes Api ChangesetApi NodeBuilder RelationBuilder WayBuilder AddCommand A command to add a collection of objects to a data layer ChangeCommand A command to change a collection of objects in a data layer. CommandHistory Accessor to the global command history DeleteCommand A command to delete a collection of objects in a data layer. DataSetSelectionFacade Creates a facade MenuBar Mixins BoundsMixin JavaScript mixin for the java class Bounds ChangesetMixin JavaScript mixin for the java class Changeset DataSetMixin JavaScript mixin for the java class DataSet JSActionMixin LatLonMixin NodeMixin OsmDataLayerMixin OsmPrimitiveMixin RelationMixin UploadStrategyMixin WayMixin Ã— Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Ã— Search results Close "},"module-clipboard.html":{"id":"module-clipboard.html","title":"Module: clipboard","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: clipboard API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Provides access to the system clipboard Source: clipboard.js, line 1 Members &lt;static&gt; text Set or get the clipboard content as text Set or get the clipboard content as text get Replies the clipboard content as text or undefined, if no clipboard content is available or if it can't be converted to a string. set Sets the clipboard content Properties: Name Type Description text string clipboard content as text Source: clipboard.js, line 7 Example var clipboard = require(\"clipboard\"); // set the clipboard content clipboard.text = \"Hello World!\"; Ã— Search results Close "},"module-josm.html":{"id":"module-josm.html","title":"Module: josm","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin. It provides the implementation of the global josm object. Source: josm.js, line 1 Members &lt;static, readonly&gt; commands the global command history Replies the global command history. Use this object to undo/redo commands, or to clear the command history. Properties: Name Type Description commands module:josm/command.CommandHistory Source: josm.js, line 205 Example // undoes the last command josm.commands.undo(); // redoes two commands josm.commands.redo(2); &lt;static, readonly&gt; layers accessor for JOSM layers Replies the layers object. Properties: Name Type Description layers object the layers object Source: josm.js, line 37 Example josm.alert(\"num layers: \" + josm.layers.length); // name of first layer josm.alert(\"num layers: \" + josm.layers.get(0).name); &lt;static, readonly&gt; menu Replies an accessor for JOSMs menu bar. Replies an accessor for JOSMs menu bar. Use this object to inspect or modify the menu bar, i.e. to add additional menu items. Properties: Name Type Description menu module:josm/ui/menu.MenuBar accessor for JOSMs menu bar Source: josm.js, line 230 &lt;static, readonly&gt; version JOSM version string Replies the current JOSM version string. Properties: Name Type Description version string the JOSM version Source: josm.js, line 18 Example josm.alert(josm.version); Methods &lt;static&gt; alert(message) display a message Displays an alert window with a message Signatures alert(message) Displays an information message with an OK button. alert(message, ?options) Displays a message. The look and feel of the alert window depends on the options. The following options are supported: title:string (optional) the window title. A string is expected. Empty string if missing. messageType (optional) the message type. Use one of the following values: JOptionPane.INFORMATION_MESSAGE, \"info\",\"information\" JOptionPane.ERROR_MESSAGE, \"error\" JOptionPane.WARNING_MESSAGE, \"warning\", \"warn\" JOptionPane.QUESTION_MESSAGE, \"question\" JOptionPane.PLAIN_MESSAGE, \"plain\" Default value is JOptionPane.INFORMATION_MESSAGE. String values are not case sensitive and leading and trailing white space is removed. Parameters: Name Type Description message string the message Source: josm.js, line 114 Example // display an information alert josm.alert(\"Hello World!\"); // display an error alert josm.alert(\"Got an error\", { title: \"Error Alert\", messageType: \"error\" }); &lt;static&gt; loadClassFrom3dPartyPlugin(pluginName, className) Loads a class using the class loader of a 3d-party plugin Loads a class using the class loader of a 3d-party plugin Parameters: Name Type Description pluginName string the name of the plugin className string the class name Source: josm.js, line 264 Example var console = require(\"josm/scriptingconsole\"); var cls = josm.loadClassFrom3dPartyPlugin( \"contourmerge\", \"org.openstreetmap.josm.plugins.contourmerge.ContourMergePlugin\" ); // isEnabled() is a static method of the class ContourMergePlugin console.println(cls.isEnabled()); &lt;static&gt; open(files) Opens one or more files in JOSM Opens one or more files in JOSM. Creates and opens layers in JOSM, depending on the kind of file opened: creates a data layer for data files creates a gpx layer for gpx files creates an image layer for a directory with images etc. Parameters: Name Type Argument Description files File | string &lt;repeatable&gt; files to open Source: josm.js, line 186 Example // open a data file in a new data layer josm.open(\"/my/data/file.osm\"); Ã— Search results Close "},"module-josm_api.html":{"id":"module-josm_api.html","title":"Module: josm/api","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/api API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module provides functions to retrieve data from and upload data to an OSM server. Source: josm/api.js, line 1 Classes Api ChangesetApi Members &lt;static&gt; ApiConfig ApiConfig provides methods and properties for configuring API parameters. Properties: Name Type Description ApiConfig object Source: josm/api.js, line 903 &lt;static&gt; authMethod :string Get or set the authentication method. Get or set the authentication method. JOSM uses two authentication methods: basic Basic authentication with a username and a password oauth Authentication with the OAuth protocol. Type: string Properties: Name Type Description authMethod string the authentication method Source: josm/api.js, line 1010 Example var conf = require(\"josm/api\").ApiConfig; conf.authMethod; // -&gt; the current authentication method // set OAuth as authentication method conf.authMethod = \"oauth\"; &lt;static, readonly&gt; defaultServerUrl Get the default server URL Get the default server URL. Properties: Name Type Description defaultServerUrl string the default server URL Source: josm/api.js, line 981 Example var conf = require(\"josm/api\").ApiConfig; conf.defaultServerUrl; // -&gt; the default server url &lt;static&gt; serverUrl Get or set the API server URL. Get or set the API server URL. get Replies the currently configured server URL or undefinend, if no server URL is configured. set Sets the current server URL. If null or undefined, removes the current configuration. Accepts either a string or a URL. Only accepts http or https URLs. Properties: Name Type Description serverUrl string Source: josm/api.js, line 919 Example var conf = require(\"josm/api\").ApiConfig; conf.serverUrl; // -&gt; the current server url // set a new API url conf.serverUrl = \"http://api06.dev.openstreetmap.org\"; Methods &lt;static&gt; getCredentials(authMethod, options) Gets the credentials. Gets the credentials, i.e. username and password for the basic authentication method. Named options host:string The host name of the API server for which credentials are retrieved. If missing, the host name of the currently configured OSM API server is used. Parameters: Name Type Description authMethod string the authentication method. Either basic or oauth options object (optional) additional options (see above) Source: josm/api.js, line 1051 Returns: the credentials Type object Example var conf = require(\"josm/api\").ApiConfig; // get username/password for the current OSM API server var credentials = conf.getCredentials(\"basic\"); &lt;static&gt; setCredentials(authMethod, credentials, options) Set the credentials. Set the credentials, i.e. username and password for the basic authentication method. Basic authentication credentials are either an instance of java.net.PasswordAuthentication or an object {user: string, password: string}. OAuth authentication credentials are either an instance of OAuthToken or an object {key: string, secret: string}. Named options host:string The host name of the API server for which credentials are set. If missing, the host name of the currently configured OSM API server is used. Parameters: Name Type Description authMethod string the authentication method. Either \"basic\" or \"oauth\". credentials object | OAuthToken | PasswordAuthentication the credentials. options object (optional) additional options (see above) Source: josm/api.js, line 1147 Returns: the credentials Type object Example var conf = require(\"josm/api\").ApiConfig; // set the credentials conf.setCredentials(\"basic\", {user:\"test\", password:\"apassword\"}); Ã— Search results Close "},"module-josm_api-Api.html":{"id":"module-josm_api-Api.html","title":"Class: Api","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: Api josm/api~ Api API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new Api() Collection of static methods to download objects from and upload objects to the OSM server. Note: this class doesn't provide a constructor. Methods and properties are \"static\". Source: josm/api.js, line 280 Example // load the changeset api var api = require(\"josm/api\").Api; // download node 12345 var ds = api.downloadObject(12345, \"node\"); Members &lt;static&gt; downloadArea Downloads the objects within a bounding box Downloads the objects within a bounding box. Source: josm/api.js, line 679 Example var api = require(\"josm/api\").Api; var ds1 = api.downloadArea(new Bounds( new LatLon(46.9479186,7.4619484), // min new LatLon(46.9497642, 7.4660683) // max )); var ds1 = api.downloadArea({ min: {lat: 46.9479186, lon: 7.4619484}, max: {lat: 46.9497642, lon: 7.4660683} }); Methods &lt;static&gt; downloadObjects() Downloads an object from the server. Downloads an object from the server. There are multiple options to specify what object to download. In addition, the function accepts a set of optional named parameters as last argument. downloadObject(id, type, ?options) id is the global numeric id. type is either one of the strings \"node\", \"way\", or \"relation\", or one of the enumeration OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, or OsmPrimitiveType.RELATION downloadObject(id, ?options) id is a PrimitiveId or an object with the (mandatory) properties id and type, i.e. an object {id: ..., type: ...}. id is again a number, type is again either one of the strings \"node\", \"way\", or \"relation\", or one of the enumeration OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, or OsmPrimitiveType.RELATION. In both cases, ?options is an (optional) object with the following two (optional) properties: full: boolean If true, the object and its immediate children are downloaded, i.e. the nodes of a way and the relation members of a relation. Default if missing is false. version: number If present, the specified version of the object is downloaded. If missing, the current version is downloaded. If present, the option full is ignored. Source: josm/api.js, line 424 Returns: the downloaded primitives Type org.openstreetmap.josm.data.osm.DataSet Example var api = require(\"josm/api\").Api; var SimlePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; // download the node with id 12345 var ds1 = api.downloadObject(12345, \"node\"); // download the node with id 12345 var ds2 = api.downloadObject({id: 12345, type: \"node\"}); // download the full relation (including its members) with id 12345 var id = new SimplePrimitiveId(12345, OsmPrimitiveType.RELATION); var ds3 = api.downloadObject(id, {full: true}); // download version 5 of the full way 12345 (including its nodes) var ds4 = api.downloadObject(12345, OsmPrimitiveType.WAY, {version: 5}); &lt;static&gt; downloadReferrer() Downloads the objects referring to another object from the server. Downloads the objects referring to another object from the server. Downloads primitives from the OSM server which refer to a specific primitive. Given a node, the referring ways and relations are downloaded. Given a way or a relation, only referring relations are downloaded. The default behaviour is to reply proxy objects only. If you set the option {full: true}, every referring object is downloaded in full. There are multiple options to specify what referrers to download. In addition, the function accepts a set of optional named parameters as last argument. downloadReferrer(id, type, ?options) id is the global numeric id. type is either one of the strings \"node\", \"way\", or \"relation\", or one of the enumeration OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, or OsmPrimitiveType.RELATION. downloadReferrer(id, ?options) id is a PrimitiveId or an object with the (mandatory) properties id and type, i.e. an object {id: ..., type: ...}. id is again a number, type is again either one of the strings \"node\", \"way\", or \"relation\", or one of the enumeration OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, or OsmPrimitiveType.RELATION. In both cases, ?options is an (optional) object with the following (optional) property: full:boolean If true, the the full objects are retrieved using multi-gets. If missing or false, only proxy objects are downloaded. Default: false Source: josm/api.js, line 582 Returns: the downloaded primitives Type org.openstreetmap.josm.data.osm.DataSet Example var api = require(\"josm/api\").Api; var nbuilder = require(\"josm/builder\").NodeBuilder; var SimlePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; // download the objects referring to the node with id 12345 var ds1 = api.downloadReferrer(12345, \"node\"); // download the objects referring to the node with id 12345 var ds2 = api.downloadReferrer({id: 12345, type: \"node\"}); // download the relations referring to the relation with id 12345. // Referring relations are downloaded in full. var id = new SimplePrimitiveId(12345, OsmPrimitiveType.RELATION); var ds3 = api.downloadReferrer(id, {full: true}); // create the global node 12345 ... var node = nbuilder.create(12345); // ... and downloads its referrers in full var ds = api.downloadReferrer(node, {full: true}); Ã— Search results Close "},"module-josm_api-ChangesetApi.html":{"id":"module-josm_api-ChangesetApi.html","title":"Class: ChangesetApi","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: ChangesetApi josm/api~ ChangesetApi API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new ChangesetApi() Provides methods to open, close, get, update, etc. changesets on the OSM API server. Note: this class doesn't provide a constructor. Methods and properties are static. Source: josm/api.js, line 26 Example // load the changeset api var api = require(\"josm/api\").ChangesetApi; // create a new changeset on the server var cs = api.open(); Members &lt;static&gt; get Get a changeset from the server Get a changeset from the server get(id) gets the changeset for the id. id must be a number &gt; 0. Source: josm/api.js, line 218 Example var api = require(\"josm/api\").ChangesetApi; var Changeset = org.openstreetmap.josm.data.osm.Changeset; // get the changeset with id 12345 var cs1 = api.get(12345); // get the changeset with id 12345 var cs2 = new Changeset(12345); cs2 = api.get(cs2); Methods &lt;static&gt; exports.ChangesetApi.close(changeset) Closes a changeset Closes a changeset close(id) closes the changeset with the given id close(aChangeset) Xloses the changeset given by aChangeset Parameters: Name Type Description changeset number | Changeset the changeset to close Source: josm/api.js, line 142 Returns: the changeset Type org.openstreetmap.josm.data.osm.Changeset Example var api = require(\"josm/api\").ChangesetApi; var util = require(\"josm/util\"); var Changeset = org.openstreetmap.josm.data.osm.Changeset; // closs the changeset 12345 api.close(12345); // open a new changeset with the tags given by the supplied changeset var cs2 = new Changeset(12345); cs2 = api.close(cs2); util.assert(cs2.closed); // the changeset is now closed &lt;static&gt; update(changeset) Updates a changeset Updates a changeset update(aChangeset) Updates the changeset aChangeset Parameters: Name Type Description changeset Changeset the changeset to update Source: josm/api.js, line 170 Returns: the changeset Type org.openstreetmap.josm.data.osm.Changeset Example var api = require(\"josm/api\").ChangesetApi; var Changeset = org.openstreetmap.josm.data.osm.Changeset; // update the comment of a changeset var cs2 = new Changeset(12345); cs2.put(\"comment\", \"an updated comment\"); cs2 = api.update(cs2); Ã— Search results Close "},"module-josm_builder.html":{"id":"module-josm_builder.html","title":"Module: josm/builder","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/builder API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Collection of builders for creating OSM nodes, ways and relations. Source: josm/builder.js, line 1 Classes NodeBuilder RelationBuilder WayBuilder Ã— Search results Close "},"module-josm_builder-NodeBuilder.html":{"id":"module-josm_builder-NodeBuilder.html","title":"Class: NodeBuilder","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: NodeBuilder josm/builder~ NodeBuilder API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new NodeBuilder( [ds]) Creates a new node builder. NodeBuilder helps to create OSM nodes. Methods of NodeBuilder can be used in a static and in an instance context. It isn't necessary to create an instance of NodeBuilder, unless it is configured with a DataSet, which created nodes are added to. Parameters: Name Type Argument Description ds DataSet &lt;optional&gt; the dataset which created objects are added to Source: josm/builder.js, line 163 Example var NodeBuilder = require(\"josm/builder\").NodeBuilder; var DataSet = org.openstreetmap.josm.data.osm.DataSet; var ds = new DataSet(); // create a node builder without and underlying dataset ... var nbuilder = new NodeBuilder(); // ... with an underlying dataset .... nbuilder = new NodeBuilder(ds); // ... or using this factory method nbuilder = NodeBuilder.forDataSet(ds); // create a new local node at position (0,0) without tags var n1 = nbuilder.create(); // create a new global node at a specific position with tags var n2 = nbuilder.withPosition(1,1).withTags({name: 'test'}).create(123456); // create a new proxy for a global node // (an \"incomplete\" node in JOSM terminology) var n3 = nbuilder.createProxy(123456); Methods &lt;static&gt; create( [id] [, options]) Creates a new Node Creates a new Node. Can be used in an instance or in a static context.. Optional named arguments in the parameters args version - the version of a global node (number &gt; 0) lat - a valide latitude (number in the range [-90,90]) lon - a valide longitude (number in the range [-180,180]) pos - either an array [lat,lon], an object {lat: ..., lon: ...}, or an instance of LatLon tags - an object with tags. Null values and undefined values are ignored. Any other value is converted to a string. Leading and trailing white space in keys is removed. Parameters: Name Type Argument Description id number &lt;optional&gt; a global node id. If missing and not set before using withId(..), creates a new local id. options object &lt;optional&gt; additional options for creating the node Source: josm/builder.js, line 267 Returns: the created node Type org.openstreetmap.josm.data.osm.Node Example var nb = require(\"josm/builder\").NodeBuilder // create a new local node at position [0,0] var n1 = nb.create(); // create a new global node at position [0,0] var n2 = nb.create(12345); // create a new global way with version 3 at a specific position // and with some tags var n3 = nb.create(12345, {version: 3, lat: 23.45, lon: 87.23, tags: {amenity: \"restaurant\"} }); &lt;static&gt; createProxy(id) Creates a new proxy Node Creates a new proxy Node. A proxy node is a node, for which we only know its global id. In order to know more details (position, tags, etc.), we would have to download it from the OSM server. The method can be used in a static and in an instance context. Parameters: Name Type Description id number the node id (not null, number &gt; 0 expected) Source: josm/builder.js, line 382 Returns: the new proxy node Type org.openstreetmap.josm.data.osm.Node Example var nbuilder = require(\"josm/builder\").NodeBuilder; // a new proxy node for the global node with id 12345 var n1 = nbuilder.createProxy(12345); &lt;static&gt; exports.NodeBuilder#forDataSet(ds) Creates a new NodeBuilder for a specific DataSet. Creates or configures a NodeBuilder which will add created nodes to the dataset ds. Parameters: Name Type Description ds DataSet the dataset which created objects are added to Source: josm/builder.js, line 231 Returns: the node builder Type module:josm/builder.NodeBuilder Example var builder = require(\"josm/builder\"); // create a new node builder building to a data set var ds = new org.openstreetmap.josm.data.osm.DataSet(); var nb = builder.NodeBuilder.forDataSet(ds); // configure an existing node builder var nb = new builder.NodeBuilder(); nb = nb.forDataSet(ds); &lt;static&gt; withId(id, version) Declares the node id and version. Declares the global node id and the global node version. The method can be used in a static and in an instance context. Parameters: Name Type Description id number (mandatory) the global node id. A number &gt; 0. version number (optional) the global node version. If present, a number &gt; 0. If missing, the version 1 is assumed. Source: josm/builder.js, line 487 Returns: the node builder (for method chaining) Type module:josm/builder~NodeBuilder &lt;static&gt; withPosition(lat, lon) Declares the node position. Declares the node position. The method can be used in a static and in an instance context. Parameters: Name Type Description lat Number the latitude. A number in the range [-90..90]. lon Number the longitude. A number in the range [-180..180]. Source: josm/builder.js, line 419 Returns: a node builder (for method chaining) Type module:josm/builder~NodeBuilder Example var nbuilder = require(\"josm/builder\").NodeBuilder; // a new global node with the global id 12345 at position (34,45) var n1 = nbuilder.withPosition(34,45).create(12345); // a new local node at position (23.2, 87.33) var n2 = nbuilder.withPosition(23.3,87.33).create(); &lt;static&gt; withTags( [tags]) Declares the node tags. Declares the tags to be assigned to the new node. The method can be used in a static and in an instance context. Parameters: Name Type Argument Description tags object &lt;optional&gt; the tags Source: josm/builder.js, line 454 Returns: the node builder (for method chaining) Type module:josm/builder~NodeBuilder Example var nbuilder = require(\"josm/builder\").NodeBuilder; // a new global node with the global id 12345 and tags name=test and // highway=road var n1 = nbuilder.withTags({\"name\":\"test\", \"highway\":\"road\"}).global(12345); // a new local node tags name=test and highway=road var tags = { \"name\" : \"test\", \"highway\" : \"road\" }; var n2 = nbuilder.withTags(tags).local(); Ã— Search results Close "},"module-josm_builder-RelationBuilder.html":{"id":"module-josm_builder-RelationBuilder.html","title":"Class: RelationBuilder","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: RelationBuilder josm/builder~ RelationBuilder API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new RelationBuilder(ds) Creates a new builder for OSM relations RelationBuilder helps to create OSM Relations. Methods of RelationBuilder can be used in a static and in an instance context. It isn't necessary to create an instance of RelationBuilder, unless it is configured with a DataSet, which created ways are added to. Parameters: Name Type Description ds DataSet (optional) a JOSM dataset which created ways are added to. If missing, the created ways aren't added to a dataset. Source: josm/builder.js, line 930 Example var RelationBuilder = require(\"josm/builder\").RelationBuilder; var DataSet = org.openstreetmap.josm.data.osm.DataSet; var ds = new DataSet(); // create a relation builder without and underlying dataset ... var rbuilder = new RelationBuilder(); // ... with an underlying dataset ... rbuilder = new RelationBuilder(ds); // ... or using this factory method rbuilder = RelationBuilder.forDataSet(ds); // create a new local relation var r1 = rbuilder.create(); // create a new global way var r2 = rbuilder.withTags({route: 'bicycle'}).create(123456); // create a new proxy for a global relation // (an \"incomplete\" node in JOSM terminology) var r3 = rbuilder.createProxy(123456); Methods &lt;static&gt; forDataSet(ds) Creates a new RelationBuilder which adds created relations to a dataset Creates or configures a RelationBuilder which will add created nodes to the dataset ds. Parameters: Name Type Description ds DataSet a JOSM dataset which created ways are added to. Source: josm/builder.js, line 977 Returns: the relation builder Type module:josm/builder.RelationBuilder Example var builder = require(\"josm/builder\"); // create a new relation builder building to a data set var ds = new org.openstreetmap.josm.data.osm.DataSet(); var rb = builder.RelationBuilder.forDataSet(ds); // configure an existing relation builder var wb = new builder.RelationBuilder(); nb = wb.forDataSet(ds); &lt;static&gt; member( [role], primitive) Utility function - creates a relation member Create a RelationMember member(role, obj) Create a relation member with role role and member object obj. role can be null or undefined, obj must neither be null nor undefinde. role is a string, obj is an OSM node, a way, or a relation. member(obj) Create a relation member for the member object obj. obj must neither be null nor undefinde. obj is an OSM node, a way, or a relation. The created relation member has no role. Parameters: Name Type Argument Description role string &lt;optional&gt; the member role primitive primitive the member primitive Source: josm/builder.js, line 1012 Returns: the relation member Type org.openstreetmap.josm.data.osm.RelationMember Example var member = require(\"josm/builder\").RelationBuilder.member; var nb = require(\"josm/builder\").NodeBuilder; // create a new RelationMember with role 'house' for a new node var m1 = member(\"house\", nb.create()); // create a new RelationMember with an empty role for a new node var m2 = member(nb.create()); create( [id] [, args]) Creates a new relation. Creates a new relation. Can be used in an instance or in a static context. Optional named arguments in the parameters args id - the id of a global relation (number &gt; 0) version - the version of a global relation (number &gt; 0) members - an array or a list of relation members, nodes, ways, or relation tags - an object with tags. Null values and undefined values are ignored. Any other value is converted to a string. Leading and trailing white space in keys is removed. Parameters: Name Type Argument Description id number &lt;optional&gt; a global way id. If missing and not set before using withId(..), creates a new local id. args object &lt;optional&gt; additional parameters for creating the relation Source: josm/builder.js, line 1257 Returns: the relation Type org.openstreetmap.josm.data.osm.Relation Example var rb = require(\"josm/builder\").RelationBuilder var nb = require(\"josm/builder\").NodeBuilder var member = rb.member; // create a new local relation var r1 = rb.create(); // create a new global relation var r2 = rb.create(12345); // create a new global relation with version 3 with some tags and two // members var r3 = rb.create(12345, { version: 3, tags: {type: \"route\"}, members: [member('house', nb.create()), member(nb.create())] }); createProxy(id) Creates a new proxy relation. Creates a new proxy relation. A proxy relation is a relation, for which we only know its global id. In order to know more details (members, tags, etc.), we would have to download it from the OSM server. The method can be used in a static and in an instance context. Parameters: Name Type Description id number the id for the proxy relation Source: josm/builder.js, line 1141 Returns: the new proxy relation Type org.openstreetmap.josm.data.osm.Relation Example var rbuilder = require(\"josm/builder\").RelationBuilder; // a new proxy relation for the global way with id 12345 var r1 = rbuilder.createProxy(12345); withId(id, version) Declares the relation id and version. Declares the global relation id and the global relation version. The method can be used in a static and in an instance context. Parameters: Name Type Description id number (mandatory) the global relation id. A number &gt; 0. version number (optional) the global relation version. If present, a number &gt; 0. If missing, the version 1 is assumed. Source: josm/builder.js, line 1079 Returns: the relation builder (for method chaining) Type module:josm/builder~RelationBuilder Example var rbuilder = require(\"josm/builder\").RelationBuilder; // creates a global relation with id 12345 an version 12 var r = rbuilder.withId(12345, 12).create(); withMembers(nodes) Declares the members of a relation. Declares the members of a relation. Accepts either a vararg list of relation members, nodes, ways or relations, an array of relation members, nodes ways or relations, or a Java list of members, nodes, ways or relation. The method can be used in a static and in an instance context. Parameters: Name Type Description nodes the list of members. See description and examples. Source: josm/builder.js, line 1182 Returns: the relation builder (for method chaining) Type module:josm/builder~RelationBuilder Example var rbuilder = require(\"josm/builder\").RelationBuilder; var nbuilder = require(\"josm/builder\").NodeBuilder; var wbuilder = require(\"josm/builder\").WayBuilder; var member = require(\"josm/builder\").RelationBuilder.member; var r1 = rbuilder.withMembers( member(\"house\", nbuilder.create()), member(\"house\", nbuilder.create()), member(\"street\", wbuilder.create()) ).create(); withTags( [tags]) Declares the tags to be assigned to the new relation. Declares the tags to be assigned to the new relation. The method can be used in a static and in an instance context. Parameters: Name Type Argument Description tags object &lt;optional&gt; the tags Source: josm/builder.js, line 1107 Returns: a relation builder (for method chaining) Type module:josm/builder~RelationBuilder Example var rbuilder = require(\"josm/builder\").RelationBuilder; // a new global relation with the global id 12345 and tags route=\"bicycle\" //and name=\"n8\" var r1 = rbuilder.withTags({name:\"n8\", route:\"bicycle\"}).create(12345); // a new local node tags name=test and highway=road var tags = { name : \"n8\", route : \"bicycle\" }; var r2 = rbuilder.withTags(tags).create(); Ã— Search results Close "},"module-josm_builder-WayBuilder.html":{"id":"module-josm_builder-WayBuilder.html","title":"Class: WayBuilder","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: WayBuilder josm/builder~ WayBuilder API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new WayBuilder( [ds]) Creates a new builder for OSM ways WayBuilder helps to create OSM Ways. Methods of WayBuilder can be used in a static and in an instance context. It isn't necessary to create an instance of WayBuilder, unless it is configured with a DataSet, which created ways are added to. Parameters: Name Type Argument Description ds DataSet &lt;optional&gt; a JOSM dataset which created ways are added to. If missing, the created ways aren't added to a dataset. Source: josm/builder.js, line 521 Example var WayBuilder = require(\"josm/builder\").WayBuilder; var DataSet = org.openstreetmap.josm.data.osm.DataSet; var ds = new DataSet(); // create a way builder without and underlying dataset ... var wbuilder = new WayBuilder(); // ... with an underlying dataset .... wbuilder = new WayBuilder(ds); // ... or using this factory method wbuilder = WayBuilder.forDataSet(ds); // create a new local way var w1 = wbuilder.create(); // create a new global way var w2 = wbuilder.withTags({highway: 'residential'}).create(123456); // create a new proxy for a global way // (an \"incomplete\" node in JOSM terminology) var w3 = wbuilder.createProxy(123456); Methods &lt;static&gt; create( [id] [, options]) Creates a new way Creates a new way. Can be used in an instance or in a static context. Optional named arguments in the parameters options: id:number the id of a global way (number &gt; 0) version:number the version of a global way (number &gt; 0) nodes:array|list an array or a list of nodes tags:object an object with tags. Null values and undefined values are ignored. Any other value is converted to a string. Leading and trailing white space in keys is removed. Parameters: Name Type Argument Description id number &lt;optional&gt; a global way id. If missing and not set before using withId(..), creates a new local id. options object &lt;optional&gt; additional parameters for creating the way Source: josm/builder.js, line 800 Returns: the created way Type org.openstreetmap.josm.data.osm.Way Example var wb = require(\"josm/builder\").WayBuilder // create a new local way var w1 = wb.create(); // create a new global way var w2 = wb.create(12345); // create a new global way with version 3 at a specific position and with // some tags var w3 = wb.create(12345, { version: 3, tags: {amenity: \"restaurant\"}, nodes: [n1,n2,n3] }); &lt;static&gt; createProxy() Creates a new proxy way Creates a new proxy way. A proxy way is a way, for which we only know its global id. In order to know more details (nodes, tags, etc.), we would have to download it from the OSM server. The method can be used in a static and in an instance context. Source: josm/builder.js, line 736 Returns: the new proxy way Type org.openstreetmap.josm.data.osm.Way Example var wbuilder = require(\"josm/builder\").WayBuilder; // a new proxy way for the global way with id 12345 var w1 = wbuilder.createProxy(12345); &lt;static&gt; forDataSet(ds) Creates a new WayBuilder with an underlying dataset. Creates or configures a WayBuilder which will add created nodes to the dataset ds. Parameters: Name Type Description ds DataSet the dataset which created objects are added to Source: josm/builder.js, line 567 Returns: the way builder Type module:josm/builder~WayBuilder Example var builder = require(\"josm/builder\"); // create a new way builder building to a data set var ds = new org.openstreetmap.josm.data.osm.DataSet(); var wb = builder.WayBuilder.forDataSet(ds); // configure an existing way builder var wb = new builder.WayBuilder(); nb = wb.forDataSet(ds); &lt;static&gt; withId(id [, version]) Declares the global way id and the global way version. Declares the global way id and the global way version. The method can be used in a static and in an instance context. Parameters: Name Type Argument Description id number (mandatory) the global way id. A number &gt; 0. version number &lt;optional&gt; the global way version. If present, a number &gt; 0. If missing, the version 1 is assumed. Source: josm/builder.js, line 602 Returns: the way builder (for method chaining) Type module:josm/builder~WayBuilder Example var wbuilder = require(\"josm/builder\").WayBuilder; // creates a global way with id 12345 an version 12 var w = wbuilder.withId(12345, 12).create(); &lt;static&gt; withNodes(nodes) Declares the nodes of the way. Declares the nodes of the way. Accepts either a vararg list of Node, an array of Nodes or a Java list of Nodes. At least two non-identical nodes have to be supplied. The same node can occure more than once in the list, but a consecutive sequence of the same node is collapsed to one node. The method can be used in a static and in an instance context. Parameters: Name Type Description nodes the list of nodes. See description and examples. Source: josm/builder.js, line 663 Returns: the way builder (for method chaining) Type module:josm/builder~WayBuilder Example var wbuilder = require(\"josm/builder\").WayBuilder; var nbuilder = require(\"josm/builder\").NodeBuilder; // creates a new local way with two local nodes var way = builder.withNodes( nbuilder.create(), nbuilder.create() ).create(); &lt;static&gt; withTags( [tags]) Declares the tags to be assigned to the new way. Declares the tags to be assigned to the new way. The method can be used in a static and in an instance context. Parameters: Name Type Argument Description tags object &lt;optional&gt; the tags Source: josm/builder.js, line 629 Returns: the way builder (for method chaining) Type module:josm/builder~WayBuilder Example var wbuilder = require(\"josm/builder\").WayBuilder; // a new global way with the global id 12345 and tags name=\"Laubeggstrasse\" // and highway=residential var n1 = wbuilder.withTags({name:\"Laubeggstrasse\", highway:\"residential\"}) .create(12345); // a new local node tags name=test and highway=road var tags = { name : \"Laubeggstrasse\", highway : \"residential\" }; var n2 = wbuilder.withTags(tags).create(); Ã— Search results Close "},"module-josm_command.html":{"id":"module-josm_command.html","title":"Module: josm/command","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/command API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. A collection of functions to create commands which can be applied, undone and redone on {@class org.opoenstreetmap.josm.gui.layer.OsmDataLayer}s. Source: josm/command.js, line 1 Classes AddCommand A command to add a collection of objects to a data layer ChangeCommand A command to change a collection of objects in a data layer. CommandHistory Accessor to the global command history DeleteCommand A command to delete a collection of objects in a data layer. Methods &lt;static&gt; add(primitives) Creates a command to add a collection of objects Creates a command to add a collection of objects to a data layer. Signatures add(primitive, primitive, ...) primitive are Nodes, Ways, or Relationss. Or javascript array or Java collections thereof. Parameters: Name Type Argument Description primitives primitive | Array.&lt;primitive&gt; | Collection &lt;repeatable&gt; the primitives to add Source: josm/command.js, line 98 Returns: the command object Type module:josm/command.AddCommand Example var cmd = require(\"josm/command\"); var layers = require(\"josm/layer\"); var layer = layers.get(\"Data Layer 1\"); // add two nodes cmd.add(n1,n1).applyTo(layer); // add an array of two nodes and a way layer.apply( cmd.add([n1,n2,w2]) ); &lt;static&gt; change() Creates a command to change a collection of objects Creates a command to change a collection of objects in a data layer. Signatures change(obj,obj,..., options) obj are Nodes, Ways, or Relationss. Or javascript array or Java collections thereof. The mandatory last argument is an object with named parameters. It accepts t he following named parameters: lat:number Changes the latitude of the target nodes to lat. lon:number Changes the longitude of the target nodes to lon. pos: LatLon|object Changes the position of the target nodes to pos. pos is either a LatLon or an object {lat:..., lon:...} tags:Map|object Changes the tags of the target objects to tags. nodes:List|array Changes the nodes of the target way sto nodes. members:List|array Changes the nodes of the target relations to members. Source: josm/command.js, line 366 Returns: the change command object Type module:josm/command.ChangeCommand Example var cmd = require(\"josm/command\"); var layers = require(\"josm/layer\"); var layer = layers.get(\"Data Layer 1\"); // change the position of a node cmd.change(n1,n1, {lat: 123.45, lon: 44.234}).applyTo(layer); // change the nodes of a way layer.apply( cmd.change(w2, {nodes: [n1,n2,3]}) ); // change the tags of a collection of primitives cmd.change(n1,n3, w1,r1, { tags: {\"mycustommtag\": \"value\"} }).applyTo(layer); &lt;static&gt; combineSelectedWays() Combines the currently selected ways. Combines the currently selected ways in the active layer into one resulting way. Returns without effect if there is no active layer the active layer is not a data layer there are less than two selected ways in the active layer Reuses the logic behind the JOSM standard menu entry Tools-&gt;Combine Ways. If invoked from a script, this may trigger modal dialogs which are presented to the user, in particular if the direction of the ways has to be reversed because otherwise they could not be combined. Source: josm/command.js, line 610 &lt;static&gt; combineWays(ways) Combines two or more ways into one resulting way. Combines two or more ways into one resulting way. Reuses the logic behind the JOSM standard menu entry Tools-&gt;Combine Ways. If invoked from a script, this may trigger modal dialogs which are presented to the user, in particular if the direction of the ways has to be reversed because otherwise they could not be combined. Parameters: Name Type Description ways Way | array the ways to be combined Source: josm/command.js, line 553 Example var cmd = require(\"josm/command\"); var layers = require(\"josm/layer\"); var ds = layers.activeLayer.data; var ways = [ds.way(1), ds.way(2), ds.way(3)]; // pass in an array ... cmd.combineWays(ways); // ... or the individual ways ... cmd.combineWays(ds.way(1), ds.way(2), ds.way(3)); // ... or any combination thereof. &lt;static&gt; delete(primitives) Creates a command to delete a collection of objects Creates a command to delete a collection of objects in a data layer. Signatures delete(primitive, primitive,...) primitive are Nodes, Ways, or Relationss. Or javascript array or Java collections thereof. Parameters: Name Type Argument Description primitives primitive | Array.&lt;primitive&gt; | Collection &lt;repeatable&gt; the primitives to delete Source: josm/command.js, line 178 Returns: the command object Type module:josm/command.DeleteCommand Example var cmd = require(\"josm/command\"); var layers= require(\"josm/layer\"); var layer = layers.get(\"Data Layer 1\"); // delete two nodes cmd.delete(n1,n1).applyTo(layer); // delete an array of two nodes and a way layer.apply( cmd.delete([n1,n2,w2]) ); Ã— Search results Close "},"module-josm_command.AddCommand.html":{"id":"module-josm_command.AddCommand.html","title":"Class: AddCommand","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: AddCommand josm/command. AddCommand API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new AddCommand(objs) A command to add a collection of objects to a data layer A command to add a collection of objects to a data layer. Parameters: Name Type Description objs Collection | array the objects to add Source: josm/command.js, line 59 Methods applyTo(layer) Applies the command to a layer. Applies the command to a layer. Parameters: Name Type Description layer OsmDataLayer the data layer Source: josm/command.js, line 64 createJOSMCommand(layer) Creates the internal JOSM command for this command Creates the internal JOSM command for this command Parameters: Name Type Description layer OsmDataLayer the data layer Source: josm/command.js, line 76 Returns: the command Type org.openstreetmap.josm.command.Command Ã— Search results Close "},"module-josm_command.ChangeCommand.html":{"id":"module-josm_command.ChangeCommand.html","title":"Class: ChangeCommand","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: ChangeCommand josm/command. ChangeCommand API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new ChangeCommand(objs, change) A command to change a collection of objects in a data layer. A command to change a collection of objects in a data layer. Parameters: Name Type Description objs Collection | array the objects to change change Change the change specification Source: josm/command.js, line 327 Methods applyTo(layer) Applies the command to a layer. Applies the command to a layer. Parameters: Name Type Description layer OsmDataLayer the data layer Source: josm/command.js, line 332 createJOSMCommand(layer) Creates the internal JOSM command for this command Creates the internal JOSM command for this command Parameters: Name Type Description layer OsmDataLayer the data layer Source: josm/command.js, line 344 Returns: the command object Type org.openstreetmap.josm.command.Command Ã— Search results Close "},"module-josm_command.CommandHistory.html":{"id":"module-josm_command.CommandHistory.html","title":"Class: CommandHistory","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: CommandHistory josm/command. CommandHistory API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new CommandHistory() Accessor to the global command history Provides static methods to redo and undo commands. Source: josm/command.js, line 465 Methods &lt;static&gt; clear( [layer]) Removes commands in the command history Removes commands in the command history, either all commands, or only the commands applied to a specific layer. Parameters: Name Type Argument Description layer Layer &lt;optional&gt; the reference layer. Only commands applied to this layer are removed. Default if missing: all commands are removed. Source: josm/command.js, line 517 &lt;static&gt; redo( [depth]) Redoes the last depth commands. Redoes the last depth commands. Parameters: Name Type Argument Default Description depth number &lt;optional&gt; 1 the number of commands to be redone. Source: josm/command.js, line 492 &lt;static&gt; undo( [depth]) Undoes the last depth commands. Undoes the last depth commands. Parameters: Name Type Argument Default Description depth number &lt;optional&gt; 1 the number of commands to be undone Source: josm/command.js, line 467 Ã— Search results Close "},"module-josm_command.DeleteCommand.html":{"id":"module-josm_command.DeleteCommand.html","title":"Class: DeleteCommand","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: DeleteCommand josm/command. DeleteCommand API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new DeleteCommand(objs) A command to delete a collection of objects in a data layer. A command to delete a collection of objects in a data layer. Parameters: Name Type Description objs Collection | array the objects to add Source: josm/command.js, line 141 Methods applyTo(layer) Applies the command to a layer. Applies the command to a layer. Parameters: Name Type Description layer OsmDataLayer the data layer Source: josm/command.js, line 145 createJOSMCommand(layer) Creates the internal JOSM command for this command Creates the internal JOSM command for this command Parameters: Name Type Description layer OsmDataLayer the data layer Source: josm/command.js, line 157 Returns: the command object Type org.openstreetmap.josm.command.Command Ã— Search results Close "},"module-josm_layers.html":{"id":"module-josm_layers.html","title":"Module: josm/layers","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/layers API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Provides access to the JOSM layers. Source: josm/layers.js, line 1 Members &lt;static&gt; activeLayer Set or get the active layer. Set or get the active layer. get Replies the active layer or undefined. set Assign either an existing Layer, the name of a layer as string, or a layer index as number. Properties: Name Type Description activeLayer org.openstreetmap.josm.layer.Layer the active layer Source: josm/layers.js, line 29 &lt;static, readonly&gt; length Replies the number of currently open layers. Replies the number of currently open layers. Properties: Name Type Description length number the number of layers Source: josm/layers.js, line 14 Methods &lt;static&gt; add(obj) Adds a layer. Adds a layer. Either pass in a layer object or a data set. In the later case, an OsmDataLayer is automatically created. Parameters: Name Type Description obj Layer | DataSet a layer to add, or a dataset. Ignored if null or undefined. Source: josm/layers.js, line 159 Returns: the added layer Type org.openstreetmap.josm.gui.layer.Layer Example var layers = require(\"josm/layers\"); var OsmDataLayer = org.openstreetmap.josm.gui.layer.OsmDataLayer; var DataSet = org.openstreetmap.josm.data.osm.DataSet; var dataLayer = new OsmDataLayer(new DataSet(), null, null); // add a layer ... layers.add(dataLayer); // or add a dataset, which will create a data layer var ds = new DataSet(); layer.add(ds); &lt;static&gt; addDataLayer(args) Adds a data layer Creates and adds a new data layer. The new layer becomes the new edit layer. Signatures addDataLayer() create data layer with a new dataset and default name addDataLayer(ds) create data layer with dataset ds and default name addDataLayer(name) create data layer with a new dataset and name name addDataLayer({name: ..., ds: ...}) create data layer with a new dataset and name name Parameters: Name Type Description args string | DataSet | object see description Source: josm/layers.js, line 253 Returns: the added layer Type org.openstreetmap.josm.gui.layer.OsmDataLayer Example // creates a new data layer var layer = josm.layers.addDataLayer(); // creates a new data layer with name 'test' layer = josm.layers.addDataLayer(\"test\"); // creates a new data layer for the dataset ds var ds = new DataSet(); layer = josm.layers.addDataLayer(ds); &lt;static&gt; get(key) Replies one of the layers given a key. Replies one of the layers given a key. If key is a number, replies the layer with index key, or undefined, if no layer for this index exists. If key is a string, replies the first layer whose name is identical to key (case insensitive, without leading/trailing whitespace), or undefined, if no layer with such a name exists. Parameters: Name Type Description key number | string the key to retrieve the layer Source: josm/layers.js, line 86 Returns: Type org.openstreetmap.josm.layer.Layer Example var layers = require(\"josm/layers\"); // get the first layer var layer1 = layers.get(0); // get the first layer with name \"data layer\" var layer2 = layers.get(\"data layer\"); &lt;static&gt; has(layer) Checks whether layer is currently registered layer. Checks whether layer is a currently registered layer. Parameters: Name Type Description layer Layer | string | number a layer, a layer name, or a layer index Source: josm/layers.js, line 120 Returns: true, if the layer or at least one layer with the given name exists. False, otherwise. Type boolean Example var layers = require(\"josm/layers\"); // is there a layer with name \"my layer\"? var b = layers.has(\"my layer\"); // is there a layer at index position 2 b = layers.has(2); // is there a specific layer? var l = layers.get(0); b = layers.has(l); &lt;static&gt; remove(key) Removes a layer. Removes a layer with the given key. If key is a Number, removes the layer with the index key. If the index doesn't isn't a valid layer index, nothing is removed. If key is a string, removes the layer with the name key. Leading and trailing white space is removed, matching is a case-insensitive sub-string match. Parameters: Name Type Description key number | string indicates the layer to remove Source: josm/layers.js, line 215 Example var layers = require(\"josm/layers\"); // remove the first layer layers.remove(0); // remove the first layer matching with the supplied name layers.remove(\"myLayerName\"); Ã— Search results Close "},"module-josm_mixin_BoundsMixin.html":{"id":"module-josm_mixin_BoundsMixin.html","title":"Module: josm/mixin/BoundsMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/BoundsMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class Bounds. Source: josm/mixin/BoundsMixin.js, line 1 Mixins BoundsMixin JavaScript mixin for the java class Bounds Ã— Search results Close "},"module-josm_mixin_BoundsMixin-BoundsMixin.html":{"id":"module-josm_mixin_BoundsMixin-BoundsMixin.html","title":"Mixin: BoundsMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: BoundsMixin josm/mixin/BoundsMixin~ BoundsMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin is auto-loaded by the scripting plugin and mixed into the native java class Bounds. Source: josm/mixin/BoundsMixin.js, line 12 Methods &lt;static&gt; make(obj) Creates a Bounds from a javascript object. Parameters: Name Type Description obj object a javascript object Source: josm/mixin/BoundsMixin.js, line 24 Returns: the bounds Type org.openstreetmap.josm.data.Bounds Example var bounds1 = Bounds.make({minlat: 46.9479186, minlon: 7.4619484, maxlat: 46.9497642, maxlon: 7.4660683}); var bounds2 = Bounds.make({ min: {lat: 46.9479186, lon: 7.4619484}, max: {lat: 46.9497642, lon: 7.4660683} }); Ã— Search results Close "},"module-josm_mixin_ChangesetMixin.html":{"id":"module-josm_mixin_ChangesetMixin.html","title":"Module: josm/mixin/ChangesetMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/ChangesetMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class Changeset. Source: josm/mixin/ChangesetMixin.js, line 1 Mixins ChangesetMixin JavaScript mixin for the java class Changeset Ã— Search results Close "},"module-josm_mixin_ChangesetMixin-ChangesetMixin.html":{"id":"module-josm_mixin_ChangesetMixin-ChangesetMixin.html","title":"Mixin: ChangesetMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: ChangesetMixin josm/mixin/ChangesetMixin~ ChangesetMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin is auto-loaded by the scripting plugin and mixed into the native java class Changeset. Source: josm/mixin/ChangesetMixin.js, line 11 Members &lt;readonly&gt; bounds Get the bounding box the bounding box. Get the bounding box the bounding box. get: Replies a Bounds or undefined, if the bounding box isn't known. Properties: Name Type Description bounds org.openstreetmap.josm.data.Bounds the bounding box Source: josm/mixin/ChangesetMixin.js, line 148 closedAt Set or get the date this changeset was closed. Set or get the date this changeset was closed. get: Replies a utilDate or undefined, if the date isn't known. set: Assign null or undefined to clear the date. Assign a Date to set the date. Note, that you can't assign a javascript Date object. Properties: Name Type Description closedAt java.util.Date date the changeset was closed Source: josm/mixin/ChangesetMixin.js, line 301 createdAt Set or get the date this changeset was created. Set or get the date this changeset was created. get: Replies a utilDate or undefined, if the date isn't known. set: Assign null or undefined to clear the date. Assign a Date to set the date. Note, that you can't assign a javascript Date object. Properties: Name Type Description createdAt java.util.Date date the changeset was created Source: josm/mixin/ChangesetMixin.js, line 262 &lt;readonly&gt; id Replies the unique numeric id. Replies the unique numeric id. Properties: Name Type Description id number Source: josm/mixin/ChangesetMixin.js, line 22 isOpen Get or set whether this changeset is open. Get or set whether this changeset is open. Properties: Name Type Description isOpen boolean Source: josm/mixin/ChangesetMixin.js, line 38 max Get or set the coordinates of the upper right corner Set or get the coordinates of the upper right corner of the bounding box. get: Replies a LatLon or undefined, if max isn't known. set: Assign null or undefined to clear the coordinates. Assign a LatLon or an object {lat:number, lon: number} to set the coordinates. Properties: Name Type Description max org.openstreetmap.josm.data.coor.LatLon the upper right corner Source: josm/mixin/ChangesetMixin.js, line 106 min Get or set the coordinates of the lower left corner Set or get the coordinates of the lower left corner of the bounding box. get: Replies a LatLon or undefined, if min isn't known. set: Assign null or undefined to clear the coordinates. Assign a LatLon or an object {lat:number, lon: number} to set the coordinates. Properties: Name Type Description min org.openstreetmap.josm.data.coor.LatLon the lower left corner Source: josm/mixin/ChangesetMixin.js, line 63 tags Get or set the tags. Get or set the tags of the changeset. get: - replies the tags as javascript object. set: assign null or undefined to remove all tags assign an object to set its properties as tags. assign an java.util.Map to set its elements as tags null values and undefined tag values aren't assigned. tag keys are normalized, i.e. leading and trailing white space is removed. Both, tag keys and tag values, are converted to strings. Properties: Name Type Description tags object the tags Source: josm/mixin/ChangesetMixin.js, line 203 Example var cs = .... // create a changeset // set the tags using a javascript object cs.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; cs.tags.amenity; // -&gt; restaurant cs.tags.name; // -&gt; Obstberg // remove all tags cs.tags = null; // set tags using a java map var tags = new java.util.HashMap(); tags.put(\"amenity\", \"restaurant\"); tags.put(\"name\", \"Obstberg\"); cs.tags = tags; Ã— Search results Close "},"module-josm_mixin_DataSetMixin.html":{"id":"module-josm_mixin_DataSetMixin.html","title":"Module: josm/mixin/DataSetMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/DataSetMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class DataSet. Source: josm/mixin/DataSetMixin.js, line 1 Classes DataSetSelectionFacade Creates a facade Mixins DataSetMixin JavaScript mixin for the java class DataSet Ã— Search results Close "},"module-josm_mixin_DataSetMixin-DataSetMixin.html":{"id":"module-josm_mixin_DataSetMixin-DataSetMixin.html","title":"Mixin: DataSetMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: DataSetMixin josm/mixin/DataSetMixin~ DataSetMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin provides additional properties and methods which you can invoke on an instance of DataSet. Source: josm/mixin/DataSetMixin.js, line 27 Example var ds = new org.openstreetmap.josm.data.osm.DataSet(); // create objects var n1 = ds.nodeBuilder.create(); var n2 = ds.nodeBuilder.create(); var w1 = ds.wbuilder.create(1234, {nodes: [n1,n2]}); // access and manipulate the objects in the dataset ds.add(w1); ds.has(w1); // -&gt; true ds.has(n1); // -&gt; true // access and manipulate the selected objects ds.selection.add(n2); ds.selection.isSelected(n2); // -&gt; true ds.selection.toogle(n2); Members &lt;readonly&gt; nodeBuilder the builder for creating Nodes Replies a node builder to create nodes in this dataset. Properties: Name Type Description nodeBuilder module:josm/builder~NodeBuilder a node builder for this dataset Source: josm/mixin/DataSetMixin.js, line 533 Example var ds = new DataSet(); var n = ds.nodeBuilder.withId(1234).withTags({amenity: \"restaurant\"}) .create(); ds.has(n); // --&gt; true &lt;readonly&gt; relationBuilder the builder for creating Relations Replies a relation builder to create relations in this dataset. Properties: Name Type Description relationBuilder module:josm/builder~RelationBuilder the relation builder for this dataset Source: josm/mixin/DataSetMixin.js, line 576 Example var ds = new DataSet(); var r = ds.relationBuilder.withId(8765).create({tags: {type: \"network\"}}); ds.has(r); // --&gt; true selection to manipulate the selected objects in the dataset Replies the dataset selection object. Properties: Name Type Description selection module:josm/mixin/DataSetMixin~DataSetSelectionFacade a handler for the selected objects in the dataset Source: josm/mixin/DataSetMixin.js, line 597 &lt;readonly&gt; wayBuilder the builder for creating Ways Replies a way builder to create ways in this dataset. Properties: Name Type Description wayBuilder module:josm/builder~WayBuilder the way builder for this dataset Source: josm/mixin/DataSetMixin.js, line 555 Example var ds = new DataSet(); var w = ds.wayBuilder.create(1234, {tags: {highway: \"residential\"}}); ds.has(w); // --&gt; true Methods &lt;static&gt; load(source [, options]) Loads a dataset from a file. Loads a dataset from a file. Derives the format of the file from the file suffix, unless the named option options.format is set. options can contain the following named options: format one of the strings \"osm\" (Open Street Map XML data), \"osc\" (Open Street Map change format), \"osm.bz2\" (Open Street Map XML data, compressed with bzip2), or \"osm.gz\" (Open Street Map XML data, compressed with gzip). Value is normalized by removing leading and trailing whitespace and conversion to lower case. Parameters: Name Type Argument Description source string | File the data source. Either a file name as string or a java.io.File options object &lt;optional&gt; optional named parameters Source: josm/mixin/DataSetMixin.js, line 769 Example // loads OSM data from a data file var ds1 = DataSet.load(\"/tmp/my-data.osm\"); // loads OSM data from a data file, the format is compressed OSM xml var ds2 = DataSet.load(\"/tmp/my-data.ogz\", {format: \"osm.gz\"}); &lt;static&gt; save(target [, options]) Saves a dataset to a file. Saves the dataset to a file (in OSM XML format). options can contain the following named options: version: string the value of the attribute version in the OSM file header. Default: \"0.6\" changeset: Changeset the changeset whose id is included in the attribute changeset on every OSM object. If undefined, includes the individual changeset attribute of the OSM object. Default: undefined Parameters: Name Type Argument Description target string | File the target file. Either a file name as string or a java.io.File options object &lt;optional&gt; optional named parameters Source: josm/mixin/DataSetMixin.js, line 880 Example var ds = ....; // create and populate a dataset // save the data ds.save(\"/tmp/data.osm\"); add(primitives) Adds one or more objects to the dataset. Adds one or more primitives to the dataset. Signatures add(o1,o2, ...) Adds a variable number of objects. null or undefined are ignored. An object is either an instance of Node, Way, or Relation. add(array|collection) Adds an javascript array or a java collection of objects. null or undefined are ignored. A list element is an instance of Node, a Way, or Relation. null and undefined are ignored. Parameters: Name Type Description primitives primitive | Array.&lt;primitive&gt; | Collection primitives to add Source: josm/mixin/DataSetMixin.js, line 87 Example var DataSet = org.openstreetmap.josm.data.osm.DataSet; var rbuilder = require(\"josm/builder\").RelationBuilder; var nbuilder = require(\"josm/builder\").NodeBuilder; var wbuilder = require(\"josm/builder\").WayBuilder; // add two nodes and a way to the dataset ds.add( var n1 = nb.create(), var n2 = nb.create(), wb.withNodes(n1,n2).create() ); // add a array of objects to the dataset var l = [nb.create(1), nb.create(2), wb.create()]; relation.add(l); batch(delegate) Run a sequence of command without notifying listeners. Run a sequence of operations against the dataset in \"batch mode\". Listeners to data set events are only notified at the end of the batch. Parameters: Name Type Description delegate function the function implementing the batch processes. Ignored if null or undefined. Source: josm/mixin/DataSetMixin.js, line 329 Example var DataSet = org.openstreetmap.josm.data.osm.DataSet; var ds = new DataSet(); ds.batch(function() { var n1 = ds.nodeBuilder.create(); var n2 = ds.nodeBuilder.create(); ds.wayBuilder.withNodes(n1,n2).create(); }); each(delegate [, options]) Iterates over the dataset. Iterates over the objects in the dataset. Signatures each(delegate,?options) Iterates over the objects in the dataset and invokes delegate for each object. If null or undefined, the iteration is skipped. Expects a function with the following signature: function(obj) {} // when invoked, obj is a node, a way, or a relation options is an (optional) object with named parameters, see below. The parameter options consists of the following (optional) named parameters: all : boolean If true, searches all objects in the dataset. If false, ignores incomplete or deleted objects. Default: false. Parameters: Name Type Argument Description delegate function the function invoked on every element options object &lt;optional&gt; additional named parameters Source: josm/mixin/DataSetMixin.js, line 722 get(params) Get an object from the dataset. Replies an OSM object from the dataset, or undefined, if no such object exists. Signatures get(id, type) Replies an object given by its unique numeric id and a type. The type is either a string \"node\", \"way\", or \"relation\", or one of the symbols OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, or OsmPrimitiveType.RELATION. get(id) Replies an object given an ID. id is either an instance of PrimitiveId or an object with the properties id and type, i.e. {id: 1234, type: \"node\"}. Parameters: Name Type Description params see description Source: josm/mixin/DataSetMixin.js, line 189 Example var DataSet = org.openstreetmap.josm.data.osm.DataSet; var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; var rbuilder = require(\"josm/builder\").RelationBuilder; var nbuilder = require(\"josm/builder\").NodeBuilder; var wbuilder = require(\"josm/builder\").WayBuilder; // get a node with a global id var o1 = ds.get(1234, \"node\"); // get a way with a global id var o2 = ds.get(3333, OsmPrimitiveType.WAY); // get a relation with an id object var o3 = ds.get({id: 5423, type: \"relation\"}); // pass in a SimplePrimitiveId var id = new SimplePrimitiveId(-5, OsmPrimitiveType.NODE); var o4 = ds.get(id); // pass in a primitive to get it var way = wbuilder.create(987); var o5 = ds.get(way); has(params) Check whether an object is in the dataset. Replies true, if the dataset contains an object. Signatures has(id, type) Replies true, if an object given by its unique numeric ID and a type is in the dataset. The type is either a string \"node\", \"way\", or \"relation\", or one of the symbols OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, or OsmPrimitiveType.RELATION. has(id) Replies true, if an object with the id id exists in the dataset. id is either an instance of PrimitiveId or an object with the properties id and type, i.e. {id: 1234, type: \"node\"}. Parameters: Name Type Description params see description and examples Source: josm/mixin/DataSetMixin.js, line 475 Example var DataSet = org.openstreetmap.josm.data.osm.DataSet; var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; var rbuilder = require(\"josm/builder\").RelationBuilder; var nbuilder = require(\"josm/builder\").NodeBuilder; var wbuilder = require(\"josm/builder\").WayBuilder; // is there a node with id 1234 ? var ret = ds.has(1234, \"node\"); // is there a way with id 3333 ? ret = ds.has(3333, OsmPrimitiveType.WAY); // is there a relation with id 5433 ? ret = ds.has({id: 5423, type: \"relation\"}); // is there a node with id -5 ? var id = new SimplePrimitiveId(-5, OsmPrimitiveType.NODE); ret = ds.has(id); // does it contain the way w? var way = wbuilder.create(987); ret = ds.has(way); node(id) Get a specific Node from the dataset. Replies the node with id id. Parameters: Name Type Description id number the unique numeric id. Must not be 0. Source: josm/mixin/DataSetMixin.js, line 281 Returns: the node Type org.openstreetmap.josm.data.osm.Node query(expression [, options]) Queries the dataset. Queries the dataset Signatures query(josmSearchExpression,?options) Queries the dataset using the JOSM search expression josmSearchExpression. josmSearchExpression is a string as you would enter it in the JOSM search dialog. options is an (optional) object with named parameters, see below. query(predicate,?options) Queries the dataset using a javascript predicate function predicate. predicate is a javascript function which accepts a object as parameter and replies true, when it matches for the object ans false otherwise. options is an (optional) object with named parameters, see below. The parameter options consist of the following (optional) named parameters: allElements : boolean (Deprecated parameter names: all) If true, searches all objects in the dataset. If false, ignores incomplete or deleted objects. Default: false. caseSensitive : boolean Only applicable for searches with a JOSM search expression. If true, searches case sensitive. If false, searches case insensitive. Default: false. regexSearch : boolean (Deprecated parameter names: withRegexp, regexpSearch) Only applicable for searches with a JOSM search expression. If true, the search expression contains regular expressions. If false, it includes only plain strings for searching. Default: false. mapCSSSearch Only applies for searches with a JOSM search expression. Default: false. Parameters: Name Type Argument Description expression string | function the match expression options object &lt;optional&gt; additional named parameters Source: josm/mixin/DataSetMixin.js, line 612 relation(id) Get a specific Relation from the dataset. Replies the relation with id id. Parameters: Name Type Description id number the unique numeric id. Must not be 0. Source: josm/mixin/DataSetMixin.js, line 313 Returns: Type org.openstreetmap.josm.data.osm.Relation remove(primitives) Remove one or more objects from the dataset. Removes objects from the dataset. Signatures remove(id, type) Removes a single object given by its unique numeric ID (nid) and a type. The type is either a string \"node\", \"way\", or \"relation\", or one of the symbols OsmPrimitiveType.NODE, OsmPrimitiveType.WAY, or OsmPrimitiveType.RELATION. remove(id, id, ...) Removes a collection of objects given by the ids. id is either an instance of PrimitiveId or an object with the properties id and type, i.e. {id: 1234, type: \"node\"}. null and undefined are ignored. remove(array|collection) Removes a collection of objects given by the an array or a java.util.Collection of ids. The collection elemeents are either instances of PrimitiveId or an object with the properties id and type, i.e. {id: 1234, type: \"node\"}. null or undefined elements are ignored. Parameters: Name Type Description primitives see description and examples Source: josm/mixin/DataSetMixin.js, line 390 Example var DataSet = org.openstreetmap.josm.data.osm.DataSet; var SimplePrimitiveId = org.openstreetmap.josm.data.osm.SimplePrimitiveId; var OsmPrimitiveType = org.openstreetmap.josm.data.osm.OsmPrimitiveType; var rbuilder = require(\"josm/builder\").RelationBuilder; var nbuilder = require(\"josm/builder\").NodeBuilder; var wbuilder = require(\"josm/builder\").WayBuilder; // get a node with a global id ds.remove(1234, \"node\"); // remove a node and a way var id1 = new SimplePrimitiveId(1234, \"node\") var id2 = new SimplePrimitiveId(3333, OsmPrimitiveType.WAY) ds.remove(id1, id2); // remove a relation and a node ds.remove({id: 1234, type: \"relation\"}, id1); // remove an array of nodes ds.remove([id1,id2]); // remove a set of objects var ids = new HashSet(); ids.add(id1); ids.add(id1); ds.remove(ids); way(id) Get a specific Way from the dataset. Replies the way with id id. Parameters: Name Type Description id number the unique numeric id. Must not be 0. Source: josm/mixin/DataSetMixin.js, line 297 Returns: the way Type org.openstreetmap.josm.data.osm.Way Ã— Search results Close "},"module-josm_mixin_DataSetMixin-DataSetSelectionFacade.html":{"id":"module-josm_mixin_DataSetMixin-DataSetSelectionFacade.html","title":"Class: DataSetSelectionFacade","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: DataSetSelectionFacade josm/mixin/DataSetMixin~ DataSetSelectionFacade API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new DataSetSelectionFacade(ds) Creates a facade Creates a facade Parameters: Name Type Description ds DataSet the dataset. Must not be null or undefined. Source: josm/mixin/DataSetMixin.js, line 966 Members &lt;readonly&gt; nodes an array with the selected nodes Replies an array with the selected nodes. Properties: Name Type Description nodes array the selected nodes Source: josm/mixin/DataSetMixin.js, line 1192 &lt;readonly&gt; objects an array with the selected object Replies an array with the selected objects. Properties: Name Type Description objects array the selected primitives Source: josm/mixin/DataSetMixin.js, line 1240 &lt;readonly&gt; relations an array with the selected relations Replies an array with the selected relations. Properties: Name Type Description relations array the selected relations Source: josm/mixin/DataSetMixin.js, line 1224 &lt;readonly&gt; ways an array with the selected ways Replies an array with the selected ways. Properties: Name Type Description ways array the selected ways Source: josm/mixin/DataSetMixin.js, line 1208 Methods add(primitives) Adds selected objects Adds selected objects. Signatures add(p1,p2,...) Selects a variable number of primitives. add(array|collection) Select a variable number of primitives given by an array or a java collection of primitives. Each primitive {@code p} is either an instance of aa node, a way, or a relation, or an instance of PrimitiveId. Parameters: Name Type Description primitives primitive | array | Collection see description Source: josm/mixin/DataSetMixin.js, line 1015 clear(primitives) Unselects a collection of objects Unselects a collection of objects. Signatures clear(p1,p2, ...) Unselect a variable number primitives. clear(array|collection) Unselect a variable number of primitives given by an array or a java collection of primitives. Each primitive {@code p} is either an instance of aa node, a way, or a relation, or an instance of PrimitiveId. Parameters: Name Type Description primitives primitive | array | Collection see description Source: josm/mixin/DataSetMixin.js, line 1045 clearAll() Clear the selection Clear the selection. Source: josm/mixin/DataSetMixin.js, line 1075 isSelected(primitive) true, if an object is currently selected Replies true, if an object is currently selected. Signatures isSelected(id, type) Replies true, if the object with numeric id id and type type is selected. isSelected(id) Replies true, if the object with id id is selected. id is either an instance of PrimitiveId or an object with the properties id and type, i.e. {id: 1234, type: \"node\"} isSelected(obj) Replies true, if the object obj is selected. obj is either a Node, a Way, or a Relation. Parameters: Name Type Description primitive primitive | id see description Source: josm/mixin/DataSetMixin.js, line 1120 Returns: true, if the primitive is selected Type boolean set(primitives) Set the selected objects as selected. Set the selected objects as selected. Signatures set(p1,p2, ...) Selects a variable number of primitives. set(array|collection) Select a variable number of primitives given by an array or a java collection of primitives. Each primitive {@code p} is either an instance of aa node, a way, or a relation, or an instance of PrimitiveId. Parameters: Name Type Description primitives primitive | array | Collection see description Source: josm/mixin/DataSetMixin.js, line 981 toggle() Toggle the selection state of a collection of objects Toggle the selection state of a collection of objects. Signatures toggle(p1,p2, ...) Toggle the selection state of a variable number of primitives. toggle(array|collection) Toggle the selection state of variable number of primitives given by an array or a java collection of ids. Each primitive {@code p} is either an instance of aa node, a way, or a relation, or an instance of PrimitiveId. Source: josm/mixin/DataSetMixin.js, line 1090 Ã— Search results Close "},"module-josm_mixin_JSActionMixin.html":{"id":"module-josm_mixin_JSActionMixin.html","title":"Module: josm/mixin/JSActionMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/JSActionMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class JSAction. Source: josm/mixin/JSActionMixin.js, line 1 Mixins JSActionMixin Ã— Search results Close "},"module-josm_mixin_JSActionMixin-JSActionMixin.html":{"id":"module-josm_mixin_JSActionMixin-JSActionMixin.html","title":"Mixin: JSActionMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: JSActionMixin josm/mixin/JSActionMixin~ JSActionMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin is auto-loaded by the scripting plugin and mixed into the native java class JSAction. It provides additional properties and methods which you can invoke on an instance of JSAction. Source: josm/mixin/JSActionMixin.js, line 12 Members name Set or get the name. Set or get the name. get Replies the name as string, or undefined, if no name is set. set Set null or undefined to clear the name. Any other value is converted to a string. Properties: Name Type Description name string the action name Source: josm/mixin/JSActionMixin.js, line 130 onExecute Set or get the function to be called when the action is executed. Set or get the function to be called when the action is executed. get Replies the function or undefined, if no function has been assigned. set Set the function, null, or undefined to remove the function. Properties: Name Type Description onExecute function callback Source: josm/mixin/JSActionMixin.js, line 97 onInitEnabled Set or get the function to be called when the enabled state of the action should be reevaluated. Set or get the function to be called when the enabled state should be initialized. get Replies the function or undefined, if no function has been assigned. set Set the function, null, or undefined to remove the function. Properties: Name Type Description onInitEnabled function callback Source: josm/mixin/JSActionMixin.js, line 26 onUpdateEnabled Set or get the function to be called when the enabled state of the action should be reevaluated. Set or get the function to be called when the enabled state of the action should be reevaluated. get Replies the function or undefined, if no function has been assigned. set Set the function, null, or undefined to remove the function. Properties: Name Type Description onUpdateEnabled function callback Source: josm/mixin/JSActionMixin.js, line 61 tooltip Set or get the tooltip text. Set or get the tooltip text. get Replies the tooltip as string, or undefined, if no tooltip is set. set Set null or undefined to clear the tooltip. Any other value is converted to a string. Properties: Name Type Description tooltip string the action tooltip Source: josm/mixin/JSActionMixin.js, line 160 Methods addToMenu(menu [, index]) Adds an action to a menu. Adds an action to a menu. Parameters: Name Type Argument Description menu JMenu the menu. This should be one of the global JOSM menus. index number &lt;optional&gt; the index where to add the menu. Default if missing: adds the menu at the end Source: josm/mixin/JSActionMixin.js, line 191 Example var JSAction = require(\"josm/ui/menu\").JSAction; // adds a new action to the JOSM edit menu new JSAction({name: \"My Action\"}) .addToMenu(josm.menu.get(\"edit\")); addToToolbar( [options]) Adds an action to the toolbar. Adds an action to the toolbar. If no parameters are passed in, the action is registered with its toolbar id (see property tooblarId) for being displayed in the toolbar. It isn't displayed, however, unless the toolbar id is already included in the toolbar preferences. If not, the user first has to configure it manually in the preference dialog. Use one of the named options described below to display the the action at a a specific position in the toolbar. If you use one of these options, the toolbar configuration is saved to the preferences. options support the following named parameters: toolbarId: string Optional toolbar id, overriding an already assigned toolbar id. at: number, \"start\", \"end\" Display the toolbar entry at a specific position, at the start or at the end of the toolbar. after: string Display the toolbar entry after the entry with toolbar id after. before: string Display the toolbar entry before the entry with toolbar id before. Parameters: Name Type Argument Description options objects &lt;optional&gt; named parameters Source: josm/mixin/JSActionMixin.js, line 269 Example var JSAction = require(\"josm/ui/menu\").JSAction; var action = new JSAction({name: \"My Action\", toolbarId: \"myaction\"}); // add the action after the \"open\" action in the toolbar action.addToToolbar({after: \"open\"}); // add the action at the end of the toolbar action.addToToolbar({at: \"end\"}); Ã— Search results Close "},"module-josm_mixin_LatLonMixin.html":{"id":"module-josm_mixin_LatLonMixin.html","title":"Module: josm/mixin/LatLonMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/LatLonMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class LatLon. Source: josm/mixin/LatLonMixin.js, line 1 Mixins LatLonMixin Ã— Search results Close "},"module-josm_mixin_LatLonMixin-LatLonMixin.html":{"id":"module-josm_mixin_LatLonMixin-LatLonMixin.html","title":"Mixin: LatLonMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: LatLonMixin josm/mixin/LatLonMixin~ LatLonMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin provides additional properties and methods which you can invoke on an instance of LatLon. Source: josm/mixin/LatLonMixin.js, line 10 Members &lt;readonly&gt; lat Get the latitude. Get the latitude. Properties: Name Type Description lat number latitude Source: josm/mixin/LatLonMixin.js, line 22 Example var LatLon = org.openstreetmap.josm.data.coor.LatLon; // set members var pos = new LatLon(1,2); pos.lat; // -&gt; 1 // you can still invoke the native java method lat(), just add $ as prefix. // Note the parentheses - the native method has to be called as function! pos.$lat(); // -&gt; 1 &lt;readonly&gt; lon Get the longitude. Get the longitude. Properties: Name Type Description lon number longitude Source: josm/mixin/LatLonMixin.js, line 49 Example var LatLon = org.openstreetmap.josm.data.coor.LatLon; // set members var pos = new LatLon(1,2); pos.lon; // -&gt; 2 // you can still invoke the native java method lon(), just add $ as prefix. // Note the parentheses - the native method has to be called as function! pos.$lon(); // -&gt; 1 Methods &lt;static&gt; make(obj) Create a LatLon from a javascript object. Creates a LatLon from a javascript object. Parameters: Name Type Description obj object a javascript object with two number properties lat: and lon: Source: josm/mixin/LatLonMixin.js, line 77 Returns: Type org.openstreetmap.josm.data.coor.LatLon Example var pos = LatLon.make({lat: 1, lon: 2}); Ã— Search results Close "},"module-josm_mixin_NodeMixin.html":{"id":"module-josm_mixin_NodeMixin.html","title":"Module: josm/mixin/NodeMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/NodeMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class Node. Source: josm/mixin/NodeMixin.js, line 1 Mixins NodeMixin Ã— Search results Close "},"module-josm_mixin_NodeMixin-NodeMixin.html":{"id":"module-josm_mixin_NodeMixin-NodeMixin.html","title":"Mixin: NodeMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: NodeMixin josm/mixin/NodeMixin~ NodeMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin is auto-loaded by the scripting plugin and mixed into the native java class Node. It provides additional properties and methods which you can invoke on an instance of Node. Source: josm/mixin/NodeMixin.js, line 10 Extends OsmPrimitiveMixin Members &lt;readonly&gt; east Get the projected east coordinate. Get the projected east coordinate, or undefined, if the projected east coordinate isn't known. Properties: Name Type Description east number projected east coordinate Source: josm/mixin/NodeMixin.js, line 119 Example var nb = require(\"josm/builder\").NodeBuilder; // set members var n = nb.create(); n.east; lat Get or set the node latitude. Get or set the node latitude. get Replies the current latitude, or undefined, if the latitude isn't known. set Assign the latitude. Expects a number in the range [-90,90]. Raises an error, if the node is a proxy node. Properties: Name Type Description lat number latitude Source: josm/mixin/NodeMixin.js, line 24 Example var nb = require(\"josm/builder\").NodeBuilder; // set members var n = nb.create(); n.lat = 23.245; n.lat; // -&gt; 23.245 lon Get or set the node longitude. Get or set the node longitude. get Replies the current longitude, or undefined, if the longitude isn't known. set Assign the longitude. Expects a number in the range [-180,180]. Raises an error, if the node is a proxy node. Properties: Name Type Description lon number longitude Source: josm/mixin/NodeMixin.js, line 71 Example var nb = require(\"josm/builder\").NodeBuilder; // set members var n = nb.create(); n.lon = -120.78; n.lon; // -&gt; -120.78; &lt;readonly&gt; north Get the projected north coordinate. Get the projected north coordinate, or undefined, if the projected north coordinate isn't known. Properties: Name Type Description north number projected north coordinate Source: josm/mixin/NodeMixin.js, line 144 Example var nb = require(\"josm/builder\").NodeBuilder; // set members var n = nb.create(); n.north; pos Get or set the node position. Get or set the node position. get replies an instance of LatLon or undefined, if the position isn't known. set Assign the position. Either an instance of LatLon or an object with the properties {lat: ..., lon: ...} Properties: Name Type Description pos org.openstreetmap.josm.data.coor.LatLon position of the node Source: josm/mixin/NodeMixin.js, line 169 Example var LatLon = org.openstreetmap.josm.data.coor.LatLon; var nb = require(\"josm/builder\").NodeBuilder; // assign a LatLon as position n.pos = new LatLon(23, 32.33); // assign an object as position n.pos = {lat: 23, lon: 32.33}; // get the position n.pos; // -&gt; a LatLon with the position Ã— Search results Close "},"module-josm_mixin_OsmDataLayerMixin.html":{"id":"module-josm_mixin_OsmDataLayerMixin.html","title":"Module: josm/mixin/OsmDataLayerMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/OsmDataLayerMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class OsmDataLayer. Source: josm/mixin/OsmDataLayerMixin.js, line 1 Mixins OsmDataLayerMixin Ã— Search results Close "},"module-josm_mixin_OsmDataLayerMixin-OsmDataLayerMixin.html":{"id":"module-josm_mixin_OsmDataLayerMixin-OsmDataLayerMixin.html","title":"Mixin: OsmDataLayerMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: OsmDataLayerMixin josm/mixin/OsmDataLayerMixin~ OsmDataLayerMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin is auto-loaded by the scripting plugin and mixed into the native java class OsmDataLayer. Source: josm/mixin/OsmDataLayerMixin.js, line 13 Methods &lt;static&gt; apply(commands) Apply commands Applies one or more undoable/redoable commands to the data layer. Signature apply(cmd,cmd,...) cmd is either an instance of Command or an object with a method createJOSMCommand(OsmDataLayer). Parameters: Name Type Argument Description commands Command | object &lt;repeatable&gt; the commands to apply Source: josm/mixin/OsmDataLayerMixin.js, line 25 Ã— Search results Close "},"module-josm_mixin_OsmPrimitiveMixin.html":{"id":"module-josm_mixin_OsmPrimitiveMixin.html","title":"Module: josm/mixin/OsmPrimitiveMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/OsmPrimitiveMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class OsmPrimitive. Source: josm/mixin/OsmPrimitiveMixin.js, line 1 Mixins OsmPrimitiveMixin Ã— Search results Close "},"module-josm_mixin_OsmPrimitiveMixin-OsmPrimitiveMixin.html":{"id":"module-josm_mixin_OsmPrimitiveMixin-OsmPrimitiveMixin.html","title":"Mixin: OsmPrimitiveMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: OsmPrimitiveMixin josm/mixin/OsmPrimitiveMixin~ OsmPrimitiveMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. OsmPrimitiveMixin provides additional properties and methods which you can invoke on an instance of OsmPrimitive. Source: josm/mixin/OsmPrimitiveMixin.js, line 13 Members &lt;static, readonly&gt; isNode Replies true if this object is a node Replies true if this object is a node Properties: Name Type Description isNode boolean true if this object is a node Source: josm/mixin/OsmPrimitiveMixin.js, line 663 &lt;static, readonly&gt; isRelation Replies true if this object is a relation Replies true if this object is a relation Properties: Name Type Description isRelation boolean true if this object is a relation Source: josm/mixin/OsmPrimitiveMixin.js, line 693 &lt;static, readonly&gt; isWay Replies true if this object is a way Replies true if this object is a way Properties: Name Type Description isWay boolean true if this object is a way Source: josm/mixin/OsmPrimitiveMixin.js, line 678 changesetId set or get the changeset id this primitive was last modified in. Set or get the changeset id this primitive was last modified in. get: - replies the changeset id or undefined, if no changeset id is known (i.e. for local primitives or proxy primitives). set: - assign a changset id, a number &gt;, 0. Properties: Name Type Description changesetId number the changset id Source: josm/mixin/OsmPrimitiveMixin.js, line 230 Example var nb = require(\"josm/builder\").NodeBuilder.forDataSet(ds); var n1 = nb.create(12345); // assign the changeset id n1.changesetId = 6; &lt;readonly&gt; dataSet Replies the parent dataset. Replies the parent dataset or undefined, if this primitive is not attached to a dataset. Properties: Name Type Description dataSet org.openstreetmap.josm.data.osm.DataSet the parent dataset Source: josm/mixin/OsmPrimitiveMixin.js, line 139 Example var ds = new DataSet(); var nb = require(\"josm/builder\").NodeBuilder.forDataSet(ds); // get members var n1 = nb.create(); n1.dataSet; // -&gt; ds var nb = require(\"josm/builder\").NodeBuilder; var n2 = nb.create(); n2.dataSet; // -&gt; undefined &lt;readonly&gt; id The unique numeric id The unique numeric id, positive for global primitives, negative for local primitives. Properties: Name Type Description id number the numberic id Source: josm/mixin/OsmPrimitiveMixin.js, line 24 Example var nb = require(\"josm/builder\").NodeBuilder; // get members var node = nb.create(); var id = node.id; // -&gt; a negative value &lt;readonly&gt; isGlobal Replies true, if this is a global primitive Replies true, if this is a global primitive Properties: Name Type Description isGlobal boolean true, if this is a global primitive Source: josm/mixin/OsmPrimitiveMixin.js, line 111 Example var nb = require(\"josm/builder\").NodeBuilder; // get members var node = nb.create(); node.isGlobal; // -&gt; false node = nb.create(1234); node.isGlobal; // -&gt; true &lt;readonly&gt; isIncomplete Replies true if this is a proxy object Replies true if this a proxy object, in JOSM terminology called an incomplete object. Properties: Name Type Description isIncomplete boolean true if this is a proxy object Source: josm/mixin/OsmPrimitiveMixin.js, line 291 &lt;readonly&gt; isLocal Replies true, if this is a local primitive. Replies true, if this is a local primitive. Properties: Name Type Description isLocal boolean true, if this is a local primitive Source: josm/mixin/OsmPrimitiveMixin.js, line 83 Example var nb = require(\"josm/builder\").NodeBuilder; // get members var node = nb.create(); node.isLocal; // -&gt; true node = nb.create(1234); node.isLocal; // -&gt; false isModified Sets or gets whether this object is modified. Sets or gets whether this object is modified. Supported alias: modified. Properties: Name Type Description isModified boolean true, if modified Source: josm/mixin/OsmPrimitiveMixin.js, line 311 Example var node = .... // create a node node.modified; // -&gt; true or false node.isModified = true; // sets the modified flag to true &lt;readonly&gt; keys Replies an array with the tag keys. Replies an array with the tag keys. Properties: Name Type Description keys array the tag keys Source: josm/mixin/OsmPrimitiveMixin.js, line 429 Example var node = .... // create a node // get the tag keys var keys = node.keys; tags Get or set the tags of the object. Get or set the tags of the object. get: - replies the tags as javascript object. set: assign null or undefined to remove all tags assign an object to set its properties as tags. assign an java.util.Map to set its elements as tags null values and undefined tag values aren't assigned. tag keys are normalized, i.e. leading and trailing white space is removed. Both, tag keys and tag values, are converted to strings. Properties: Name Type Description tags object the tags Source: josm/mixin/OsmPrimitiveMixin.js, line 369 Example var node = .... // create a node // set the tags using a javascript object node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; node.tags.amenity; // -&gt; restaurant node.tags.name; // -&gt; Obstberg // remove all tags node.tags = null; // set tags using a java map var tags = new java.util.HashMap(); tags.put(\"amenity\", \"restaurant\"); tags.put(\"name\", \"Obstberg\"); node.tags = tags; &lt;readonly&gt; timestamp Get the timestamp this primitive was last modified on the server. Get the timestamp this primitive was last modified on the server. Undefined, if this timestamp isn't known, i.e. for local primitives or for proxy primitives. Properties: Name Type Description timestamp java.util.Date the timestamp of last modification Source: josm/mixin/OsmPrimitiveMixin.js, line 266 Example var nb = require(\"josm/builder\").NodeBuilder.forDataSet(ds); var n1 = ... // assume n1 was downloaded from the server n1.timestamp; // the timestamp of last modification user Set or get the user. Set or get the user. get: - replies a User object or undefined, if not user is set. set: - assign a user, either as instance of User, supplying a user name or the unique global user id as number. Assign null or undefined to assign no user. Properties: Name Type Description user org.openstreetmap.josm.data.osm.User the user who last modified the primitive Source: josm/mixin/OsmPrimitiveMixin.js, line 170 Example var User = org.openstreetmap.josm.data.osm.User; var nb = require(\"josm/builder\").NodeBuilder.forDataSet(ds); var n1 = nb.create(); // assign a user object n1.user = new User(\"foobar\"); // assign the unique global user with name 'foobar' n1.user = \"foobar\"; // assign the unique global user with id 12345 n1.user = 12345; &lt;readonly&gt; version The version of the object. The version of the object. Only global objects have a version. The version for local and proxy objects is undefined. Properties: Name Type Description version number the primitive version Source: josm/mixin/OsmPrimitiveMixin.js, line 48 Example var nb = require(\"josm/builder\").NodeBuilder; // local object - get version is undefined var node = nb.create(); node.version; // -&amp;gt; undefined // global object - get version is defined var node = nb.create(12345, {version: 9}); node.version; // -&amp;gt; 9 // proxy object - get version is undefined var node = nb.createProxy(12345); node.version; // -&amp;gt; undefined &lt;inner&gt; isDeleted Set or get wheter this primitive is deleted. Set or get wheter this primitive is deleted. In order to invoke the native method isDeleted(), prefix the name with $, i.e. node.$isDeleted(); // -&gt; same as node.isDeleted without parantheses Properties: Name Type Description isDeleted boolean true, if this primitive is deleted Source: josm/mixin/OsmPrimitiveMixin.js, line 708 Methods &lt;static&gt; get(name) Replies the value of a tag. Replies the value of a tag, or undefined, if the tag isn't set. Parameters: Name Type Description name string the tag name. Must not be null or undefined. Non-string values are converted to a string. Leading and trailing whitespace is removed. Source: josm/mixin/OsmPrimitiveMixin.js, line 455 Returns: the tag value Type string Example var node = .... // create a node // set the tags using a javascript object node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; node.get(\"amenity\"); // -&gt; restaurant node.get(\"name\"); // -&gt; Obstberg &lt;static&gt; has(key) Checks whether a primitive has a tag. Replies true, if the object has a tag with key key. Signatures has(key) key is a string. Replies true, if the object has a tag with this key. Before matching, leading and trailing white space is removed from key. has(regexp) regexp is a regular expression. Replies true, if the object has at least one tag whose key matches with regexp. Parameters: Name Type Description key string | regexp the tag key we are looking up Source: josm/mixin/OsmPrimitiveMixin.js, line 560 Returns: true, if there is a tag with this key Type boolean Example var node = .... // create a node // set the tags using a javascript object node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; // test wheter the tags are set node.has(\"amenity\"); // -&gt; true node.has(\"no-such-tag\"); // -&gt; false // use a regexp node.has(/^a/); // -&gt; true node.has(/^name(:.*)?$/i); // -&gt; false &lt;static&gt; remove(name) Removes a tag. Deprecated. There is a name conflict with the remove() method for removing a node in WayMixin. Use removeTag() instead. Removes a tag. Parameters: Name Type Description name string the tag name. Must not be null or undefined. Non-string values are converted to a string. Leading and trailing whitespace is removed. Source: josm/mixin/OsmPrimitiveMixin.js, line 638 Example var node = .... // create a node // set the tags using a javascript object node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; node.remove(\"amenity\"); node.has(\"amenity\"); // -&gt; false &lt;static&gt; removeTag(name) Removes a tag. Removes a tag. Parameters: Name Type Description name string the tag name. Must not be null or undefined. Non-string values are converted to a string. Leading and trailing whitespace is removed. Source: josm/mixin/OsmPrimitiveMixin.js, line 610 Example var node = .... // create a node // set the tags using a javascript object node.tags = {amenity:\"restaurant\", name:\"Obstberg\"}; node.remove(\"amenity\"); node.has(\"amenity\"); // -&gt; false &lt;static&gt; set(tag) Set a tag or a collection of tags. Set a tag or a collection of tags. Signatures set(name,value) sets a tag given a name and a value. name must not be null or undefined. Non-string values are converted to a string. Leading and trailing whitespace is removed. value: if null or undefined, the tag is removed. Any other value is converted to a string set(tags) tags is either a java object whose properties are set as tags, or a java.util.Map. Parameters: Name Type Description tag any key/value pair, see description Source: josm/mixin/OsmPrimitiveMixin.js, line 482 Example var node = .... // create a node // set the tags using a javascript object node.set(\"amenity\", \"restaurant\"); node.set(\"name\", \"obstberg\"); node.get(\"amenity\"); // -&gt; restaurant node.get(\"name\"); // -&gt; Obstberg // set the tags using an object node.set({amenity:\"restaurant\", name: \"Obstberg\"}); node.get(\"amenity\"); // -&gt; restaurant node.get(\"name\"); // -&gt; Obstberg Ã— Search results Close "},"module-josm_mixin_RelationMixin.html":{"id":"module-josm_mixin_RelationMixin.html","title":"Module: josm/mixin/RelationMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/RelationMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class Relation. Source: josm/mixin/RelationMixin.js, line 1 Mixins RelationMixin Ã— Search results Close "},"module-josm_mixin_RelationMixin-RelationMixin.html":{"id":"module-josm_mixin_RelationMixin-RelationMixin.html","title":"Mixin: RelationMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: RelationMixin josm/mixin/RelationMixin~ RelationMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin provides additional properties and methods which you can invoke on an instance of Relation. You can access relation members using relation[i], see examples below. Source: josm/mixin/RelationMixin.js, line 13 Example var Relation = org.openstreetmap.josm.data.osm.Relation; var out = java.lang.System.out; var relation = new Relation(12345); // use the mixin property 'id' to access the relation id ... var id = relation.id; // ... or the native method getUniqueId() id = relation.getUniqueId(); // loop over relation members and print out the roles for (var i=0; i &lt; relation.length; i++) { out.println(relation[i].role); } Extends OsmPrimitiveMixin Members &lt;readonly&gt; length Replies the number of relation members. Replies the number of relation members. Properties: Name Type Description length number the number of relation members Source: josm/mixin/RelationMixin.js, line 46 members Set or get the relation members The relation members get replies the current list of relation members as javascript array. set Assign the list of relation members. Assign null or undefined to remove all members. Assign an array or a java.util.List of members. Members can be instances of RelationMember, Node, Way, or Relation. null or undefined are ignored. Note: you can't assign members to a proxy relation. Properties: Name Type Description members member | Array.&lt;member&gt; | java.util.List the relation members Source: josm/mixin/RelationMixin.js, line 70 Example var rb = require(\"josm/builder\").RelationBuilder; var nb = require(\"josm/builder\").NodeBuilder; var relation = rb.create(); // set members relation.members = [nb.create(), rb.member('role.1', rb.create(12345))]; // get members var members = relation.members; Methods add(members) Adds one or more member to the relation. Adds additional members at the end of the relation members list. Signatures add(m1, m2, ...) Adds a variable number of members. null or undefined are ignored. A member is either an instance of RelationMember or a Node, Way, or Relation. If an OSM primitive is passed in, a relation member with an empty role is created. add(array|list) Adds an array or list of members. null or undefined are ignored. A list is either a javascript array or an instance of a java List (java.util.List). A list element is either an instance of RelationMember, or or a Node, Way, or Relation. If an OSM primitive is passed in, a relation member with an empty role is created. null and undefined are ignored. Parameters: Name Type Description members see description Source: josm/mixin/RelationMixin.js, line 166 Example var rbuilder = require(\"josm/builder\").RelationBuilder; var nbuilder = require(\"josm/builder\").NodeBuilder; var relation = rb.create(); // add a member using a RelationMember instance (created with the utility // method rbuilder.member(...) relation.add(rbuilder.member('myrole', nbuilder.create())); // add three nodes as members, each with the empty role relation.add(nb.create(), nb.create(), nb.create()); // add an array of members var m = [nb.create(), rb.member(\"role.1\", nb.create())]; relation.add(m); getIdAt(idx) Replies the object id of a member. Replies the unique object id for the member object at position idx. Parameters: Name Type Description idx number the index. a number &gt;= 0 and &lt; the current number of members Source: josm/mixin/RelationMixin.js, line 322 Returns: the unique object id for the member object at position idx Type number Example var rb = require(\"josm/builder\").RelationBuilder; var nb = require(\"josm/builder\").NodeBuilder; var wb = require(\"josm/builder\").WayBuilder; // relation has two members var relation = rb.withMembers(nb.create(), nb.create()).create(); var id = relation.getIdAt(0); getObjectAt(idx) Replies the object of a member. Replies the object represented by the member at position idx. Parameters: Name Type Description idx number the index. a number &gt;= 0 and &lt; the current number of members Source: josm/mixin/RelationMixin.js, line 384 Returns: the object represented by the member at position idx Type object Example var rb = require(\"josm/builder\").RelationBuilder; var nb = require(\"josm/builder\").NodeBuilder; var wb = require(\"josm/builder\").WayBuilder; // relation has two members var n1 = nb.create(); var relation = rb.withMembers(n1, nb.create()).create(); var node = relation.getObjectAt(0) // ==&gt; n1 getRoleAt(idx) Replies the role of a member. Replies the member role for the member at position idx. Parameters: Name Type Description idx number the index. a number &gt;= 0 and &lt; the current number of members Source: josm/mixin/RelationMixin.js, line 354 Returns: the member role for the member at position idx Type string Example var rb = require(\"josm/builder\").RelationBuilder; var nb = require(\"josm/builder\").NodeBuilder; var wb = require(\"josm/builder\").WayBuilder; // relation has two members var relation = rb.withMembers(nb.create(), nb.create()).create(); var role = relation.getRoleAt(0) // ==&gt; \"\", the empty role ; insertAt(idx, object) Inserts one or more members at a position. Inserts a member at position idx. Parameters: Name Type Description idx number the index. a number &gt;= 0 and &lt;= the current number of members object object the object, either a RelationMember, or a Node, a Way, or a Relation. Must not be null or undefined. Source: josm/mixin/RelationMixin.js, line 236 Example var rb = require(\"josm/builder\").RelationBuilder; var nb = require(\"josm/builder\").NodeBuilder; var wb = require(\"josm/builder\").WayBuilder; // create a relation with two members var relation = rb.withMembers(nb.create(), nb.create()).create(); // insert another member for a another node at position 0 relation.insertAt(0, nb.create()); // insert a way with role 'role.1' at position 1 relation.insertAt(1, rb.member('role.1', wb.create())); setAt(idx, object) Sets one or more members at a position. Sets a member at position idx. Parameters: Name Type Description idx number the index. a number &gt;= 0 and &lt; the current number of members object object either a RelationMember, or a Node, a Way, or a Relation. Must not be null or undefined. Source: josm/mixin/RelationMixin.js, line 279 Example var rb = require(\"josm/builder\").RelationBuilder; var nb = require(\"josm/builder\").NodeBuilder; var wb = require(\"josm/builder\").WayBuilder; // relation has two members var relation = rb.withMembers(nb.create(), nb.create()).create(); // set another member for a another node at position 0 relation.setAt(0, nb.create()); // set a way with role 'role.1' at position 1 relation.setAt(1, rb.member('role.1', wb.create())); Ã— Search results Close "},"module-josm_mixin_UploadStrategyMixin.html":{"id":"module-josm_mixin_UploadStrategyMixin.html","title":"Module: josm/mixin/UploadStrategyMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/UploadStrategyMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class UploadStrategy. Source: josm/mixin/UploadStrategyMixin.js, line 1 Mixins UploadStrategyMixin Ã— Search results Close "},"module-josm_mixin_UploadStrategyMixin-UploadStrategyMixin.html":{"id":"module-josm_mixin_UploadStrategyMixin-UploadStrategyMixin.html","title":"Mixin: UploadStrategyMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: UploadStrategyMixin josm/mixin/UploadStrategyMixin~ UploadStrategyMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin provides additional properties and methods which you can invoke on an instance of UploadStrategy. Source: josm/mixin/UploadStrategyMixin.js, line 10 Methods &lt;static&gt; from(value) Convert value to UploadStrategy Checks whether a value can be converted into an UploadStrategy, converts and normalizes it, and returns the converted value. Throws an error, if value can't be converted. Accepts one of the following values: a UploadStrategy just replies value a string One of the following strings: individualobjects chunked singlerequest Replies the matching enumeration value UploadStrategy Throws an error, if value is null or undefined. Parameters: Name Type Description value UploadStrategy | string the value to normalize Source: josm/mixin/UploadStrategyMixin.js, line 21 Returns: Type org.openstreetmap.josm.io.UploadStrategy Example var UploadStrategy = org.openstreetmap.josm.io.UploadStrategy; var strategy = UploadStrategy.from(\"individualobjects\"); is(value) Checks equality with string values Replies true, if UploadStrategy, is equal to a specific enumeration value or to a string value. Accepts one of the following values: a UploadStrategy replies true, if a string One of the following strings: individualobjects chunked singlerequest Replies true, if the value is a prefix of the preference value. Parameters: Name Type Description value UploadStrategy | string the value to check Source: josm/mixin/UploadStrategyMixin.js, line 80 Returns: true, if string value matches Type boolean Example var UploadStrategy = org.openstreetmap.josm.io.UploadStrategy; var strategy = UploadStrategy.INDIVIDUAL_OBJECTS_STRATEGY; strategy.is(\"indiv\"); // true strategy.is(\"individualobjects\"); // true strategy.is(\"chunked\"); // false Ã— Search results Close "},"module-josm_mixin_WayMixin.html":{"id":"module-josm_mixin_WayMixin.html","title":"Module: josm/mixin/WayMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/mixin/WayMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This module is auto-loaded by the scripting plugin and mixed into the native java class Way. Source: josm/mixin/WayMixin.js, line 1 Mixins WayMixin Ã— Search results Close "},"module-josm_mixin_WayMixin-WayMixin.html":{"id":"module-josm_mixin_WayMixin-WayMixin.html","title":"Mixin: WayMixin","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Mixin: WayMixin josm/mixin/WayMixin~ WayMixin API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. This mixin provides additional properties and methods which you can invoke on an instance of Way. You can access nodes using indexed properties, i.e. way[i], see example below. Source: josm/mixin/WayMixin.js, line 14 Extends OsmPrimitiveMixin Members first The first node The first node or undefined, if this way doesn't have nodes (i.e. because it is a proxy way). Properties: Name Type Description first org.openstreetmap.josm.data.osm.Node the node or undefined Source: josm/mixin/WayMixin.js, line 124 last The last node The last node or undefined, if this way doesn't have nodes (i.e. because it is a proxy way). Properties: Name Type Description last org.openstreetmap.josm.data.osm.Node the node or undefined Source: josm/mixin/WayMixin.js, line 141 &lt;readonly&gt; length Replies the number of nodes. Replies the number of nodes. Properties: Name Type Description length number number of nodes Source: josm/mixin/WayMixin.js, line 85 nodes Set or get the nodes of a way. Set or get the nodes of a way. get Replies the nodes as array. set Set the an array or List of Nodes. Properties: Name Type Description nodes Array.&lt;org.openstreetmap.josm.data.osm.Way.Node&gt; the nodes Source: josm/mixin/WayMixin.js, line 37 Example var way = ... // create the way; var n1,n2,n3 = ...; // create the nodes way.nodes = [n1,n2,n3]; way.nodes; // -&gt; [n1,n2,n3] Methods contains(node) Checks if a node is part of a way. Checks if a node is part of a way. Parameters: Name Type Description node Node the node to check Source: josm/mixin/WayMixin.js, line 107 Returns: true, if the node is part of the way Type boolean remove(nodes) Removes one or more nodes from the way. Removes one or more nodes from the way. Signatures remove(n1,n2, ...) Removes the nodes. ni are instances of Node. remove(array|collection) Removes the nodes. array is a javascript array of Nodes, collection is a java collection of Nodes. Parameters: Name Type Description nodes Node | array | Collection the nodes to remove Source: josm/mixin/WayMixin.js, line 158 Ã— Search results Close "},"module-josm_scriptingconsole.html":{"id":"module-josm_scriptingconsole.html","title":"Module: josm/scriptingconsole","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/scriptingconsole API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Provides a set of functions to write to the built-in scripting console. Source: josm/scriptingconsole.js, line 1 Methods &lt;static&gt; clear() Clears the scripting console. Clears the scripting console. Source: josm/scriptingconsole.js, line 87 Example var console = require(\"josm/scriptingconsole\"); console.clear(); &lt;static&gt; hide() Hides the scripting console Hides the scripting console Source: josm/scriptingconsole.js, line 120 Example var console = require(\"josm/scriptingconsole\"); console.hide(); &lt;static&gt; print(message [, values]) Prints a string to the console Prints a string to the console Parameters: Name Type Argument Description message string the message values object &lt;optional&gt; &lt;repeatable&gt; optional values Source: josm/scriptingconsole.js, line 17 Example var console = require(\"josm/scriptingconsole\"); console.print(\"Hello world!\"); // or use formatting console.print(\"Hello world! My name is {0}\", \"foo\"); &lt;static&gt; println(message [, values]) Prints a string to the console, including newline Prints a string to the console, including newline Parameters: Name Type Argument Description message string the message values object &lt;optional&gt; &lt;repeatable&gt; optional values Source: josm/scriptingconsole.js, line 52 Example var console = require(\"josm/scriptingconsole\"); console.println(\"Hello world!\"); // or use formatting console.println(\"Hello world! My name is {0}\", \"foo\"); &lt;static&gt; show() Shows the scripting console Shows the scripting console Source: josm/scriptingconsole.js, line 104 Example var console = require(\"josm/scriptingconsole\"); console.show(); &lt;static&gt; toggle() Toggles the visibility of the scripting console Toggles the visibility of the scripting console Source: josm/scriptingconsole.js, line 136 Example var console = require(\"josm/scriptingconsole\"); console.toggle(); Ã— Search results Close "},"module-josm_ui_menu.html":{"id":"module-josm_ui_menu.html","title":"Module: josm/ui/menu","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/ui/menu API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Provides a collection of namespaces, classes and functions to work with JOSMs menu system. Source: josm/ui/menu.js, line 3 Classes MenuBar Members &lt;static&gt; JSAction JSAction is an action for which a menu item or a toolbar item can be added to JOSMs menu or JOSMs toolbar respectively. This is just a shortcut for the Java class JSAction. The constructor accepts an object with the following optional named parameters. name:string The optional name of the action. Default: an auto generated named. tooltip:string The optional tooltip of the action. Default: empty string. iconName:string The optional name of an icon. Default: null. toolbarId:string The optional name of the tooblar, this action is going to be added to later. Note, that it isn't added automatically, when this action is created. Default: null. onExecute:function The (optional) function which is called when the action is executed. Default: null. onInitEnabled:function The (optional) function which is called when the enabled state of the function is evaluated the first time. Default: null. onUpdateEnabled:function The (optional) function which is called when the enabled state of the function is reevaluated, in particular, when layer change events or selection change events occur. Default: null. Properties: Name Type Description JSAction org.openstreetmap.josm.plugins.scripting.js.JSAction Source: josm/ui/menu.js, line 126 Example var JSAction = require(\"josm/ui/menu\").JSAction; var action = new JSAction({ name: \"My Action\", tooltip: \"This is my action\", onInitEnabled: function() { this.enabled = false; } }); action.onExecute = function() { josm.alert(\"Action is executing ...\"); }; Ã— Search results Close "},"module-josm_ui_menu-MenuBar.html":{"id":"module-josm_ui_menu-MenuBar.html","title":"Class: MenuBar","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Class: MenuBar josm/ui/menu~ MenuBar API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. new MenuBar() Represents JOSMs global menu bar. Source: josm/ui/menu.js, line 10 Members &lt;static, readonly&gt; menuNames Replies an array with the symbolic menu names. Replies an array with the symbolic menu names. Properties: Name Type Description menuNames array the names of the menues in the menu bar Source: josm/ui/menu.js, line 98 Methods get(key) Replies a menu in the JOSM menu bar. Replies a menu in the JOSM menu bar. key is either a numberic index or one of the following symbolic names as string: file edit view tools presets imagery window help Parameters: Name Type Description key number | string the key denoting the menu Source: josm/ui/menu.js, line 39 Returns: the menu Type javax.swing.JMenu Example // get the edit menu with a numeric index var editmenu = josm.menu.get(1); // get the file menu with a symbolic name var filemenu = josm.menu.get(\"file\"); Ã— Search results Close "},"module-josm_util.html":{"id":"module-josm_util.html","title":"Module: josm/util","body":" JOSM Scripting Plugin - JavaScript API V1 Modules clipboardjosmjosm/apijosm/builderjosm/commandjosm/layersjosm/mixin/BoundsMixinjosm/mixin/ChangesetMixinjosm/mixin/DataSetMixinjosm/mixin/JSActionMixinjosm/mixin/LatLonMixinjosm/mixin/NodeMixinjosm/mixin/OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixinjosm/mixin/RelationMixinjosm/mixin/UploadStrategyMixinjosm/mixin/WayMixinjosm/scriptingconsolejosm/ui/menujosm/util Classes josm/api~Apijosm/api~ChangesetApijosm/builder~NodeBuilderjosm/builder~RelationBuilderjosm/builder~WayBuilderjosm/command.AddCommandjosm/command.ChangeCommandjosm/command.CommandHistoryjosm/command.DeleteCommandjosm/mixin/DataSetMixin~DataSetSelectionFacadejosm/ui/menu~MenuBar Mixins josm/mixin/BoundsMixin~BoundsMixinjosm/mixin/ChangesetMixin~ChangesetMixinjosm/mixin/DataSetMixin~DataSetMixinjosm/mixin/JSActionMixin~JSActionMixinjosm/mixin/LatLonMixin~LatLonMixinjosm/mixin/NodeMixin~NodeMixinjosm/mixin/OsmDataLayerMixin~OsmDataLayerMixinjosm/mixin/OsmPrimitiveMixin~OsmPrimitiveMixinjosm/mixin/RelationMixin~RelationMixinjosm/mixin/UploadStrategyMixin~UploadStrategyMixinjosm/mixin/WayMixin~WayMixin Module: josm/util API V1 is deprecated and will be removed in 2021. Consider to migrate your scripts to API V2. Provides a set of static utility functions. Source: josm/util.js, line 1 Methods &lt;static&gt; assert(condition [, message] [, values]) Assert a condition and throw an Error if the condition isn't met. Assert a condition and throw an Error if the condition isn't met. Usage: assert() Does nothing assert(cond) Checks the condition cond. If it is false, throws an Error. assert(cond, msg) Checks the condition cond. If it is false, throws an Error, whose description property is set to msg. assert(cond, msg, objs...) Checks the condition cond. If it is false, throws an Error, whose description property is set to the formatted message msg. Internally uses java.text.MessageFormat to format the message. Parameters: Name Type Argument Description condition boolean message string &lt;optional&gt; the message values object &lt;optional&gt; &lt;repeatable&gt; an optional list of values Source: josm/util.js, line 52 Example var util = require(\"josm/util\"); // throws an Error util.assert(false); // throws an Error e, with e.description == \"My message\" util.assert(false, \"My message\"); // throws an Error e, with e.description == \"My message: test\" util.assert(false, \"My message: {0}\", \"test\"); &lt;static&gt; assertNumber(value [, msg] [, values]) Asserts that val is a number. Asserts that val is a number. Parameters: Name Type Argument Description value Anything the value to check msg String &lt;optional&gt; message if the assertion fails values object &lt;optional&gt; &lt;repeatable&gt; values used in msg placeholders Source: josm/util.js, line 159 &lt;static&gt; assertSomething(val [, msg] [, values]) Asserts that val is defined and non-null. Asserts that val is defined and non-null. Parameters: Name Type Argument Description val any the value to check msg string &lt;optional&gt; message if the assertion fails values object &lt;optional&gt; &lt;repeatable&gt; additional values used in msg placeholders Source: josm/util.js, line 127 Example var util = require(\"josm/util\"); util.assertSomething(null); // -&gt; throws an exception util.assertSomething(void 0); // -&gt; throws an exception util.assertSomting(\"test\"); // -&gt; OK util.assertSomething(5); // -&gt; OK &lt;static&gt; countProperties(o) Replies the number of properties owned by o. Replies the number of properties owned by o. Parameters: Name Type Description o any the object Source: josm/util.js, line 252 Returns: the number of properties owned by o. Type number Example var util = require(\"josm/util\"); var o = {p1: \"v1\", p2: \"v2\"}; var c = util.countProperties(o); // -&gt; 2 o = {}; c = util.countProperties(o); // -&gt; 0 o = undefined; c = util.countProperties(o); // -&gt; undefined &lt;static&gt; each(collection, delegate) Iteraties over the elements of a collection Iterates over the elements in collection and invokes delegate() on each element. Parameters: Name Type Description collection array | arguments | Collection the collection of elements delegate function the function to call on each elemennt Source: josm/util.js, line 425 &lt;static&gt; hasProperties(o) Replies true, if o owns at least one property. Replies true, if o owns at least one property. Parameters: Name Type Description o any the object Source: josm/util.js, line 283 Returns: true, if o owns at least one property. Type boolean Example var util = require(\"josm/util\"); var o = {p1: \"v1\", p2: \"v2\"}; var c = util.hasProperties(o); // -&gt; true o = {}; c = util.hasProperties(o); // -&gt; false o = undefined; c = util.hasProperties(o); // -&gt; false &lt;static&gt; isArguments(value) Replies true if val is a list of arguments. Replies true if val is a list of arguments. Parameters: Name Type Description value anything the value to check Source: josm/util.js, line 238 Returns: true, if val is a list of arguments Type boolean &lt;static&gt; isArray(value) Replies true if val is an array. Replies true if val is an array. Parameters: Name Type Description value anything the value to check Source: josm/util.js, line 224 Returns: true, if val is an array Type boolean &lt;static&gt; isCollection(value) Is a value a collection? Replies true, if a value is an array, an arguments list or a Java collection. Parameters: Name Type Description value object the value to check Source: josm/util.js, line 450 Returns: true, if value is a collection Type boolean &lt;static&gt; isDef(value) Returns true if val is defined. Returns true if val is defined. Parameters: Name Type Description value any the value to check Source: josm/util.js, line 181 Returns: true if val is defined Type boolean &lt;static&gt; isFunction(f) Replies true, if f is a function. Replies true, if f is a function. Parameters: Name Type Description f any the object Source: josm/util.js, line 310 Returns: true, if f is a function. Type boolean &lt;static&gt; isNumber(value) Returns true if val is a number. Returns true if val is a number. Parameters: Name Type Description value any the value to check Source: josm/util.js, line 195 Returns: true if val is a number Type boolean &lt;static&gt; isString(value) Returns true if val is a string. Returns true if val is a string. Parameters: Name Type Description value any the value to check Source: josm/util.js, line 209 Returns: true, if val is a string or a String object Type boolean &lt;static&gt; javaEquals(o1, o2) Are two java objects equal. Checks whether two java objects are either both null or equal by calling o1.equals(o2). Parameters: Name Type Description o1 object a java object or null o2 object a java object or null Source: josm/util.js, line 405 Returns: Type boolean &lt;static&gt; mix() Mixes the properties of a list of objects into one object. Mixes the properties of a list of objects into one object. Source: josm/util.js, line 324 Returns: a new object which includes the combined properties of the argument objects Type object &lt;static&gt; print(message [, args]) Prints a message to stdout (without newline). Prints a message to stdout (without newline). Supports the same string templates as MessageFormat Parameters: Name Type Argument Description message string args object &lt;optional&gt; &lt;repeatable&gt; Source: josm/util.js, line 380 Example var myname = \"...\"; util.print(\"Hello world! My name is {0}\", myname); // escape meta characters like {, } or ' with a leading apostrophe util.print(\" a pair of curly braces '{'}\"); &lt;static&gt; println(message [, args]) Prints a message to stdout (including newline). Prints a message to stdout (including newline). Supports the same string templates as MessageFormat. Parameters: Name Type Argument Description message string args object &lt;optional&gt; &lt;repeatable&gt; Source: josm/util.js, line 355 Example var myname = \"...\"; util.println(\"Hello world! My name is {0}\", myname); // escape meta characters like {, } or ' with a leading apostrophe util.println(\" a pair of curly braces '{'}\"); &lt;inner&gt; isNothing(value) Checks whether a value is null or undefined. Checks whether a value is null or undefined. Parameters: Name Type Description value object the value to check Source: josm/util.js, line 9 Returns: false, if value is null or undefined; true, otherwise Type boolean &lt;inner&gt; isSomething(value) Checks whether a value is neither null nor undefined. Checks whether a value is neither null nor undefined. Parameters: Name Type Description value object the value to check Source: josm/util.js, line 22 Returns: false, if value is null or undefined; true, otherwise Type boolean &lt;inner&gt; trim(s) Trims leading and trailing whitespace from s. Trims leading and trailing whitespace from s. Replies s, if s is null or undefined. Any other value is converted to a string, then leading and trailing white space is removed. Parameters: Name Type Description s string the string to be trimmed Source: josm/util.js, line 35 Returns: Type string Ã— Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
