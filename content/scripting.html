<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>JOSM Scripting Plugin - Scripting JOSM classes</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeRDark.css" rel="stylesheet" type="text/css" />
	<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
	<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script>
	<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shAutoloader.js" type="text/javascript"></script>
    
    <script src="javascripts/respond.js"></script>
    <script src="javascripts/linkutil.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
	<div id="header">
        <nav>
        <li><a href="../index.html">Home</a></li>
        <li><a href="documentation.html">Documentation</a></li>
        <li><a href="js-doc/index.html">API</a></li>
        <li class="downloads"><a href="install.html">Install</a></li>
        <li class="downloads"><a href="http://github.com/gubaer/josm-scripting-plugin">GitHub</a></li>        
        </nav>   
      </div><!-- end header -->
  
    <div class="wrapper">
    <section>

<h1>Scripting native JOSM classes and objects</h1>
<h2>Using native Java classes and methods</h2>
<p>The embedded scripting engine is tightly integrated with the Java type system. Native java classes, both
from the Java SDK and from the <a href="http://josm.openstreetmap.de/browser/josm/trunk/src">JOSM code base</a>, 
are available for scripting.</p>

<p>You can use the fully qualified class names of a Java class in a script. JavaScript doesn't have a
keyword <code class="sample">import</code>. You can't and you don't have to import Java classes in a script. 
Declare a local variable referring to the Java class, if you wan't to avoid the fully qualified
Java class names.</p>

<script type="syntaxhighlighter" class="brush:js"><![CDATA[
// invoke the constructor of a Java class as you would in a Java programm
var pos = new org.openstreetmap.josm.data.coor.LatLon(12.34, 45.67);

// instead of "importing" a class, you can declare a local variable
// referring to it
var LatLon = org.openstreetmap.josm.data.coor.LatLon;

// static methods provided by a Java class are available for scripting
var ok = LatLon.isValidLat(12.34);    // this is a native Java method

// instance methods of a java class are available for scripting, too
var pos2 = new LatLon(12.34, 45.67);
var s = pos.toDisplayString();        // this is a native Java method
]]></script>

<h2>Enriched Java classes - Mixins</h2>
<p>The JOSM Scripting Plugin ships with JavaScript <em>mixins</em> for a selection of
Java classes, in particular for those,  which are often used in scripts.
A JavaScript mixin decorates a Java class with additional properties and methods, 
which are implemented in JavaScript.</p>

<p>The following examples show how <a data-js-object="mixin:LatLonMixin">LatLonMixin</a> decorates the
native JOSM class <a data-josm-class="org.openstreetmap.josm.data.coor.LatLon">LatLon</a>.</p>

<script type="syntaxhighlighter" class="brush:js"><![CDATA[
var LatLon = org.openstreetmap.josm.data.coor.LatLon;

//This invokes the native constructor of the native Java class LatLon 
var pos1 = new LatLon(12.34, 45.67);

// LatLonMixin implements an additional static method 'make'
// which isn't available in the native Java class, but which can
// nevertheless be invoked like a static method
var pos2 = LatLon.make({lat: 12.34, lon: 45.67});

// LatLonMixin implements a (read-only) property 'lat', which
// is implemted by the mixin. There is neither a native getter method
// 'getLat()' nor a native public fiedl 'lat'.
var lat = pos1.lat;

// In this special case, there is a native public method 'lat()'.
// If you wan't to invoke it instead of accessing
// the property 'lat', add the prefix '$'.  
lat = pos1.$lat();

// In fact, you can invoke *any* native public method with a '$' as prefix.
var name = pos1.toDisplayString();     
name = pos1.$toDisplayString();
]]></script>


</section>
</div>

<script type="text/javascript">
    SyntaxHighlighter.all()
</script>

    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
        
  </body>
</html>
